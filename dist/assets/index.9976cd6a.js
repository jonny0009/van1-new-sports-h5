import{u as e,D as a,j as s,s as l}from"./index.ad06644e.js";import{s as t,d as u,r as o,o as n,R as r,P as i,F as m,Z as v,_ as c,U as d,q as f,n as p,X as T,Y as g,b as Y,w as h,e as D,M as y,u as M,c as b,a1 as H,O as k}from"./vue.ffab6494.js";import{r as x}from"./index.98d8ae18.js";const S=["onClick"],_=[(e=>(T("data-v-287274ed"),e=e(),g(),e))((()=>i("i",{class:"iconfont icon-timeMore"},null,-1)))];var w=t({emits:["returnTimeSuccess"],setup(s,{expose:l,emit:t}){const{t:T}=e(),g=u([{text:T("sport.all"),defaultToggle:!0,values:""},{text:T("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:T("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:T("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),Y=u(""),h=u(!1),D=e=>{const[s,l]=e;h.value=!1;const u=g.value.filter((e=>e.defaultToggle)),o=`${a(s).format("YYYY/MM/DD")} - ${a(l).format("YYYY/MM/DD")}`;g.value=[...u,{text:o,values:o}],Y.value=o,t("returnTimeSuccess",Y.value),p((()=>{var e,a;null==(a=M.value)||a.scrollTo(null==(e=b.value)?void 0:e.clientWidth,0)}))},y=()=>{h.value=!0};l({active:Y});const M=u(),b=u();return(e,a)=>{const s=o("van-calendar");return n(),r(m,null,[i("div",{ref_key:"refHomeTime",ref:M,class:"homeTime-Time-Tabs pb10"},[i("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(n(!0),r(m,null,v(g.value,((e,a)=>(n(),r("div",{key:a,class:c(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,t("returnTimeSuccess",Y.value)})(e)},d(e.text),11,S)))),128)),i("div",{class:"more",onClick:y},_)],512)],512),f(s,{show:h.value,"onUpdate:show":a[0]||(a[0]=e=>h.value=e),type:"range",onConfirm:D},null,8,["show"])],64)}}});w.__scopeId="data-v-287274ed";const C={class:"homeTime-page"};var j=t({setup(e){const t=Y((()=>{var e,a,l;return(null==(l=null==(a=null==(e=s)?void 0:e.currentRoute)?void 0:a.value)?void 0:l.name)||""})),i=Y((()=>l.state.home.refreshChangeTime)),d=u(""),p=u();h(i,(e=>{var a;e&&(null==(a=p.value)||a.resetParams(),clearTimeout(d.value),d.value=setTimeout((async()=>{await I(),await F()}),100))}));const T=u(!1),g=D({page:1,pageSize:5,gradeType:2,gameType:"FT"});"HomeToday"===t.value&&(g.startDate=a().format("YYYY-MM-DD")+" 00:00:00",g.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const S=D([]),_=u(0),j=(e=!1,a="")=>{a?P.value=!e:T.value=e},F=async(e="")=>{j(!1,e);const a=await x(g);if(j(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:l,total:t}=s;_.value=t;const{pageSize:u,page:o}=g;e?R.value=!(u*o<t):S.length=0,S.push(...l)}},P=u(!1),R=u(!1),U=u(""),V=u(!1),$=()=>{V.value?R.value||P.value||(P.value=!0,clearTimeout(U.value),U.value=setTimeout((()=>{g.page++,F(!0)}),100)):V.value=!0},z=e=>{if(e)if((e||"").includes("/")){const[a,s]=e.split("-"),l=a.replaceAll("/","-"),t=s.replaceAll("/","-");g.startDate=l+" 00:00:00",g.endDate=t+" 23:59:59"}else g.startDate=a().format("YYYY-MM-DD HH:mm:ss"),g.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else g.startDate="",g.endDate="";R.value=!1,g.page=1,F()},A=e=>{T.value=!0,g.gameType=e,R.value=!1,g.page=1,F()},I=()=>{g.page=1,g.gameType="FT"};return y((()=>{F()})),(e,a)=>{const s=o("SportsTabs"),l=o("HomeMatchHandicap"),u=o("HomeEmpty"),i=o("Loading"),d=o("van-list"),g=o("FooterHeight");return n(),r("div",C,[f(s,{ref_key:"refSportsTabs",ref:p,class:"pb10",onReturnSportsSuccess:A},null,512),"HomeTime"===M(t)?(n(),b(w,{key:0,onReturnTimeSuccess:z})):H("",!0),f(d,{modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),finished:R.value,"finished-text":e.$t("live.noMore"),onLoad:$},{default:k((()=>[e.isShow?H("",!0):(n(),r(m,{key:0},[T.value?(n(),r(m,{key:0},[(n(!0),r(m,null,v(M(S),((e,a)=>(n(),b(l,{key:a,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])))),128)),M(S).length?H("",!0):(n(),b(u,{key:0}))],64)):H("",!0),!T.value||P.value?(n(),b(i,{key:1,class:c({"new_loading mt10":P.value})},null,8,["class"])):H("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),f(g)])}}});j.__scopeId="data-v-f5c01cda";export{j as default};
