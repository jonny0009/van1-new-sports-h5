import{D as e,s as a}from"./index.c63178ba.js";import{s as l,d as s,r as t,o,R as u,P as n,F as i,_ as r,Z as c,S as m,q as v,n as d,X as f,Y as p,b as Y,w as g,e as T,M as D,O as h,u as M,c as y,a2 as b}from"./vue.b4a9caec.js";import{t as x}from"./title-time.ab77a541.js";import{r as k}from"./index.df8f3fa9.js";const S=["onClick"],_=[(e=>(f("data-v-0b21fd28"),e=e(),p(),e))((()=>n("i",{class:"iconfont icon-timeMore"},null,-1)))];var w=l({emits:["returnTimeSuccess"],setup(a,{expose:l,emit:f}){const p=s([{text:"全部",defaultToggle:!0,values:""},{text:"8小时",defaultToggle:!0,values:"8"},{text:"24小时",defaultToggle:!0,values:"24"},{text:"7天",defaultToggle:!0,values:"168"}]),Y=s(""),g=s(!1),T=a=>{const[l,s]=a;g.value=!1;const t=p.value.filter((e=>e.defaultToggle));p.value=[...t,{text:`${e(l).format("YYYY/MM/DD")} - ${e(s).format("YYYY/MM/DD")}`,values:`${e(l).format("YYYY/MM/DD")}-${e(s).format("YYYY/MM/DD")}`}],Y.value=`${e(l).format("YYYY/MM/DD")}-${e(s).format("YYYY/MM/DD")}`,f("returnTimeSuccess",Y.value),d((()=>{var e,a;null==(a=h.value)||a.scrollTo(null==(e=M.value)?void 0:e.clientWidth,0)}))},D=()=>{g.value=!0};l({active:Y});const h=s(),M=s();return(e,a)=>{const l=t("van-calendar");return o(),u(i,null,[n("div",{ref_key:"refHomeTime",ref:h,class:"homeTime-Time-Tabs pb10"},[n("div",{ref_key:"refHomeTimePage",ref:M,class:"homeTime-TimePage"},[(o(!0),u(i,null,r(p.value,((e,a)=>(o(),u("div",{key:a,class:c(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,f("returnTimeSuccess",Y.value)})(e)},m(e.text),11,S)))),128)),n("div",{class:"more",onClick:D},_)],512)],512),v(l,{show:g.value,"onUpdate:show":a[0]||(a[0]=e=>g.value=e),type:"range",onConfirm:T},null,8,["show"])],64)}}});w.__scopeId="data-v-0b21fd28";const H={class:"homeTime-page"};var $=l({setup(l){const n=s("1"),m=Y((()=>a.state.home.refreshChangeTime)),d=s("");g(m,(e=>{e&&(n.value="1",clearTimeout(d.value),d.value=setTimeout((async()=>{await U(),await C()}),100))}));const f=s(!1),p=T({page:1,pageSize:5,gradeType:2,gameType:"FT"}),S=T([]),_=s(0),$=(e=!1,a="")=>{a?V.value=!e:f.value=e},C=async(e="")=>{$(!1,e);const a=await k(p);if($(!0,e),200===a.code){const l=(null==a?void 0:a.data)||{},{baseData:s,total:t}=l;_.value=t;const{pageSize:o,page:u}=p;e?j.value=!(o*u<t):S.length=0,S.push(...s)}},V=s(!1),j=s(!1),F=s(""),A=()=>{j.value||V.value||(V.value=!0,clearTimeout(F.value),F.value=setTimeout((()=>{p.page++,C(!0)}),100))},P=a=>{if(a)if((a||"").includes("/")){const[e,l]=a.split("-"),s=e.replaceAll("/","-"),t=l.replaceAll("/","-");p.startDate=s+" 00:00:00",p.endDate=t+" 23:59:59"}else p.startDate=e().format("YYYY-MM-DD HH:mm:ss"),p.endDate=e().add(a,"hour").format("YYYY-MM-DD HH:mm:ss");else p.startDate="",p.endDate="";j.value=!1,p.page=1,C()},R=e=>{f.value=!0,p.gameType=e,j.value=!1,p.page=1,C()},U=()=>{p.page=1,p.gameType="FT"};return D((()=>{C()})),(e,a)=>{const l=t("ArrowTitle"),s=t("SportsTabs"),m=t("HomeMatchHandicap"),d=t("HomeEmpty"),p=t("Loading"),Y=t("van-list"),g=t("FooterHeight"),T=t("van-collapse-item"),D=t("van-collapse");return o(),u("div",H,[v(D,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e),accordion:"",border:!1,class:"GlobalCollapse"},{default:h((()=>[v(T,{name:"1"},{title:h((()=>[v(l,{class:"mt10 mb10",src:M(x),text:e.$t("home.latestMatch")},null,8,["src","text"])])),default:h((()=>[v(s,{class:"pb10",onReturnSportsSuccess:R}),v(w,{onReturnTimeSuccess:P}),v(Y,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),finished:j.value,"finished-text":e.$t("live.noMore"),onLoad:A},{default:h((()=>[e.isShow?b("",!0):(o(),u(i,{key:0},[f.value?(o(),u(i,{key:0},[(o(!0),u(i,null,r(M(S),((e,a)=>(o(),y(m,{key:a,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])))),128)),M(S).length?b("",!0):(o(),y(d,{key:0}))],64)):b("",!0),!f.value||V.value?(o(),y(p,{key:1,class:c({"new_loading mt10":V.value})},null,8,["class"])):b("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),v(g)])),_:1})])),_:1},8,["modelValue"])])}}});$.__scopeId="data-v-987410a4";export{$ as default};
