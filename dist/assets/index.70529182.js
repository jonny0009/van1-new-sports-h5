import{u as e,D as a,s,r as t,y as l,j as u}from"./index.ea232e4a.js";import{s as o,d as n,r,o as i,R as v,P as m,F as c,S as d,_ as p,W as f,q as g,n as T,Y,Z as y,b as D,w as h,e as _,M as b,O as M,u as S,c as k,$ as H}from"./vue.5fe62a63.js";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang.bd52a3a6.js";const w=["onClick"],C=[(e=>(Y("data-v-62aff50e"),e=e(),y(),e))((()=>m("i",{class:"iconfont icon-timeMore"},null,-1)))];var F=o({emits:["returnTimeSuccess"],setup(s,{expose:t,emit:l}){const{t:u}=e(),o=n([{text:u("sport.all"),defaultToggle:!0,values:""},{text:u("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:u("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:u("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),Y=n(""),y=n(!1),D=e=>{const[s,t]=e;y.value=!1;const u=o.value.filter((e=>e.defaultToggle)),n=`${a(s).format("YYYY/MM/DD")} - ${a(t).format("YYYY/MM/DD")}`;o.value=[...u,{text:n,values:n}],Y.value=n,l("returnTimeSuccess",Y.value),T((()=>{var e,a;null==(a=_.value)||a.scrollTo(null==(e=b.value)?void 0:e.clientWidth,0)}))},h=()=>{y.value=!0};t({active:Y});const _=n(),b=n();return(e,a)=>{const s=r("van-calendar");return i(),v(c,null,[m("div",{ref_key:"refHomeTime",ref:_,class:"homeTime-Time-Tabs pb10"},[m("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(i(!0),v(c,null,d(o.value,((e,a)=>(i(),v("div",{key:a,class:p(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,l("returnTimeSuccess",Y.value)})(e)},f(e.text),11,w)))),128)),m("div",{class:"more",onClick:h},C)],512)],512),g(s,{show:y.value,"onUpdate:show":a[0]||(a[0]=e=>y.value=e),type:"range",onConfirm:D},null,8,["show"])],64)}}});F.__scopeId="data-v-62aff50e";const V={class:"mt10"};var j=o({setup(e){const o=D((()=>s.state.user.scrollNumY)),f=D((()=>{const e=s.state.app.globalBarHeaderHeight||48;return e>60?48:e})),T=n(null),Y=D((()=>{var e,a,s;return(null==(s=null==(a=null==(e=t)?void 0:e.currentRoute)?void 0:a.value)?void 0:s.name)||""})),y=D((()=>s.state.home.refreshChangeTime)),w=n(""),C=n();h(y,(e=>{var a;e&&(null==(a=C.value)||a.resetParams(),clearTimeout(w.value),w.value=setTimeout((async()=>{await Z(),await I()}),100))})),h((()=>o.value),(e=>{e>88&&(C.value.ifAnimated=!1)}));const j=n(!1),R=n(!1),N=_({gameTypeSon:"",showtype:"FT",timeStage:0,gameSort:3,dateStage:0,isNovice:"Y",leagueIds:"",onlyFavorite:0,page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===Y.value&&(N.startDate=a().format("YYYY-MM-DD")+" 00:00:00",N.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const O=n([]),P=n([]),$=n(0),z=(e=!1,a="")=>{a?L.value=!e:j.value=e},A=()=>{R.value=!1,j.value=!0,U.value=!1,N.page=1,I()},I=async(e="")=>{z(!1,e);const a=await l(N);if(z(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:l}=null==s?void 0:s.matchList;$.value=l;const{pageSize:o,page:n}=N;e?U.value=!(o*n<l):(O.value=[],P.value=[]),P.value.push(...t);const r={},i=[];P.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=u(e.gameDate).format("YYYY/MM/DD");r[a]?r[a].list.push(e):r[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(r).map((e=>{i.push(JSON.parse(JSON.stringify(r[e])))})),O.value=i}},L=n(!1),U=n(!1),J=n(""),W=n(!1),q=()=>{W.value?U.value||L.value||(L.value=!0,clearTimeout(J.value),J.value=setTimeout((()=>{N.page++,I(!0)}),100)):W.value=!0},B=e=>{if(e)if((e||"").includes("/")){const[a,s]=e.split("-"),t=a.replaceAll("/","-"),l=s.replaceAll("/","-");N.startDate=t+" 00:00:00",N.endDate=l+" 23:59:59"}else N.startDate=a().format("YYYY-MM-DD HH:mm:ss"),N.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else N.startDate="",N.endDate="";U.value=!1,N.page=1,I()},E=e=>{j.value=!0,N.gameType=e,U.value=!1,N.page=1,I()},Z=()=>{N.page=1,N.gameType="FT"};return b((()=>{I()})),(e,a)=>{const s=r("van-sticky"),t=r("HomeMatchHandicap"),l=r("HomeEmpty"),u=r("Loading"),o=r("van-list"),n=r("van-pull-refresh"),y=r("FooterHeight"),D=r("SportsTabs");return i(),v("div",{class:"homeTime-page",ref_key:"newContainer",ref:T},[g(D,{ref_key:"refSportsTabs",ref:C,class:"pb10",isCustom:!0,tabs:e.sports,onReturnSportsSuccess:E},{body:M((()=>[m("div",V,["HomeTime"===S(Y)?(i(),k(F,{key:0,onReturnTimeSuccess:B})):H("",!0),g(n,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),onRefresh:A},{default:M((()=>[g(o,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),finished:U.value,"finished-text":e.$t("live.noMore"),onLoad:q},{default:M((()=>[j.value?(i(),v(c,{key:0},[(i(!0),v(c,null,d(O.value,((e,a)=>(i(),v(c,{key:a},[g(s,{"offset-top":S(f),container:T.value,"z-index":"5",class:p({mt10:0!==a})},{default:M((()=>[g(x,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(i(!0),v(c,null,d(e.list,((e,a)=>(i(),k(t,{"play-title-toggle":!1,"send-params":e,class:p({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128)),O.value.length?H("",!0):(i(),k(l,{key:0}))],64)):H("",!0),!j.value||L.value?(i(),k(u,{key:1,class:p({"new_loading mt10":L.value})},null,8,["class"])):H("",!0)])),_:1},8,["modelValue","finished","finished-text"])])),_:1},8,["modelValue"]),g(y)])])),_:1},8,["tabs"])],512)}}});j.__scopeId="data-v-46be436c";export{j as default};
