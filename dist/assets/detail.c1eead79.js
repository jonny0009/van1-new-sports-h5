var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{s as i,I as n,T as o,u as r,$ as c}from"./index.c53fd497.js";import{s as u,d as m,w as v,a2 as d,R as p,a as g,o as h,S as y,P as f,V as _,a0 as b,X as w,Y as I,n as E,b as T,r as k,E as j,q as O,u as P,x as S,W as x,a7 as D,e as M,M as N,y as R,c as C,_ as B,F as L,Z as $,O as F,$ as H}from"./vue.6c3ce548.js";import{m as A,e as G}from"./index.fc60f452.js";/* empty css                     */import{v as K}from"./video.es.5007c767.js";import{u as U}from"./useMatch.beb85d0b.js";const V={class:"match-video"},W=["src"],q={key:2,class:"mask-loading"},X=(e=>(w("data-v-9f4050ea"),e=e(),I(),e))((()=>f("div",{class:"icon"},null,-1))),Y={class:"text"};var Z=u({props:{url:String},emits:["on-error"],setup(e,{emit:a}){const l=e,t=m("");v((()=>l.url),(e=>{u.value=!0,e?s(e):a("on-error","没有播放链接")}));const s=e=>{if(t.value="",e.indexOf(".html")>-1)return t.value=e,void T();r?(null==r||r.src(e),null==r||r.load(),null==r||r.play(),T()):I(e)},n=d(),o=p();let r=null;const c=m(""),u=m(!0),w=m(!1),I=e=>{const l={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:e,type:"application/x-mpegURL"}]};E((()=>{r=K(c.value,l,(()=>{r.log("onPlayerReady");document.pictureInPictureElement&&r.exitPictureInPicture().then((()=>{r.log("画中画模式已关闭")}))})),r.on("waiting",(()=>{console.log("waiting",(new Date).getTime())})),r.on("playing",(()=>{console.log("playing",(new Date).getTime()),u.value=!1})),r.on("error",(e=>{u.value=!1,a("on-error",e)})),r.on("enterpictureinpicture",(()=>{w.value=!0,i.commit("match/SET_PIP_GIDM",n.params.id)})),r.on("leavepictureinpicture",(()=>{if(w.value=!1,"MatchDetail"!==n.name){const e=i.state.app.pictureinpictureGidm;o.push(`/match/${e}/bets`)}}))}))},T=()=>{E((()=>{u.value=!1}))};return g((()=>{w.value||(r&&r.dispose(),r=null)})),(e,a)=>(h(),y("div",V,[t.value&&!u.value?(h(),y("iframe",{key:0,src:t.value,style:{width:"100%",height:"100%"},frameborder:"0"},null,8,W)):(h(),y("video",{key:1,ref_key:"videoRef",ref:c,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512)),u.value?(h(),y("div",q,[X,f("div",Y,_(e.$t("live.effLoading"))+"...",1)])):b("",!0)]))}});Z.__scopeId="data-v-9f4050ea";const z={class:"team"},J={class:"team-header"},Q={class:"league"},ee={class:"date"},ae={class:"team-container"},le={class:"team-player host"},te={class:"img-num"},se={type:4,alt:""},ie={class:"team-score"},ne=["innerHTML"],oe={class:"team-player away"},re={class:"img-num"},ce={type:5,alt:""};var ue=u({setup(e){const a=U(),l=T((()=>i.state.match.matchInfo)),t=T((()=>"BK"==l.value.gameType?n+"FE/common/live/img_video_bg_BK.jpg":n+"FE/common/live/img_video_bg_FT.jpg"));return(e,s)=>{const i=k("SvgIcon"),n=j("img");return h(),y("div",{class:"match-game",style:x({backgroundImage:"url("+P(t)+")"})},[f("div",z,[f("div",J,[f("div",Q,[O(i,{name:"live-football"}),f("span",null,_(P(l).leagueName),1)]),f("div",ee,_(P(o)(P(l).gameDate,"MM-DD HH:mm")),1)]),f("div",ae,[f("div",le,[f("div",te,[S(f("img",se,null,512),[[n,P(l).homeLogo]]),f("span",null,_(P(a).getScore(P(l),"H")),1)]),f("strong",null,_(P(l).homeTeam),1)]),f("div",ie,[f("span",{class:"default",innerHTML:P(a).showRBTime(P(l))},null,8,ne)]),f("div",oe,[f("div",re,[f("span",null,_(P(a).getScore(P(l),"C")),1),S(f("img",ce,null,512),[[n,P(l).awayLogo]])]),f("strong",null,_(P(l).awayTeam),1)])])])],4)}}});ue.__scopeId="data-v-22864e70";const me={class:"main"},ve={class:"main-menu"},de=["onClick"],pe={class:"label"},ge={class:"main-view"},he={class:"main-chat"};var ye=u({setup(e){const n=D((()=>c((()=>import("./ChatRoom.c1e3eb3a.js")),["/assets/ChatRoom.c1e3eb3a.js","/assets/ChatRoom.8f85cee3.css","/assets/websocket.a7b540fc.js","/assets/index.c53fd497.js","/assets/index.43ebf6a3.css","/assets/vue.6c3ce548.js","/assets/index.fc60f452.js"]))),o=(e,a)=>(e.type.name||(e.type.name=a.name),e),{t:u}=r(),w=d(),I=p(),E=T((()=>i.state.app.showFixedBet)),j=T((()=>w.params.id)),x=M([{title:u("live.bet"),iconName:"live-bet",path:"bets"},{title:u("live.stackBet"),iconName:"live-stack",path:"mixs"},{title:u("live.dataBase"),iconName:"live-data",path:"data"},{title:u("live.more"),iconName:"live-grid",path:"other"}]),K=m({}),U=async()=>{const e=j.value,n=(await A({gidm:e})).data||{};if(K.value=((e,i)=>{for(var n in i||(i={}))l.call(i,n)&&s(e,n,i[n]);if(a)for(var n of a(i))t.call(i,n)&&s(e,n,i[n]);return e})({},n),n.detail&&n.detail.length>0){const{game:e}=n.detail[0],a=e.gameInfo||{};K.value.gameInfo=a}i.commit("match/SET_MATCH_INFO",K.value)},V=m(""),W=m(!1),q=async()=>{const e=j.value,a=await G({gidm:e});if(200===a.code){const{streamNa:e}=a.data||{},{liveali:l}=e||{};V.value=(l||{}).m3u8,W.value=!1}else V.value="",W.value=!0},X=()=>{W.value=!0},Y=m(!1);let z=null;const J=()=>{z&&(clearInterval(z),z=null,i.commit("match/SET_NEED_TIMER",!1))};return N((()=>{U(),q(),J(),z=setInterval((()=>{U(),i.commit("match/SET_NEED_TIMER",!0)}),5e3)})),g((()=>{J()})),v((()=>j.value),(()=>{U(),q()})),(e,a)=>{const l=k("SvgIcon"),t=k("router-view");return h(),y("div",{class:B(["detail",{"has-bet":P(E)}])},[f("div",{class:B(["match",{"no-video":W.value}])},[S(O(Z,{url:V.value,onOnError:X},null,8,["url"]),[[R,!W.value]]),W.value?(h(),C(ue,{key:0})):b("",!0)],2),f("div",me,[f("div",ve,[(h(!0),y(L,null,$(P(x),((e,a)=>(h(),y("div",{key:a,class:B(["nav",{selected:P(w).path.endsWith(e.path)}]),onClick:a=>{return l=e.path,void I.replace(`/match/${j.value}/${l}`);var l}},[O(l,{name:e.iconName},null,8,["name"]),f("span",pe,_(e.title),1)],10,de)))),128))]),f("div",ge,[O(t,null,{default:F((({Component:e,route:a})=>[(h(),C(H(o(e,a)),{key:"matchId"}))])),_:1})]),f("div",he,[f("div",{class:"holder",onClick:a[0]||(a[0]=e=>Y.value=!0)},_(e.$t("live.clickOpenChat")),1)])]),O(P(n),{show:Y.value,"onUpdate:show":a[1]||(a[1]=e=>Y.value=e),class:B({video:!W.value})},null,8,["show","class"])],2)}}});ye.__scopeId="data-v-0e20c460";export{ye as default};
