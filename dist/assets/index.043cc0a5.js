import{u as e,D as a,j as s,s as l}from"./index.d868f028.js";import{s as t,d as o,r as u,o as n,R as r,P as i,F as m,Z as v,_ as c,U as d,q as f,n as p,X as g,Y as T,b as h,w as Y,e as D,M as y,u as b,c as M,a1 as H,O as k}from"./vue.9cce28bb.js";import{r as x}from"./index.5aa94be9.js";const S=["onClick"],w=[(e=>(g("data-v-0d602599"),e=e(),T(),e))((()=>i("i",{class:"iconfont icon-timeMore"},null,-1)))];var _=t({emits:["returnTimeSuccess"],setup(s,{expose:l,emit:t}){const{t:g}=e(),T=o([{text:g("sport.all"),defaultToggle:!0,values:""},{text:g("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:g("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:g("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),h=o(""),Y=o(!1),D=e=>{const[s,l]=e;Y.value=!1;const o=T.value.filter((e=>e.defaultToggle)),u=`${a(s).format("YYYY/MM/DD")} - ${a(l).format("YYYY/MM/DD")}`;T.value=[...o,{text:u,values:u}],h.value=u,t("returnTimeSuccess",h.value),p((()=>{var e,a;null==(a=b.value)||a.scrollTo(null==(e=M.value)?void 0:e.clientWidth,0)}))},y=()=>{Y.value=!0};l({active:h});const b=o(),M=o();return(e,a)=>{const s=u("van-calendar");return n(),r(m,null,[i("div",{ref_key:"refHomeTime",ref:b,class:"homeTime-Time-Tabs pb10"},[i("div",{ref_key:"refHomeTimePage",ref:M,class:"homeTime-TimePage"},[(n(!0),r(m,null,v(T.value,((e,a)=>(n(),r("div",{key:a,class:c(["item",{active:e.values===h.value}]),onClick:a=>(e=>{h.value=e.values,t("returnTimeSuccess",h.value)})(e)},d(e.text),11,S)))),128)),i("div",{class:"more",onClick:y},w)],512)],512),f(s,{show:Y.value,"onUpdate:show":a[0]||(a[0]=e=>Y.value=e),type:"range",onConfirm:D},null,8,["show"])],64)}}});_.__scopeId="data-v-0d602599";const C={class:"homeTime-page"};var L=t({setup(e){const t=h((()=>{var e,a,l;return(null==(l=null==(a=null==(e=s)?void 0:e.currentRoute)?void 0:a.value)?void 0:l.name)||""})),i=h((()=>l.state.home.refreshChangeTime)),d=o(""),p=o();Y(i,(e=>{var a;console.log("watch refreshChangeTime refreshChangeTime refreshChangeTime"),e&&(null==(a=p.value)||a.resetParams(),clearTimeout(d.value),d.value=setTimeout((async()=>{await A(),await j()}),100))}));const g=o(!1),T=D({page:1,pageSize:5,gradeType:2,gameType:"FT"});"HomeToday"===t.value&&(T.startDate=a().format("YYYY-MM-DD")+" 00:00:00",T.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const S=D([]),w=o(0),L=(e=!1,a="")=>{a?F.value=!e:g.value=e},j=async(e="")=>{L(!1,e);const a=await x(T);if(L(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:l,total:t}=s;w.value=t;const{pageSize:o,page:u}=T;e?P.value=!(o*u<t):S.length=0,S.push(...l)}},F=o(!1),P=o(!1),R=o(""),U=o(!1),V=()=>{U.value?(console.log("onLoad onLoad onLoad"),P.value||F.value||(F.value=!0,clearTimeout(R.value),R.value=setTimeout((()=>{T.page++,j(!0)}),100))):U.value=!0},$=e=>{if(e)if((e||"").includes("/")){const[a,s]=e.split("-"),l=a.replaceAll("/","-"),t=s.replaceAll("/","-");T.startDate=l+" 00:00:00",T.endDate=t+" 23:59:59"}else T.startDate=a().format("YYYY-MM-DD HH:mm:ss"),T.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else T.startDate="",T.endDate="";P.value=!1,T.page=1,j()},z=e=>{g.value=!0,T.gameType=e,P.value=!1,T.page=1,j()},A=()=>{T.page=1,T.gameType="FT"};return y((()=>{j()})),(e,a)=>{const s=u("SportsTabs"),l=u("HomeMatchHandicap"),o=u("HomeEmpty"),i=u("Loading"),d=u("van-list"),T=u("FooterHeight");return n(),r("div",C,[f(s,{ref_key:"refSportsTabs",ref:p,class:"pb10",onReturnSportsSuccess:z},null,512),"HomeTime"===b(t)?(n(),M(_,{key:0,onReturnTimeSuccess:$})):H("",!0),f(d,{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),finished:P.value,"finished-text":e.$t("live.noMore"),onLoad:V},{default:k((()=>[e.isShow?H("",!0):(n(),r(m,{key:0},[g.value?(n(),r(m,{key:0},[(n(!0),r(m,null,v(b(S),((e,a)=>(n(),M(l,{key:a,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])))),128)),b(S).length?H("",!0):(n(),M(o,{key:0}))],64)):H("",!0),!g.value||F.value?(n(),M(i,{key:1,class:c({"new_loading mt10":F.value})},null,8,["class"])):H("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),f(T)])}}});L.__scopeId="data-v-2a5b0a02";export{L as default};
