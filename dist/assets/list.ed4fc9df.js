var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,n=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&o(e,l,a[l]);return e},v=(e,t)=>a(e,l(t));import{u,s as c,I as r,B as d,M as m,r as p}from"./index.957b49aa.js";import{u as g}from"./useMatch.e73cb17e.js";import{s as y,a as f}from"./s_hot2.bba3cb3a.js";import{s as h,b,d as k,r as T,E as I,o as _,R as w,P as O,q as x,O as S,u as B,W as R,$ as j,c as N,x as D,w as C,j as L,a as M,n as V,V as E,B as F,F as H,S as $,Y as P,Z as U,M as z,e as A,_ as K}from"./vue.1f547d27.js";import{d as q,g as W,a as Y,n as Z}from"./index.adfb5042.js";/* empty css                     */import{v as G}from"./video.es.993ced03.js";import{l as J}from"./live-bg-error.28d01b38.js";import"./getScore.916d526e.js";const Q={class:"item"},X={class:"item-photo"},ee=["src"],ae={key:0,class:"state"},le={class:"footer"},te=["innerHTML"],ie={key:1},se={key:1,class:"mask-reseve"},oe={class:"item-title"},ne={class:"item-team"},ve={class:"cell"},ue={class:"head"},ce={type:4,alt:""},re={class:"score"},de={class:"cell"},me={class:"head"},pe={type:5,alt:""},ge={class:"score"},ye={class:"item-desc"},fe={class:"name"},he={class:"hots"},be=["src"];var ke=h({props:{item:{type:Object,default:()=>{}}},setup(e){const a=e,{t:l}=u(),t=b((()=>c.state.app.theme)),i=b((()=>"blue"==t.value?y:f)),s=k(r),o=g(),n=b((()=>{var e;return null==(e=a.item)?void 0:e.gameInfo})),v=b((()=>{const e=a.item;return e.anchorId?r+e.cover:"BK"==e.gameType?r+"FE/common/live/img_video_bg_BK.jpg":r+"FE/common/live/img_video_bg_FT.jpg"})),m=b((()=>{const e=a.item.watchTotal.toLocaleString();return"RB"==a.item.showType?l("live.xLooks",{num:e}):l("live.xReserve",{num:e})})),p=b((()=>({FT:"live-football",BK:"live-basketball",TN:"live-tennisball",OP_BM:"live-badminton"}[a.item.gameType])));return(l,t)=>{const u=T("van-image"),c=T("SvgIcon"),r=I("img");return _(),w("div",Q,[O("div",X,[x(u,{src:B(v),fit:"cover"},{error:S((()=>[O("img",{src:s.value+"FE/common/live/img_video_bg_FT.jpg",alt:""},null,8,ee)])),_:1},8,["src"]),"RB"==e.item.showType?(_(),w("div",ae,R(l.$t("live.hotNow")),1)):j("",!0),O("div",le,["RB"==e.item.showType?(_(),w("span",{key:0,innerHTML:B(o).showRBTime(e.item)},null,8,te)):(_(),w("span",ie,R(B(d)(e.item.gameDate,"MM-DD HH:mm")),1))]),"RB"!=e.item.showType?(_(),w("div",se,[O("span",null,R(l.$t("live.xHas",{num:B(m)})),1),O("span",null,R(l.$t("live.playNow")),1)])):j("",!0)]),O("div",oe,[B(p)?(_(),N(c,{key:0,name:B(p)},null,8,["name"])):j("",!0),O("strong",null,R(e.item.leagueName),1)]),O("div",ne,[O("div",ve,[O("div",ue,[D(O("img",ce,null,512),[[r,e.item.homeLogo]]),O("span",null,R(e.item.homeTeam),1)]),O("div",re,[O("span",null,R(B(n).sc_game_H||B(n).sc_FT_H),1)])]),O("div",de,[O("div",me,[D(O("img",pe,null,512),[[r,e.item.awayLogo]]),O("span",null,R(e.item.awayTeam),1)]),O("div",ge,[O("span",null,R(B(n).sc_game_A||B(n).sc_FT_C||B(n).sc_FT_A),1)])])]),O("div",ye,[O("div",fe,R(e.item.nickname||e.item.leagueShortName),1),O("div",he,[O("img",{src:B(i),alt:""},null,8,be),O("span",null,R(a.item.watchTotal.toLocaleString()),1)])])])}}});ke.__scopeId="data-v-075ee586";const Te=e=>(P("data-v-52251d20"),e=e(),U(),e),Ie={class:"video-header-info"},_e={class:"title text-overflow"},we={class:"info"},Oe={type:"1",alt:""},xe={class:"name text-overflow"},Se={key:1,class:"mask-loading"},Be=Te((()=>O("div",{class:"icon"},null,-1))),Re={class:"text"},je={key:2,class:"video-error"},Ne=["src"],De=Te((()=>O("div",{class:"error-title"},"播放异常",-1))),Ce={class:"match-info"},Le={class:"match-lengua text-overflow"},Me={class:"team-info text-overflow"},Ve={class:"team-icon",alt:"",type:4,style:{"object-fit":"contain"}},Ee={class:"team-info text-overflow"},Fe={class:"team-icon",alt:"",type:5,style:{"object-fit":"contain"}},He={class:"play-info-box"},$e={key:0,class:"play-item"},Pe={class:"play-name"},Ue={class:"ratio-name text-overflow"},ze={class:"ratio-ior"},Ae={key:1,class:"play-item"},Ke={class:"play-name"},qe={class:"ratio-name text-overflow"},We={class:"ratio-ior"};var Ye=h({props:{videoInfo:{type:Object,default:()=>{}},active:{type:Boolean,default:!1}},setup(e,{expose:a}){const l=e,t=k();C((()=>l.active),(async()=>{l.active?f?f&&f.play():(c(),h()):f&&f.pause()}));const i=b((()=>{const{R:e}=u.value;if(e){const{game:a,ratioData:l}=e,t=l.map((e=>{const l=v(n(n(n({},e),a),u.value),{playType:"R",systemId:o.value.systemId});return{marketInfo:new m(l)}}));return v(n(n({},a),u.value),{playType:"R",list:t})}return null})),s=b((()=>{const{OU:e}=u.value;if(e){const{game:a,ratioData:l}=e,t=l.map((e=>{const l=v(n(n(n({},e),a),u.value),{playType:"OU",systemId:o.value.systemId});return{marketInfo:new m(l)}}));return v(n(n({},a),u.value),{playType:"OU",list:t})}return null})),o=b((()=>{var e,a;return!!(null==(a=null==(e=l.videoInfo)?void 0:e.gameList)?void 0:a.length)&&l.videoInfo.gameList[0]})),u=k({}),c=async()=>{if(!(null==o?void 0:o.value))return!1;const e=null==o?void 0:o.value.gidm,a=await q({gidm:e});200===(null==a?void 0:a.code)&&(null==a?void 0:a.data)&&(u.value=null==a?void 0:a.data)};L((()=>{l.active&&(h(),c())})),M((()=>{P()}));const r=k(""),d=k(null),p=k(!1),g=k(!0),y=k(!1);let f=null;const h=()=>{d.value=l.videoInfo.videoUrl,p.value=!1,g.value=!0,y.value=!1;const e={preload:"auto",width:"100%",height:"100%",loop:!0,autoplay:!0,muted:!0,controls:!1,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:d.value,type:"video/mp4"}]};V((()=>{f||(f=G(r.value,e)),f.muted(!1),null==f||f.play(),f.on("waiting",(()=>{y.value=!0,p.value=!1,g.value=!1})),f.on("playing",(()=>{y.value=!1,p.value=!1,g.value=!1})),f.on("error",(()=>{p.value=!0,y.value=!1})),f.on("pause",(()=>{g.value=!0})),f.on("click",(()=>{U()}))}))},P=()=>{f&&f.dispose(),f=null},U=()=>{if(p.value)return!1;f.paused()?f.play():f.pause()};return a({videoTarget:t,play:()=>{f?f&&f.play():(c(),h())},pause:()=>{f&&f.pause()}}),(a,l)=>{const o=T("SvgIcon"),n=T("SportsIcon"),v=T("BettingOption"),c=I("img"),d=I("play");return _(),w("div",{class:"room-wrap",ref_key:"videoTarget",ref:t},[O("div",Ie,[O("div",_e,R(e.videoInfo.videoTitle),1),O("div",we,[D(O("img",Oe,null,512),[[c,e.videoInfo.leagueIcon]]),O("div",xe,R(e.videoInfo.leagueName||e.videoInfo.leagueNameCn),1)])]),O("video",{ref_key:"videoRef",ref:r,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512),y.value||p.value||!g.value?j("",!0):(_(),w("div",{key:0,class:"video-pause",onClick:U},[x(o,{class:"first-icon",name:"live-pause"})])),y.value?(_(),w("div",Se,[Be,O("div",Re,R(a.$t("live.effLoading"))+"...",1)])):p.value?(_(),w("div",je,[O("img",{src:B(J),class:"bg"},null,8,Ne),De])):j("",!0),B(i)||B(s)?(_(),w("div",{key:3,class:"match-wrap",onClick:l[0]||(l[0]=E((()=>{}),["stop"]))},[O("div",Ce,[O("div",Le,[x(n,{class:"sports-icon","icon-src":u.value.gameType},null,8,["icon-src"]),F(" "+R(u.value.leagueShortName||u.value.leagueName),1)]),O("div",Me,[D(O("img",Ve,null,512),[[c,u.value.homeLogo]]),F(" "+R(u.value.awayTeamAbbr||u.value.awayTeam),1)]),O("div",Ee,[D(O("img",Fe,null,512),[[c,u.value.awayLogo]]),F(" "+R(u.value.homeTeamAbbr||u.value.homeTeam),1)])]),O("div",He,[B(i)?(_(),w("div",$e,[D(O("div",Pe,null,512),[[d,B(i)]]),(_(!0),w(H,null,$(B(i).list,((e,a)=>(_(),N(v,{key:a,"market-info":e.marketInfo,class:"betting-option"},{default:S((()=>[O("span",Ue,R(e.marketInfo.ratioName),1),O("span",ze,R(e.marketInfo.vior),1)])),_:2},1032,["market-info"])))),128))])):j("",!0),B(s)?(_(),w("div",Ae,[D(O("div",Ke,null,512),[[d,B(s)]]),(_(!0),w(H,null,$(B(s).list,((e,a)=>(_(),N(v,{key:a,"market-info":e.marketInfo,class:"betting-option"},{default:S((()=>[O("span",qe,R(e.marketInfo.ratioName),1),O("span",We,R(e.marketInfo.vior),1)])),_:2},1032,["market-info"])))),128))])):j("",!0)])])):j("",!0)],512)}}});Ye.__scopeId="data-v-52251d20";const Ze={class:"short-video-container"},Ge={class:"list"};var Je=h({setup(e){z((()=>{o()})),L((()=>{v()}));const a=k();C((()=>a.value),(()=>{console.log(123)}));const l=k([]),t=k(!0),i=k(0),s=k({page:0,pageSize:10}),o=async()=>{var e,a;if(t.value=!0,i.value>0&&s.value.page*s.value.pageSize>=i.value)return!1;s.value.page++,1===s.value.page&&(l.value.length=0);const o=await W(n({},s.value)).finally((()=>{t.value=!1})),v=(null==(e=null==o?void 0:o.data)?void 0:e.videoData)||[];i.value=(null==(a=null==o?void 0:o.data)?void 0:a.total)||0,200===o.code&&v.length&&l.value.push(...v)},v=()=>{window.onscroll=()=>{var e;null==(e=a.value)||e.forEach((e=>{const a=e.videoTarget.getBoundingClientRect();a.y>100&&a.y<300?e.play():e.pause()}))}};return(e,t)=>(_(),w("div",Ze,[O("div",Ge,[(_(!0),w(H,null,$(l.value,((e,l)=>(_(),N(Ye,{ref_for:!0,ref_key:"videoRefs",ref:a,key:l,videoInfo:e},null,8,["videoInfo"])))),128))])]))}});Je.__scopeId="data-v-4597b928";const Qe={class:"tab-title"},Xe={key:0,class:"title-group"},ea={class:"title"},aa={key:0,class:"next"},la=(e=>(P("data-v-db243b24"),e=e(),U(),e))((()=>O("div",{class:"img"},[O("img",{src:"/assets/no_an_ma.134981fa.png",alt:""})],-1))),ta=["innerHTML"],ia={class:"grid-wrapper"},sa={class:"title-group"},oa={class:"title"},na={class:"grid-wrapper"},va={class:"title-group"},ua={class:"title"},ca=["onClick"],ra=["errorImg"],da={class:"video-user-info"},ma={type:"1",alt:""},pa={class:"name text-overflow"},ga={class:"video-content text-overflow-2"};var ya=h({setup(e){z((()=>{h()}));const a=k(["HOT","ComingSoon","VIDEO"]),l=b((()=>c.state.app.showFixedBet)),{t:t}=u(),i=A([{type:"RB",title:t("live.hot"),iconName:"live-hot"},{type:"FT",title:t("live.football"),iconName:"live-football"},{type:"BK",title:t("live.basketball"),iconName:"live-basketball"},{type:"TN",title:t("live.tennisball"),iconName:"live-tennisball"},{type:"OP_BM",title:t("live.badminton"),iconName:"live-badminton"},{type:"SORTVIDEO",title:t("home.shortVideoTitle"),iconName:"live-badminton"}]),s=k("RB"),o=k(-1),v=k("");let r=A({});const d=k([]),m=k(!0),g=k(!1),y=k(!1),f=()=>{h()},h=()=>{["SORTVIDEO"].includes(s.value)?d.value=[]:(async()=>{d.value.length=0,y.value&&(y.value=!1),m.value=!0;const e={page:1,pageSize:100};"RB"===s.value?(e.rbType=1,e.gameType=void 0):(e.rbType=void 0,e.gameType=s.value);const a=await Y(e).finally((()=>{m.value=!1})),l=a.data;if(200===a.code){if("RB"===s.value&&0===l.list.length){g.value=!0;const e=await Z();return 200===e.code&&e.data&&e.data>e.systemTime?(o.value=e.data-e.systemTime,void(r=setInterval((()=>{o.value-=1e3,0===o.value&&clearInterval(r),L()}),1e3))):void 0}l.list.forEach((e=>{d.value.push(e)})),g.value=d.value.length===l.total}else g.value=!0})(),["RB"].includes(s.value)?(U.value.page=0,q(),V()):(M.value=[],E.value=[])},C=e=>{p.push(`/match/${e.gidm}`),c.dispatch("app/setMatchLiveIndex",1)},L=()=>{if(o.value<0)return clearInterval(r),void h();function e(e){return e<10?"0"+e:e}const a=Math.round(o.value/1e3);let l=parseInt(""+a/3600%24),t=parseInt(""+a/60%60),i=a%60;l=e(l),t=e(t),i=e(i),v.value=l+":"+t+":"+i},M=k([]),V=async()=>{var e;const a=await Y({page:1,pageSize:100,rbType:2}),l=(null==(e=null==a?void 0:a.data)?void 0:e.list)||[];200===a.code&&l.length&&(M.value=l)},E=k([]),F=k(!0),P=k(0),U=k({page:0,pageSize:10}),q=async()=>{var e,a;if(F.value=!0,P.value>0&&U.value.page*U.value.pageSize>=P.value)return!1;U.value.page++,1===U.value.page&&(E.value.length=0);const l=await W(n({},U.value)).finally((()=>{F.value=!1})),t=(null==(e=null==l?void 0:l.data)?void 0:e.videoData)||[];P.value=(null==(a=null==l?void 0:l.data)?void 0:a.total)||0,200===l.code&&t.length&&E.value.push(...t)};return(e,t)=>{const n=T("SvgIcon"),u=T("EmptyData"),c=T("van-list"),r=T("van-collapse-item"),g=T("van-collapse"),b=T("van-tab"),k=T("van-tabs"),L=T("van-pull-refresh"),V=I("img");return _(),w("div",{class:K(["live-page",{"has-bet":B(l)}])},[x(L,{modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=e=>y.value=e),onRefresh:h},{default:S((()=>[x(k,{active:s.value,"onUpdate:active":t[3]||(t[3]=e=>s.value=e),swipeable:"",sticky:"",shrink:"",border:!1,"offset-top":"12.8vw","line-height":"0",onChange:f},{default:S((()=>[(_(!0),w(H,null,$(B(i),((l,i)=>(_(),N(b,{key:i,name:l.type},{title:S((()=>[O("div",Qe,[O("span",null,R(l.title),1)])])),default:S((()=>[x(g,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e)},{default:S((()=>[["SORTVIDEO"].includes(s.value)?j("",!0):(_(),N(r,{key:0,"is-link":!1,class:"collapse-item",name:"HOT"},{title:S((()=>["RB"===l.type?(_(),w("div",Xe,[x(n,{class:"first-icon",name:"home-hot-match"}),O("span",ea,R(e.$t("home.hotMatchTitle")),1),x(n,{class:K(["title-icon",{open:a.value.includes("HOT")}]),name:"home-triangle"},null,8,["class"])])):j("",!0)])),default:S((()=>[0===d.value.length&&o.value>0&&"RB"===s.value?(_(),w("div",aa,[la,O("p",{innerHTML:e.$t("live.nextAM",{num:v.value})},null,8,ta)])):j("",!0),!m.value&&0===d.value.length||0===d.value.length&&o.value<0&&!m.value?(_(),N(u,{key:1})):j("",!0),x(c,{loading:m.value,"onUpdate:loading":t[0]||(t[0]=e=>m.value=e),finished:!m.value},{default:S((()=>[O("div",ia,[(_(!0),w(H,null,$(d.value,(e=>(_(),w("div",{key:e.gidm,class:"flex-item"},[x(ke,{item:e,onClick:a=>C(e)},null,8,["item","onClick"])])))),128))])])),_:1},8,["loading","finished"])])),_:2},1024)),M.value.length?(_(),N(r,{key:1,"is-link":!1,class:"collapse-item",name:"ComingSoon"},{title:S((()=>[O("div",sa,[x(n,{class:"first-icon",name:"home-coming"}),O("span",oa,R(e.$t("home.comingSoonTitle")),1),x(n,{class:K(["title-icon",{open:a.value.includes("ComingSoon")}]),name:"home-triangle"},null,8,["class"])])])),default:S((()=>[O("div",na,[(_(!0),w(H,null,$(M.value,(e=>(_(),w("div",{key:e.gidm,class:"flex-item"},[x(ke,{item:e,onClick:a=>C(e)},null,8,["item","onClick"])])))),128))])])),_:1})):j("",!0),["RB"].includes(s.value)?(_(),N(r,{key:2,"is-link":!1,class:"collapse-item",name:"VIDEO"},{title:S((()=>[O("div",va,[x(n,{class:"first-icon",name:"home-short-video"}),O("span",ua,R(e.$t("home.shortVideoTitle")),1),x(n,{class:K(["title-icon",{open:a.value.includes("VIDEO")}]),name:"home-triangle"},null,8,["class"])])])),default:S((()=>[F.value||E.value.length?(_(),N(c,{key:0,loading:F.value,"onUpdate:loading":t[1]||(t[1]=e=>F.value=e),finished:U.value.page*U.value.pageSize>=P.value&&!F.value,"finished-text":0==E.value.length?"":e.$t("live.noMore"),onLoad:q,class:"list-group"},{default:S((()=>[(_(!0),w(H,null,$(E.value,((e,a)=>(_(),w("div",{class:"group-item-box",key:a,onClick:a=>(e=>{p.push({name:"Svideo",query:{videoId:e.videoId}})})(e)},[D(O("img",{class:"bg",errorImg:B(J),type:"1",alt:""},null,8,ra),[[V,e.videoImg]]),O("div",da,[D(O("img",ma,null,512),[[V,e.leagueIcon]]),O("span",pa,R(e.leagueName||e.leagueNameCn),1)]),O("div",ga,R(e.videoTitle),1)],8,ca)))),128))])),_:2},1032,["loading","finished","finished-text"])):F.value?j("",!0):(_(),N(u,{key:1}))])),_:2},1024)):j("",!0),["SORTVIDEO"].includes(s.value)?(_(),N(Je,{key:3})):j("",!0)])),_:2},1032,["modelValue"])])),_:2},1032,["name"])))),128))])),_:1},8,["active"])])),_:1},8,["modelValue"])],2)}}});ya.__scopeId="data-v-db243b24";export{ya as default};
