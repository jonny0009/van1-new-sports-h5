import{_ as e,a}from"./pitch.63ad02a2.js";import{u as s,P as l,d as t,s as n,j as u,Q as c}from"./index.e62219ef.js";import{s as r,b as i,R as o,d,j as v,r as m,o as p,S as f,q as k,O as g,P as h,V as x,Z as y}from"./vue.144c3097.js";const $={class:"editName"},b={class:"content"},P={class:"edit-name"},N={class:"userName"},I={class:"explain"},j={key:0,class:"noPitch",src:e},O={key:1,class:"noPitch",src:a},V={class:"explain"},Z={key:0,class:"noPitch",src:e},_={key:1,class:"noPitch",src:a},z={class:"explain"},A={key:0,class:"noPitch",src:e},S={key:1,class:"noPitch",src:a};var q=r({setup(e){const a=i((()=>n.state.user.userInfo)),r=o(),q=d(""),w=d(!1),C=d(!1),E=d(!1),{t:Q}=s(),R=d(Q("user.EditNickname")),U=e=>{if(!e)return w.value=!1,C.value=!1,void(E.value=!1);-1!==e.indexOf(" ")?w.value=!1:w.value=!0;if(/^[a-zA-Z0-9]{4,16}$/.test(e)?E.value=!0:E.value=!1,e.indexOf("admin")>0||e.indexOf("test")>0)C.value=!1;else{/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{2,16}$/.test(e)?C.value=!0:C.value=!1}};v((()=>{B()}));const B=async()=>{const e={fPlayerId:a.value.playerId},s=await l(e);if(200!==s.code)return t(s.msg);q.value=s.data.nickName,U(s.data.nickName)};return(e,a)=>{const s=m("van-nav-bar"),l=m("van-field");return p(),f("div",$,[k(s,{class:"bg-title",title:R.value,border:!1},{left:g((()=>[h("span",{onClick:a[0]||(a[0]=e=>{r.back()})},x(e.$t("user.cancellation")),1)])),right:g((()=>[h("span",{onClick:a[1]||(a[1]=e=>(async()=>{if(!E.value||!C.value||!w.value)return t(Q("user.text11"));const e={nickName:q.value,lang:localStorage.getItem("locale")||u()},a=await c(e);if(200!==a.code)return t(a.msg);t(Q("user.EditSuccessfully")),n.dispatch("user/userInfo"),r.push("/user/userInfo")})())},x(e.$t("user.save")),1)])),_:1},8,["title"]),h("div",b,[k(l,{modelValue:q.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>q.value=e),U],class:y([q.value?"bb":""]),name:"",label:"",placeholder:e.$t("user.nickname"),maxlength:"16",clearable:"",rules:[{required:!0,message:e.$t("user.nickname")}]},null,8,["modelValue","class","placeholder","rules"]),h("p",P,x(e.$t("user.fontNickName")),1),h("p",N,x(e.$t("user.text3"))+":",1),h("p",I,[E.value?(p(),f("img",O)):(p(),f("img",j)),h("span",null,x(e.$t("user.font5")),1)]),h("p",V,[C.value?(p(),f("img",_)):(p(),f("img",Z)),h("span",null,x(e.$t("user.font6")),1)]),h("p",z,[w.value?(p(),f("img",S)):(p(),f("img",A)),h("span",null,x(e.$t("user.text6")),1)])])])}}});q.__scopeId="data-v-24c90368";export{q as default};
