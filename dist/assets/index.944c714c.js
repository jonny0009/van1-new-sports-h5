import{s as e,D as a}from"./index.d01fa8c7.js";import{r as s}from"./index.1b498c70.js";import{s as l,b as t,d as o,w as n,e as u,M as r,r as i,o as m,R as d,q as v,O as c,F as p,Z as g,u as h,c as f,_ as T,a1 as y}from"./vue.469c5994.js";const D={class:"homeTime-page"};var Y=l({setup(l){const Y=t((()=>e.state.home.refreshChangeTime)),w=o(""),M=o();n(Y,(e=>{var a;console.log("watch refreshChangeTime refreshChangeTime refreshChangeTime"),e&&(null==(a=M.value)||a.resetParams(),clearTimeout(w.value),w.value=setTimeout((async()=>{await R(),await L()}),100))}));const S=o(!1),b=u({page:1,pageSize:5,gradeType:2,gameType:"FT",startDate:a().format("YYYY-MM-DD")+" 00:00:00",endDate:a().format("YYYY-MM-DD")+" 23:59:59"}),k=u([]),_=o(0),x=(e=!1,a="")=>{a?C.value=!e:S.value=e},L=async(e="")=>{x(!1,e);const a=await s(b);if(x(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:l,total:t}=s;_.value=t;const{pageSize:o,page:n}=b;e?F.value=!(o*n<t):k.length=0,k.push(...l)}},C=o(!1),F=o(!1),H=o(""),j=o(!1),V=()=>{j.value?(console.log("onLoad onLoad onLoad"),F.value||C.value||(C.value=!0,clearTimeout(H.value),H.value=setTimeout((()=>{b.page++,L(!0)}),100))):j.value=!0},z=e=>{S.value=!0,b.gameType=e,F.value=!1,b.page=1,L()},R=()=>{b.page=1,b.gameType="FT"};return r((()=>{L()})),(e,a)=>{const s=i("SportsTabs"),l=i("HomeMatchHandicap"),t=i("HomeEmpty"),o=i("Loading"),n=i("van-list"),u=i("FooterHeight");return m(),d("div",D,[v(s,{ref_key:"refSportsTabs",ref:M,class:"pb10",onReturnSportsSuccess:z},null,512),v(n,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),finished:F.value,"finished-text":e.$t("live.noMore"),onLoad:V},{default:c((()=>[e.isShow?y("",!0):(m(),d(p,{key:0},[S.value?(m(),d(p,{key:0},[(m(!0),d(p,null,g(h(k),((e,a)=>(m(),f(l,{key:a,"send-params":e,class:T({mt20:0!==a})},null,8,["send-params","class"])))),128)),h(k).length?y("",!0):(m(),f(t,{key:0}))],64)):y("",!0),!S.value||C.value?(m(),f(o,{key:1,class:T({"new_loading mt10":C.value})},null,8,["class"])):y("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),v(u)])}}});Y.__scopeId="data-v-29258e2e";export{Y as default};
