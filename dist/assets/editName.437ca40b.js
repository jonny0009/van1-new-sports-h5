import{_ as a,a as e}from"./pitch.9d2e0f02.js";import{D as s,d as l,s as c,F as t}from"./index.4fb7c56f.js";import{s as n,b as u,d as i,j as r,r as o,o as d,R as v,q as m,O as p,P as f,Y as g,V as b,W as h,X as k}from"./vue.85a22cc6.js";const y=a=>(h("data-v-44abac04"),a=a(),k(),a),x={class:"editName"},P={class:"content"},I=y((()=>f("p",{class:"edit-name"},"7天可以修改一次昵称，请认真修改哦!",-1))),N=y((()=>f("p",{class:"userName"},"用户名必须:",-1))),j={class:"explain"},O={key:0,class:"noPitch",src:a},V={key:1,class:"noPitch",src:e},_=y((()=>f("span",null,"4个字符 (最多16个)",-1))),z={class:"explain"},A={key:0,class:"noPitch",src:a},Z={key:1,class:"noPitch",src:e},q=y((()=>f("span",null,"1个字母和1个数字(不能包含特殊字符)",-1))),w={class:"explain"},C={key:0,class:"noPitch",src:a},$={key:1,class:"noPitch",src:e},D=y((()=>f("span",null,"不能有空格",-1)));var F=n({setup(a){const e=u((()=>c.state.user.userInfo)),n=b(),h=i(""),k=i(!1),y=i(!1),F=i(!1),R=i("编辑昵称"),S=a=>{if(!a)return k.value=!1,y.value=!1,void(F.value=!1);-1!==a.indexOf(" ")?k.value=!1:k.value=!0;if(/^[a-zA-Z0-9]{4,16}$/.test(a)?F.value=!0:F.value=!1,a.indexOf("admin")>0||a.indexOf("test")>0)y.value=!1;else{/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{2,16}$/.test(a)?y.value=!0:y.value=!1}};r((()=>{U()}));const U=async()=>{const a={fPlayerId:e.value.playerId},c=await s(a);if(200!==c.code)return l(c.msg);h.value=c.data.nickName,S(c.data.nickName)};return(a,e)=>{const s=o("van-nav-bar"),u=o("van-field");return d(),v("div",x,[m(s,{class:"bg-title",title:R.value,border:!1},{left:p((()=>[f("span",{onClick:e[0]||(e[0]=a=>{n.back()})},"取消")])),right:p((()=>[f("span",{onClick:e[1]||(e[1]=a=>(async()=>{if(!F.value||!F.value||!F.value)return l("请按规则修改");const a={nickName:h.value,lang:localStorage.getItem("locale")},e=await t(a);if(200!==e.code)return l(e.msg);l("编辑成功"),c.dispatch("user/userInfo"),n.push("/user/userInfo")})())},"保存")])),_:1},8,["title"]),f("div",P,[m(u,{modelValue:h.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>h.value=a),S],class:g([h.value?"bb":""]),name:"",label:"",placeholder:"输入昵称",maxlength:"16",clearable:"",rules:[{required:!0,message:"请输入昵称"}]},null,8,["modelValue","class"]),I,N,f("p",j,[F.value?(d(),v("img",V)):(d(),v("img",O)),_]),f("p",z,[y.value?(d(),v("img",Z)):(d(),v("img",A)),q]),f("p",w,[k.value?(d(),v("img",$)):(d(),v("img",C)),D])])])}}});F.__scopeId="data-v-44abac04";export{F as default};
