import{_ as a,a as e}from"./pitch.2177043e.js";import{E as s,d as l,s as t,G as n}from"./index.f7b9dba8.js";import{s as c,b as u,d as r,j as i,r as o,o as d,R as v,q as m,O as p,P as f,S as g,Y as k,V as h}from"./vue.85a22cc6.js";const b={class:"editName"},x={class:"content"},$={class:"edit-name"},y={class:"userName"},P={class:"explain"},I={key:0,class:"noPitch",src:a},N={key:1,class:"noPitch",src:e},j={class:"explain"},O={key:0,class:"noPitch",src:a},V={key:1,class:"noPitch",src:e},_={class:"explain"},z={key:0,class:"noPitch",src:a},A={key:1,class:"noPitch",src:e};var Z=c({setup(a){const e=u((()=>t.state.user.userInfo)),c=h(),Z=r(""),q=r(!1),w=r(!1),C=r(!1),S=r("编辑昵称"),E=a=>{if(!a)return q.value=!1,w.value=!1,void(C.value=!1);-1!==a.indexOf(" ")?q.value=!1:q.value=!0;if(/^[a-zA-Z0-9]{4,16}$/.test(a)?C.value=!0:C.value=!1,a.indexOf("admin")>0||a.indexOf("test")>0)w.value=!1;else{/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{2,16}$/.test(a)?w.value=!0:w.value=!1}};i((()=>{G()}));const G=async()=>{const a={fPlayerId:e.value.playerId},t=await s(a);if(200!==t.code)return l(t.msg);Z.value=t.data.nickName,E(t.data.nickName)};return(a,e)=>{const s=o("van-nav-bar"),u=o("van-field");return d(),v("div",b,[m(s,{class:"bg-title",title:S.value,border:!1},{left:p((()=>[f("span",{onClick:e[0]||(e[0]=a=>{c.back()})},g(a.$t("user.cancellation")),1)])),right:p((()=>[f("span",{onClick:e[1]||(e[1]=a=>(async()=>{if(!C.value||!C.value||!C.value)return l("请按规则修改");const a={nickName:Z.value,lang:localStorage.getItem("locale")},e=await n(a);if(200!==e.code)return l(e.msg);l("编辑成功"),t.dispatch("user/userInfo"),c.push("/user/userInfo")})())},g(a.$t("user.save")),1)])),_:1},8,["title"]),f("div",x,[m(u,{modelValue:Z.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>Z.value=a),E],class:k([Z.value?"bb":""]),name:"",label:"",placeholder:a.$t("user.nickname"),maxlength:"16",clearable:"",rules:[{required:!0,message:a.$t("user.nickname")}]},null,8,["modelValue","class","placeholder","rules"]),f("p",$,g(a.$t("user.font7")),1),f("p",y,g(a.$t("user.text3"))+":",1),f("p",P,[C.value?(d(),v("img",N)):(d(),v("img",I)),f("span",null,g(a.$t("user.font5")),1)]),f("p",j,[w.value?(d(),v("img",V)):(d(),v("img",O)),f("span",null,g(a.$t("user.font6")),1)]),f("p",_,[q.value?(d(),v("img",A)):(d(),v("img",z)),f("span",null,g(a.$t("user.text6")),1)])])])}}});Z.__scopeId="data-v-169c3e0b";export{Z as default};
