var a=Object.defineProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(e,t,l)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;import{s as i,w as n,a4 as o,W as r,d as c,a as m,o as u,R as v,P as d,U as p,a1 as g,X as y,Y as h,n as f,b,r as _,E as w,q as I,u as j,x as k,V as P,e as T,M as x,y as M,c as N,_ as O,F as S,Z as E,O as D,$ as H}from"./vue.469c5994.js";import{s as L,I as C,K as F,u as R}from"./index.f54c84f2.js";import{m as $,e as B}from"./index.139d4824.js";/* empty css                     */import{v as K}from"./video.es.28d75c9b.js";import{u as W}from"./useMatch.0105bb78.js";const G={class:"match-video"},U={key:0,class:"mask-loading"},q=(a=>(y("data-v-39951a5b"),a=a(),h(),a))((()=>d("div",{class:"icon"},null,-1))),A={class:"text"};var V=i({props:{url:String},emits:["on-error"],setup(a,{emit:e}){const t=a;n((()=>t.url),(a=>{l(a)}));const l=a=>{y?(null==y||y.src(a),null==y||y.load(),null==y||y.play()):w(a)},s=o(),i=r();let y=null;const h=c(""),b=c(!1),_=c(!1),w=a=>{const t={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,loadingSpinner:!1,errorDisplay:!1,sources:[{src:a,type:"application/x-mpegURL"}]};f((()=>{y=K(h.value,t,(()=>{y.log("onPlayerReady");document.pictureInPictureElement&&y.exitPictureInPicture().then((()=>{y.log("画中画模式已关闭")}))})),y.on("waiting",(()=>{b.value=!0})),y.on("playing",(()=>{b.value=!1})),y.on("error",(a=>{b.value=!1,e("on-error",a)})),y.on("enterpictureinpicture",(()=>{_.value=!0,L.commit("match/SET_PIP_GIDM",s.params.id)})),y.on("leavepictureinpicture",(()=>{if(_.value=!1,"MatchDetail"!==s.name){const a=L.state.app.pictureinpictureGidm;i.push(`/match/${a}/bets`)}}))}))};return m((()=>{_.value||(y&&y.dispose(),y=null)})),(a,e)=>(u(),v("div",G,[d("video",{ref_key:"videoRef",ref:h,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512),b.value?(u(),v("div",U,[q,d("div",A,p(a.$t("live.effLoading"))+"...",1)])):g("",!0)]))}});V.__scopeId="data-v-39951a5b";const X={class:"team"},Y={class:"team-header"},Z={class:"league"},z={class:"date"},J={class:"team-container"},Q={class:"team-player host"},aa={class:"img-num"},ea={type:4,alt:""},ta={class:"team-score"},la=["innerHTML"],sa={class:"team-player away"},ia={class:"img-num"},na={type:5,alt:""};var oa=i({setup(a){const e=W(),t=b((()=>L.state.match.matchInfo)),l=b((()=>"BK"==t.value.gameType?C+"FE/common/live/img_video_bg_BK.jpg":C+"FE/common/live/img_video_bg_FT.jpg"));return(a,s)=>{const i=_("SvgIcon"),n=w("img");return u(),v("div",{class:"match-game",style:P({backgroundImage:"url("+j(l)+")"})},[d("div",X,[d("div",Y,[d("div",Z,[I(i,{name:"live-football"}),d("span",null,p(j(t).leagueName),1)]),d("div",z,p(j(F)(j(t).gameDate,"MM-DD HH:mm")),1)]),d("div",J,[d("div",Q,[d("div",aa,[k(d("img",ea,null,512),[[n,j(t).homeLogo]]),d("span",null,p(j(e).getScore(j(t),"H")),1)]),d("strong",null,p(j(t).homeTeam),1)]),d("div",ta,[d("span",{class:"default",innerHTML:j(e).showRBTime(j(t))},null,8,la)]),d("div",sa,[d("div",ia,[d("span",null,p(j(e).getScore(j(t),"C")),1),k(d("img",na,null,512),[[n,j(t).awayLogo]])]),d("strong",null,p(j(t).awayTeam),1)])])])],4)}}});oa.__scopeId="data-v-860c480c";const ra={class:"detail"},ca={class:"main"},ma={class:"main-menu"},ua=["onClick"],va={class:"label"},da={class:"main-view"},pa=(a=>(y("data-v-51ddc85f"),a=a(),h(),a))((()=>d("div",{class:"main-chat"},[d("div",{class:"holder"},"点击开启聊天室")],-1)));var ga=i({setup(a){const i=(a,e)=>(a.type.name||(a.type.name=e.name),a),{t:m}=R(),y=o(),h=r(),f=b((()=>y.params.id+"")),w=T([{title:m("live.bet"),iconName:"live-bet",path:"bets"},{title:m("live.betWith"),iconName:"live-bet_add",path:"with"},{title:"串关",iconName:"live-grid",path:"mixs"},{title:"数据",iconName:"live-data",path:"data"},{title:m("live.more"),iconName:"live-grid",path:"more"}]),P=c({}),C=async()=>{const a=f.value,i=(await $({gidm:a})).data||{};if(P.value=((a,i)=>{for(var n in i||(i={}))t.call(i,n)&&s(a,n,i[n]);if(e)for(var n of e(i))l.call(i,n)&&s(a,n,i[n]);return a})({},i),i.detail&&i.detail.length>0){const{game:a}=i.detail[0],e=a.gameInfo||{};P.value.gameInfo=e}L.commit("match/SET_MATCH_INFO",P.value)},F=c(""),K=c(!1),W=async()=>{const a=f.value,e=await B({gidm:a});if(200==e.code){const{streamNa:a}=e.data||{},{liveali:t}=a||{};F.value=(t||{}).m3u8,K.value=!1}else F.value="",K.value=!0},G=()=>{K.value=!0};return x((()=>{C(),W()})),n((()=>f.value),(()=>{C(),W()})),(a,e)=>{const t=_("SvgIcon"),l=_("router-view");return u(),v("div",ra,[d("div",{class:O(["match",{"no-video":K.value}])},[k(I(V,{url:F.value,onOnError:G},null,8,["url"]),[[M,!K.value]]),K.value?(u(),N(oa,{key:0})):g("",!0)],2),d("div",ca,[d("div",ma,[(u(!0),v(S,null,E(j(w),((a,e)=>(u(),v("div",{class:O(["nav",{selected:j(y).path.endsWith(a.path)}]),key:e,onClick:e=>{return t=a.path,void h.replace(`/match/${f.value}/${t}`);var t}},[I(t,{name:a.iconName},null,8,["name"]),d("span",va,p(a.title),1)],10,ua)))),128))]),d("div",da,[I(l,null,{default:D((({Component:a,route:e})=>[(u(),N(H(i(a,e)),{key:e.key}))])),_:1})]),pa])])}}});ga.__scopeId="data-v-51ddc85f";export{ga as default};
