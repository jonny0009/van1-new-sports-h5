import{s as a,I as e,T as t,u as l,$ as s}from"./index.108d035e.js";import{s as i,b as n,d as o,w as c,a2 as m,R as u,a as r,o as v,S as d,P as p,V as g,a0 as h,X as y,Y as _,n as f,r as T,E as I,q as w,u as E,x as b,W as k,a7 as S,e as N,M as D,y as j,c as x,_ as M,F as R,Z as P,O as C,$ as O}from"./vue.6c3ce548.js";import{m as B,e as L}from"./index.1d028a10.js";/* empty css                     */import{v as $}from"./video.es.f6534b2d.js";import{u as F}from"./useMatch.8369de4f.js";const H={class:"match-video"},U=["src"],A={key:2,class:"mask-loading"},G=(a=>(y("data-v-2a906c70"),a=a(),_(),a))((()=>p("div",{class:"icon"},null,-1))),K={class:"text"};var V=i({props:{url:String},emits:["on-error"],setup(e,{emit:t}){const l=e,s=n((()=>a.state.match.turnSound)),i=o("");c((()=>l.url),(a=>{E.value=!0,a?y(a):t("on-error","没有播放链接")}));const y=a=>{if(i.value="",a.indexOf(".html")>-1)return i.value=a,void S();I?(I?.src(a),I?.load(),I?.play(),S()):k(a)},_=m(),T=u();let I=null;const w=o(""),E=o(!0),b=o(!1),k=e=>{const l={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:e,type:"application/x-mpegURL"}]};s.value?l.muted=!1:l.muted=!0,f((()=>{I=$(w.value,l,(()=>{I.log("onPlayerReady");document.pictureInPictureElement&&I.exitPictureInPicture().then((()=>{I.log("画中画模式已关闭")}))})),I.on("waiting",(()=>{console.log("waiting",(new Date).getTime())})),I.on("volumechange",(e=>{console.log("监听音量",e),s.value?a.commit("match/SET_TURN_SOUND",!0):a.commit("match/SET_TURN_SOUND",!1)})),I.on("playing",(()=>{console.log("playing",(new Date).getTime()),E.value=!1})),I.on("error",(a=>{E.value=!1,t("on-error",a)})),I.on("enterpictureinpicture",(()=>{b.value=!0,a.commit("match/SET_PIP_GIDM",_.params.id)})),I.on("leavepictureinpicture",(()=>{if(b.value=!1,"MatchDetail"!==_.name){const e=a.state.app.pictureinpictureGidm;T.push(`/match/${e}/bets`)}}))}))},S=()=>{f((()=>{E.value=!1}))};return r((()=>{b.value||(I&&I.dispose(),I=null)})),(a,e)=>(v(),d("div",H,[i.value&&!E.value?(v(),d("iframe",{key:0,src:i.value,style:{width:"100%",height:"100%"},frameborder:"0"},null,8,U)):(v(),d("video",{key:1,ref_key:"videoRef",ref:w,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512)),E.value?(v(),d("div",A,[G,p("div",K,g(a.$t("live.effLoading"))+"...",1)])):h("",!0)]))}});V.__scopeId="data-v-2a906c70";const W={class:"team"},q={class:"team-header"},X={class:"league"},Y={class:"date"},Z={class:"team-container"},z={class:"team-player host"},J={class:"img-num"},Q={type:4,alt:""},aa={class:"team-score"},ea=["innerHTML"],ta={class:"team-player away"},la={class:"img-num"},sa={type:5,alt:""};var ia=i({setup(l){const s=F(),i=n((()=>a.state.match.matchInfo)),o=n((()=>"BK"==i.value.gameType?e+"FE/common/live/img_video_bg_BK.jpg":e+"FE/common/live/img_video_bg_FT.jpg"));return(a,e)=>{const l=T("SvgIcon"),n=I("img");return v(),d("div",{class:"match-game",style:k({backgroundImage:"url("+E(o)+")"})},[p("div",W,[p("div",q,[p("div",X,[w(l,{name:"live-football"}),p("span",null,g(E(i).leagueName),1)]),p("div",Y,g(E(t)(E(i).gameDate,"MM-DD HH:mm")),1)]),p("div",Z,[p("div",z,[p("div",J,[b(p("img",Q,null,512),[[n,E(i).homeLogo]]),p("span",null,g(E(s).getScore(E(i),"H")),1)]),p("strong",null,g(E(i).homeTeam),1)]),p("div",aa,[p("span",{class:"default",innerHTML:E(s).showRBTime(E(i))},null,8,ea)]),p("div",ta,[p("div",la,[p("span",null,g(E(s).getScore(E(i),"C")),1),b(p("img",sa,null,512),[[n,E(i).awayLogo]])]),p("strong",null,g(E(i).awayTeam),1)])])])],4)}}});ia.__scopeId="data-v-22864e70";const na={class:"main"},oa={class:"main-menu"},ca=["onClick"],ma={class:"label"},ua={class:"main-view"},ra={class:"main-chat"};var va=i({setup(e){const t=S((()=>s((()=>import("./ChatRoom.b122eeb1.js")),["/assets/ChatRoom.b122eeb1.js","/assets/ChatRoom.7b4b01d0.css","/assets/websocket.d9ae6c20.js","/assets/index.108d035e.js","/assets/index.f864214e.css","/assets/vue.6c3ce548.js","/assets/index.1d028a10.js"]))),i=(a,e)=>(a.type.name||(a.type.name=e.name),a),{t:y}=l(),_=m(),f=u(),I=n((()=>a.state.app.showFixedBet)),k=n((()=>_.params.id)),$=N([{title:y("live.bet"),iconName:"live-bet",path:"bets"},{title:y("live.stackBet"),iconName:"live-stack",path:"mixs"},{title:y("live.dataBase"),iconName:"live-data",path:"data"},{title:y("live.more"),iconName:"live-grid",path:"other"}]),F=o({}),H=async()=>{const e=k.value,t=(await B({gidm:e})).data||{};if(F.value={...t},t.detail&&t.detail.length>0){const{game:a}=t.detail[0],e=a.gameInfo||{};F.value.gameInfo=e}a.commit("match/SET_MATCH_INFO",F.value)},U=o(""),A=o(!1),G=async()=>{const a=k.value,e=await L({gidm:a});if(200===e.code){const{streamNa:a}=e.data||{},{liveali:t}=a||{};U.value=(t||{}).m3u8,A.value=!1}else U.value="",A.value=!0},K=()=>{A.value=!0},W=o(!1);let q=null;const X=()=>{q&&(clearInterval(q),q=null,a.commit("match/SET_NEED_TIMER",!1))};return D((()=>{H(),G(),X(),q=setInterval((()=>{H(),a.commit("match/SET_NEED_TIMER",!0)}),5e3)})),r((()=>{X()})),c((()=>k.value),(()=>{H(),G()})),(a,e)=>{const l=T("SvgIcon"),s=T("router-view");return v(),d("div",{class:M(["detail",{"has-bet":E(I)}])},[p("div",{class:M(["match",{"no-video":A.value}])},[b(w(V,{url:U.value,onOnError:K},null,8,["url"]),[[j,!A.value]]),A.value?(v(),x(ia,{key:0})):h("",!0)],2),p("div",na,[p("div",oa,[(v(!0),d(R,null,P(E($),((a,e)=>(v(),d("div",{key:e,class:M(["nav",{selected:E(_).path.endsWith(a.path)}]),onClick:e=>{return t=a.path,void f.replace(`/match/${k.value}/${t}`);var t}},[w(l,{name:a.iconName},null,8,["name"]),p("span",ma,g(a.title),1)],10,ca)))),128))]),p("div",ua,[w(s,null,{default:C((({Component:a,route:e})=>[(v(),x(O(i(a,e)),{key:"matchId"}))])),_:1})]),p("div",ra,[p("div",{class:"holder",onClick:e[0]||(e[0]=a=>W.value=!0)},g(a.$t("live.clickOpenChat")),1)])]),w(E(t),{show:W.value,"onUpdate:show":e[1]||(e[1]=a=>W.value=a),class:M({video:!A.value})},null,8,["show","class"])],2)}}});va.__scopeId="data-v-0e20c460";export{va as default};
