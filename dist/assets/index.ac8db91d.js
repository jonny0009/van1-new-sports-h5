import{_ as e}from"./index.0e8570a8.js";import{s as a,b as s,d as t,r as i,E as n,o as l,S as o,c,O as r,P as m,q as u,_ as d,u as v,V as p,a0 as h,x as f,y,X as g,Y as _,w as T,M as b,n as w,f as k,U as x,W as S,F as H,Z as R,g as I,h as P}from"./vue.6c3ce548.js";import{g as O,o as $,b as B,t as N,u as M}from"./useMatch.8369de4f.js";import{u as C,s as j,n as Q,a0 as U,a1 as V,Q as L,m as E}from"./index.108d035e.js";import{_ as K,d as q,e as D}from"./index.8b4c34f0.js";import{v as z}from"./video.es.f6534b2d.js";import{a as F,e as A}from"./index.1d028a10.js";const W=e=>(g("data-v-8bf1776e"),e=e(),_(),e),Y=["data-val"],J={class:"home-tabs-play"},X={class:"play"},Z=W((()=>m("div",{class:"flex-1"},null,-1))),G={class:"home-match"},ee={class:"up-match-group__body"},ae={class:"up-match"},se={class:"match-info-live__header border-bottom"},te=[W((()=>m("i",{v:"",class:"iconfont icon-footer-live"},null,-1)))],ie={class:"up-match-league"},ne={class:"text"},le={class:"flex-cross-center"},oe={class:"up-match-time"},ce=["innerHTML"],re={class:"up-match-score border-bottom"},me={class:"item mb5"},ue={type:4,class:"my-image img",style:{"object-fit":"contain"},alt:""},de={class:"name"},ve={class:"container"},pe={class:"value"},he={class:"item"},fe={class:"my-image img",type:5,style:{"object-fit":"contain"},alt:""},ye={class:"name"},ge={class:"container"},_e={class:"value"},Te={class:"up-match__body"},be={key:0,class:"match-betting-item"},we={class:"match-betting-item__title"},ke={class:"flex-cross-center"},xe={key:0},Se={key:1},He={class:"match-betting-item__content"},Re={class:"betting-select"},Ie={class:"betting-select__list"},Pe={key:1,class:"match-betting-item"},Oe={class:"match-betting-item__title"},$e={class:"flex-cross-center"},Be={key:0},Ne={key:1},Me={class:"match-betting-item__content"},Ce={class:"betting-select"},je={class:"betting-select__list"},Qe={key:2,class:"match-betting-item"},Ue={class:"match-betting-item__title"},Ve={class:"flex-cross-center"},Le={key:0},Ee={key:1},Ke={class:"match-betting-item__content"},qe={class:"betting-select"},De={class:"betting-select__list"},ze={class:"up-match__footer"},Fe={class:"match-footer"};var Ae=a({props:{sendParams:{type:Object,default:function(){return{}}},tabType:{type:String,default:""},playTitleToggle:{type:Boolean,default:function(){return!0}}},setup(e){const a=e,{t:g}=C(),_=s((()=>j.state.home.RrefShow)),T=()=>{j.dispatch("home/setKeyValue",{key:"RrefShow",value:!_.value})},b=s((()=>j.state.home.OUrefShow)),w=()=>{j.dispatch("home/setKeyValue",{key:"OUrefShow",value:!b.value})},k=s((()=>j.state.home.MrefShow)),x=()=>{j.dispatch("home/setKeyValue",{key:"MrefShow",value:!k.value})},S=t(null),H=s((()=>{const e=j.state.app.globalBarHeaderHeight||48;return e>60?48:e})),R={0:"",Q1:g("live.Q1"),Q2:g("live.Q2"),Q3:g("live.Q3"),Q4:g("live.Q4"),"1h":g("live.Q1"),"2h":g("live.Q2"),"3h":g("live.Q3"),"4h":g("live.Q4"),OT:g("live.OT"),HT:g("live.HT"),H1:g("live.H1"),H2:g("live.H2"),q1:g("live.Q1"),q2:g("live.Q2"),q3:g("live.Q3"),q4:g("live.Q4"),ot:g("live.OT"),ht:g("live.HT"),h1:g("live.H1"),h2:g("live.H2")},I=e=>{const a=e.toLowerCase();return R[a]},P=t(""),M=(e={})=>{const{showtype:a,gameType:s,gameInfo:t,showType:i,homeTeamSuffix:n,gidm:l}=e,o=$(t,5),c=t&&t.se_now;if("RB"===a||"RB"===i){switch(s){case"FT":if(!t)return g("home.img");if((n?.includes("点球")||n?.includes("點球"))&&(t.raceType="dianqiu",t.teamSuffix=g("home.PenaltyKickWar")),(n?.includes("加时赛")||n?.includes("加時賽"))&&(t.raceType="jiashi",t.teamSuffix=g("live.OT")),t.raceType){if("jiashi"===t?.raceType&&("HT^^"===t?.re_time||"HT"===t?.re_time))return g("live.HT");if("jiashi"===t?.raceType&&t?.re_time&&new RegExp("LIVE").test(t?.re_time))return g("live.pause");if("jiashi"===t?.raceType&&t?.re_time.indexOf("^")>-1){const[e,a]=t.re_time.split("^"),s="1H"===e?`上${a}`:`下${a}`;return`${t.teamSuffix}<span class='time-h-number'>${s}</span>`}}if("HT^^"===t?.re_time||"HT"===t?.re_time)return g("live.HT");if(t?.re_time&&new RegExp("LIVE").test(t?.re_time))return g("live.pause");if(t?.re_time&&t?.re_time.indexOf("^")>-1){const[e,a]=t.re_time.split("^");let s="";if(a.indexOf("'")>-1){const[e]=a.split("'");s=`${e}<span class="time-h-dot">'</span>`}else s=a;return g("1H"===e?"home.HNumber1":"home.HNumber2",{number:s})}return t?.re_time?t.re_time:g("live.pause");case"TN":if(t){const e=N(t);if(e?.sciwd)return g("live.pause");const{panNum:a,score1:s,score2:i}=e;return`${a}<span>${s}${i}</span>`}return g("home.img");case"BS":if(t){if(l&&l.indexOf("ic")>-1)return g("home.img");const e=t?B(t):"",a=t.inningNum?t?.inningNum:e.se_now>0?e.se_now:e.score.num;return g("home.set",{number:a})}return g("home.img");case"BK":return"HT"===t?.se_now||"ht"===t?.se_now?g("live.HT"):t?.se_now.indexOf("OT")>-1||t?.se_now.indexOf("ot")>-1?g("home.addTimeNumber",{number:L(1e3*P.value,"mm:ss")}):c&&P?`${I(t?.se_now)}<span>${L(1e3*P.value,"mm:ss")}</span>`:!P.value&&c?`${I(t.se_now)}<span>00:00</span>`:"";case"BK_AFT":if(t){if("HT"===t?.se_now||"ht"===t?.se_now)return g("live.HT");if(t?.se_now.indexOf("OT")>-1||t?.se_now.indexOf("ot")>-1)return g("home.addTimeNumber",{number:L(1e3*t.t_count,"mm:ss")});const e=t&&t.se_now,a=t&&+t.t_count;return e&&a?`${I(t.se_now)}<span>${L(1e3*t.t_count,"mm:ss")}</span>`:""}return g("home.img");case"OP_TN":if(t){const e=t?.se_now.replace(/[^0-9]/gi,"")||"";return g("home.set",{number:e})}return g("home.img");case"OP_VB":return o?g("home.set",{number:o.scorePan.num}):"";case"OP_DJ":case"OP_IH":return g("home.img")}return g("home.img")}return g("home.img")},K=({leagueShortName:e,leagueName:a})=>e&&a?`${e||a}`:"",q=e=>{const{live:a,merchantAnchor:s,merchantStreamNa:t}=e;return!!(1*a!=1||s&&s?.length&&t&&t?.length)},D=()=>{j.dispatch("betting/setMoreShow",{status:!0,moreParams:a.sendParams}),j.dispatch("user/getLocationHeight",!1)};return(s,t)=>{const g=i("van-sticky"),R=i("SportsIcon"),I=i("van-icon"),P=n("img");return l(),o("div",{ref_key:"container",ref:S,class:"homeMatchHandicap","data-val":v(H)},[e.playTitleToggle?(l(),c(g,{key:0,"offset-top":v(H),container:S.value,"z-index":"5"},{default:r((()=>[m("div",J,[u(Q,{"time-send-params":e.sendParams},null,8,["time-send-params"]),m("div",X,[Z,m("span",{class:d(["btn R",[{active:v(_)}]]),onClick:T},p(s.$t("home.R")),3),m("span",{class:d(["btn OU",[{active:v(b)}]]),onClick:w},p(s.$t("home.OU")),3),m("span",{class:d(["btn M",[{active:v(k)}]]),onClick:x},p(s.$t("home.M")),3)])])])),_:1},8,["offset-top","container"])):h("",!0),m("div",G,[m("div",ee,[m("div",ae,[m("div",se,[q(e.sendParams)?(l(),o("div",{key:0,class:"live-icon",onClick:t[0]||(t[0]=a=>{return s=e.sendParams,void E.push(`/match/${s.gidm}/bets`);var s})},te)):h("",!0),m("div",ie,[u(R,{"icon-src":a.sendParams.gameType,class:"ball-img"},null,8,["icon-src"]),m("div",ne,p(K(e.sendParams)),1)]),m("div",le,[m("div",oe,[f(u(R,{"icon-src":"sportlive",class:"live-img"},null,512),[[y,q(e.sendParams)]]),m("div",{class:d(["up-match-time-html",e.sendParams.gameType]),innerHTML:M(e.sendParams)},null,10,ce)])])]),m("div",re,[m("div",me,[f(m("img",ue,null,512),[[P,e.sendParams.homeLogo]]),m("div",de,p(e.sendParams.homeTeamAbbr||e.sendParams.homeTeam),1),m("div",ve,[m("div",pe,p(v(O)(e.sendParams,"H")),1)])]),m("div",he,[f(m("img",fe,null,512),[[P,e.sendParams.awayLogo]]),m("div",ye,p(e.sendParams.awayTeamAbbr||e.sendParams.awayTeam),1),m("div",ge,[m("div",_e,p(v(O)(e.sendParams,"C")),1)])])]),m("div",Te,[v(_)&&e.sendParams.RE?(l(),o("div",be,[m("div",we,[m("div",ke,["RB"===e.tabType?(l(),o("span",xe,p(s.$t("home.RBInfo")),1)):(l(),o("span",Se,p(s.$t("home.RInfo")),1))])]),m("div",He,[m("div",Re,[m("div",Ie,[u(V,{"send-params":v(U)("RE",e.sendParams),type:"RB"},null,8,["send-params"])])])])])):h("",!0),v(b)&&e.sendParams.ROU?(l(),o("div",Pe,[m("div",Oe,[m("div",$e,["RB"===e.tabType?(l(),o("span",Be,p(s.$t("home.RBSize")),1)):(l(),o("span",Ne,p(s.$t("home.OUInfo")),1))])]),m("div",Me,[m("div",Ce,[m("div",je,[u(V,{"send-params":v(U)("ROU",e.sendParams),type:"RB"},null,8,["send-params"])])])])])):h("",!0),v(k)&&e.sendParams.RM?(l(),o("div",Qe,[m("div",Ue,[m("div",Ve,["RB"===e.tabType?(l(),o("span",Le,p(s.$t("home.RBRide")),1)):(l(),o("span",Ee,p(s.$t("home.MInfo")),1))])]),m("div",Ke,[m("div",qe,[m("div",De,[u(V,{"send-params":v(U)("RM",e.sendParams),type:"RB"},null,8,["send-params"])])])])])):h("",!0)])])]),m("div",ze,[m("div",Fe,[m("div",{class:"match-footer__item",onClick:D},[m("span",null,p(s.$t("home.morePlay")),1),u(I,{class:"arrow",name:"arrow"})])])])])],8,Y)}}});Ae.__scopeId="data-v-8bf1776e";const We=e=>(g("data-v-70274a2a"),e=e(),_(),e),Ye={class:"video-box-wrap"},Je=We((()=>m("video",{id:"VideoRef",style:{"object-fit":"fill"},class:"video-js vjs-default-skin",playsinline:"true",controls:"",preload:"metadata"},null,-1))),Xe={key:0,class:"video-error"},Ze=We((()=>m("span",{class:"video-icon"},null,-1))),Ge=We((()=>m("div",{class:"error-tips"},"视频加载失败，请刷新重试",-1))),ea=["onClick"];var aa=a({props:{liveUrl:{type:String,default:""},controls:{type:Boolean,default:!0}},emits:["refresh","touchVideo"],setup(e,{expose:a,emit:n}){const c=e,r=s((()=>j.state.match.turnSound)),v=t(null),p=t(!1),f=t(!0);T(r,((e,a)=>{console.log(`turnSound发生变化，新值为：${e}，旧值为：${a}`),e?(v.value.muted(!1),f.value=!1):(v.value.muted(!0),f.value=!0)}));const y=t(),g=()=>{try{v.value.dispose&&v.value.dispose()}catch(e){}},_=()=>{if(!document.querySelector("#VideoRef"))return!1;v.value.muted()?j.commit("match/SET_TURN_SOUND",!1):j.commit("match/SET_TURN_SOUND",!0)},S=()=>{n("refresh")};a({refresh:S,touchVideo:()=>{n("touchVideo")}});const H=t(!0);return b((()=>{w((()=>{clearTimeout(y.value),y.value=setTimeout((()=>{p.value=!1;const e=document.querySelector("#VideoRef");if(e&&c.liveUrl)try{v.value=z("VideoRef",{muted:!0,controls:c.controls,width:"100%",height:"100%",loop:!0,autoplay:!0,sources:[{src:c.liveUrl,type:"application/x-mpegURL"}]},(()=>{try{e.muted=!0,e.play(),v.value.on("error",(()=>{p.value=!0,g()}))}catch(a){console.error(a)}}))}catch(a){console.error("视频异常！"),console.error(a)}}),500),setTimeout((()=>{H.value=!1}),2e3)}))})),k((()=>{g()})),(e,a)=>{const s=i("van-loading");return l(),o("div",Ye,[Je,p.value?(l(),o("div",Xe,[Ze,Ge,m("div",{class:"error-btn",onClick:S},"刷新视频")])):h("",!0),m("div",{class:d(["pop",{popBg:H.value}])},[u(s,{class:"popBg-loading"})],2),m("div",{class:d(["sound-icon",{muted:f.value}]),onClick:x(_,["stop"])},null,10,ea)])}}});aa.__scopeId="data-v-70274a2a";const sa={class:"video-footer"},ta={class:"leagueName text-overflow"},ia=(e=>(g("data-v-6091e662"),e=e(),_(),e))((()=>m("div",{class:"flex-1"},null,-1))),na=["innerHTML"];var la=a({props:{liveInfo:{type:Object,default:()=>{}},matchIndex:{type:Number,default:0},activeIndex:{type:Number,default:0}},setup(e){const a=e,n=M(),r=s((()=>"/assets/ft.7964dceb.jpg"));T((()=>a.activeIndex),(()=>{a.activeIndex===a.matchIndex?f():d.value=!1}));const d=t(!1),f=()=>{d.value=!1,w((()=>{d.value=!0}))};return b((()=>{a.activeIndex===a.matchIndex?f():d.value=!1})),(a,s)=>{const t=i("SportsIcon");return l(),o("div",{class:"match-item-wrap",style:S({backgroundImage:`url(${v(r)})`})},[d.value?(l(),c(v(aa),{key:0,"live-url":e.liveInfo.m3u8||e.liveInfo.url,controls:!1,onRefresh:f},null,8,["live-url"])):h("",!0),m("div",sa,[u(t,{class:"SportsIcon","icon-src":e.liveInfo.gameType},null,8,["icon-src"]),m("div",ta,p(e.liveInfo.leagueShortName||e.liveInfo.leagueName),1),ia,m("div",{class:"time",innerHTML:v(n).showRBTime(e.liveInfo)},null,8,na)])],4)}}});la.__scopeId="data-v-6091e662";const oa={key:0,class:"swipeLive"},ca={class:"wrap"};var ra=a({setup(e){const a=t(0),s=t([]),n=e=>{a.value=e};return b((()=>{s.value.length=0,(async()=>{const e=await F({page:1,pageSize:5,rbType:1});if(200===e.code){const a=e?.data?.list||[];s.value.length=0,await a.map((async e=>{const a={gidm:e.gidm},t=await A(a);if(200===t.code){const{streamNa:a}=t.data,{liveali:s}=a||{},{m3u8:i}=s||{};e.m3u8=e.m3u8||i,e.streamNa=a}s.value.push(e)}))}})()})),(e,t)=>{const d=i("van-swipe-item"),v=i("van-swipe");return s.value.length?(l(),o("div",oa,[u(v,{class:"my-swipe","indicator-color":"white",onChange:n},{default:r((()=>[(l(!0),o(H,null,R(s.value,((e,s)=>(l(),c(d,{key:s,onClick:a=>(e=>{if(!e)return;const{gidm:a}=e,s={name:"MatchDetail",params:{id:a}};E.push(s)})(e)},{default:r((()=>[m("div",ca,[(l(),c(la,{key:s,"live-info":e,"match-index":s,"active-index":a.value},null,8,["live-info","match-index","active-index"]))])])),_:2},1032,["onClick"])))),128))])),_:1})])):h("",!0)}}});ra.__scopeId="data-v-8c3afa3e";const ma={class:"sportlive"},ua={key:0,class:"sportlive-Match-Tabs"},da={class:"sportlive"};var va=a({setup(a){const n=s((()=>{const e=j.state.app.globalBarHeaderHeight||48;return e>60?48:e})),f=t(),y=t(!1),g=t(null),_=async(e=!0)=>{await S(),await $(e)},w=t([""]),x=t([]),S=async()=>{const e=await q({})||{};if(200===e.code&&e.data){const a=e.data||[];x.value=a.filter((e=>!w.value.includes(e.gameType)))}},O=t([]),$=async(e=!0)=>{const a={gameType:f.value||"",showtype:"RB",timeStage:0,dateStage:0,gameSort:1,isNovice:"Y",onlyFavorite:0,leagueIds:"",gameTypeSon:"",page:1,pageSize:200};e&&(y.value=!1);const s=await D(a)||{};if(e&&(y.value=!0),200===s.code&&s.data?.matchList?.baseData){const e=s.data?.matchList?.baseData||[];O.value=e.filter((e=>!w.value.includes(e.gameType)))}else O.value=[]},B=()=>{},N=e=>{f.value=e.gameType,$()};b((()=>{Q(),y.value=!1,_()})),I((()=>{Q()})),P((()=>{E()})),k((()=>{E(),j.dispatch("home/setKeyValue",{key:"RrefShow",value:!0}),j.dispatch("home/setKeyValue",{key:"OUrefShow",value:!0}),j.dispatch("home/setKeyValue",{key:"MrefShow",value:!0})}));const M=s((()=>j.state.app.businessConfig.pushSwitch));T(M,(()=>{Q()}));const C=t(),Q=()=>{clearTimeout(C),C.value=setTimeout((()=>{V()}),100)},U=t(15e3),V=()=>{1==+M.value&&(U.value=12e4),E(),L.value=setInterval((()=>{_(!1)}),U.value)},L=t(),E=()=>{clearInterval(L.value)},z=t(""),F=s((()=>j.state.home.refreshChangeTime));return T(F,(e=>{e&&(clearTimeout(z.value),z.value=setTimeout((()=>{}),100))})),(a,s)=>{const t=i("SportsButton"),_=i("Loading"),T=i("van-sticky"),b=i("HomeEmpty"),w=i("FooterHeight");return l(),o(H,null,[u(ra,{class:"mt10"}),m("div",ma,[x.value.length?(l(),o("div",ua,[u(e,{text:a.$t("sport.all"),active:!f.value,onClick:s[0]||(s[0]=e=>N({}))},null,8,["text","active"]),(l(!0),o(H,null,R(x.value,((e,a)=>(l(),c(t,{key:a,text:e.gameType,active:f.value===e.gameType,count:e.count,"show-count":"",onClick:a=>N(e)},null,8,["text","active","count","onClick"])))),128))])):h("",!0)]),m("div",da,[y.value?(l(),o(H,{key:1},[m("div",{ref_key:"newContainer",ref:g},[(l(!0),o(H,null,R(O.value,((e,a)=>(l(),o(H,{key:a},[0===a?(l(),c(T,{key:0,"offset-top":v(n),container:g.value,"z-index":"5"},{default:r((()=>[u(K,{class:d({mt20:0!==a}),"send-params":e},null,8,["class","send-params"])])),_:2},1032,["offset-top","container"])):h("",!0),u(Ae,{"play-title-toggle":!1,"send-params":e,tabType:"RB",class:d({mt10:0!==a})},null,8,["send-params","class"])],64)))),128))],512),O.value.length?h("",!0):(l(),c(b,{key:0}))],64)):(l(),c(_,{key:0})),O.value.length?(l(),o("div",{key:2,class:"Button-MatchMore mt10",onClick:B},[m("span",null,p(a.$t("live.noMore")),1)])):h("",!0),u(w)])],64)}}});va.__scopeId="data-v-2ab7f5ba";export{va as default};
