import{D as e,s as a}from"./index.d3976e45.js";import{s,d as t,r as l,o,R as u,P as n,F as r,Z as i,Y as c,S as m,q as v,n as d,W as p,X as f,b as g,w as Y,e as T,M as D,u as h,O as M,c as y,a2 as x}from"./vue.979f7bee.js";import{t as b}from"./title-time.ab77a541.js";import{r as k}from"./index.d202e4b4.js";const S=["onClick"],H=[(e=>(p("data-v-40aa2be0"),e=e(),f(),e))((()=>n("i",{class:"iconfont icon-timeMore"},null,-1)))];var w=s({emits:["returnTimeSuccess"],setup(a,{expose:s,emit:p}){const f=t([{text:"全部",defaultToggle:!0,values:""},{text:"8小时",defaultToggle:!0,values:"8"},{text:"24小时",defaultToggle:!0,values:"24"},{text:"7天",defaultToggle:!0,values:"168"}]),g=t(""),Y=t(!1),T=a=>{const[s,t]=a;Y.value=!1;const l=f.value.filter((e=>e.defaultToggle));f.value=[...l,{text:`${e(s).format("YYYY/MM/DD")} - ${e(t).format("YYYY/MM/DD")}`,values:`${e(s).format("YYYY/MM/DD")}-${e(t).format("YYYY/MM/DD")}`}],g.value=`${e(s).format("YYYY/MM/DD")}-${e(t).format("YYYY/MM/DD")}`,p("returnTimeSuccess",g.value),d((()=>{var e,a;null==(a=h.value)||a.scrollTo(null==(e=M.value)?void 0:e.clientWidth,0)}))},D=()=>{Y.value=!0};s({active:g});const h=t(),M=t();return(e,a)=>{const s=l("van-calendar");return o(),u(r,null,[n("div",{ref_key:"refHomeTime",ref:h,class:"homeTime-Time-Tabs pb10"},[n("div",{ref_key:"refHomeTimePage",ref:M,class:"homeTime-TimePage"},[(o(!0),u(r,null,i(f.value,((e,a)=>(o(),u("div",{key:a,class:c(["item",{active:e.values===g.value}]),onClick:a=>(e=>{g.value=e.values,p("returnTimeSuccess",g.value)})(e)},m(e.text),11,S)))),128)),n("div",{class:"more",onClick:D},H)],512)],512),v(s,{show:Y.value,"onUpdate:show":a[0]||(a[0]=e=>Y.value=e),type:"range",onConfirm:T},null,8,["show"])],64)}}});w.__scopeId="data-v-40aa2be0";const $={class:"homeTime-page"};var _=s({setup(s){const n=g((()=>a.state.home.refreshChangeTime)),m=t("");Y(n,(e=>{e&&(clearTimeout(m.value),m.value=setTimeout((async()=>{await I(),await _()}),100))}));const d=t(!1),p=T({page:1,pageSize:5,gradeType:2,gameType:"FT"}),f=T([]),S=t(0),H=(e=!1,a="")=>{a?C.value=!e:d.value=e},_=async(e="")=>{H(!1,e);const a=await k(p);if(H(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:l}=s;S.value=l;const{pageSize:o,page:u}=p;e?j.value=!(o*u<l):f.length=0,f.push(...t)}},C=t(!1),j=t(!1),F=t(""),R=()=>{j.value||C.value||(C.value=!0,clearTimeout(F.value),F.value=setTimeout((()=>{p.page++,_(!0)}),100))},A=a=>{if(a)if((a||"").includes("/")){const[e,s]=a.split("-"),t=e.replaceAll("/","-"),l=s.replaceAll("/","-");p.startDate=t+" 00:00:00",p.endDate=l+" 23:59:59"}else p.startDate=e().format("YYYY-MM-DD HH:mm:ss"),p.endDate=e().add(a,"hour").format("YYYY-MM-DD HH:mm:ss");else p.startDate="",p.endDate="";j.value=!1,p.page=1,console.log(p),_()},P=e=>{d.value=!0,p.gameType=e,j.value=!1,p.page=1,_()},V=t(!1),z=e=>{V.value=e},I=()=>{p.page=1,p.gameType="FT"};return D((()=>{_()})),(e,a)=>{const s=l("ArrowTitle"),t=l("SportsTabs"),n=l("HomeMatchHandicap"),m=l("HomeEmpty"),p=l("Loading"),g=l("van-list"),Y=l("FooterHeight");return o(),u("div",$,[v(s,{class:"mt10 mb10",src:h(b),text:e.$t("home.latestMatch"),onReturnSuccess:z},null,8,["src","text"]),V.value?x("",!0):(o(),u(r,{key:0},[v(t,{class:"pb10",onReturnSportsSuccess:P}),v(w,{onReturnTimeSuccess:A}),v(g,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),finished:j.value,"finished-text":e.$t("live.noMore"),onLoad:R},{default:M((()=>[V.value?x("",!0):(o(),u(r,{key:0},[d.value?(o(),u(r,{key:0},[(o(!0),u(r,null,i(h(f),((e,a)=>(o(),y(n,{key:a,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])))),128)),h(f).length?x("",!0):(o(),y(m,{key:0}))],64)):x("",!0),!d.value||C.value?(o(),y(p,{key:1,class:c({"new_loading mt10":C.value})},null,8,["class"])):x("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),v(Y)],64))])}}});_.__scopeId="data-v-4ca5d6ae";export{_ as default};
