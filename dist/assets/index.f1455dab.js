import{D as e,s as a}from"./index.54628241.js";import{s as l,d as s,r as t,o,R as u,P as n,F as i,Z as r,Y as m,S as c,q as v,n as d,W as p,X as f,b as Y,w as g,e as T,M as D,O as h,u as M,c as y,a2 as x}from"./vue.e791136f.js";import{t as b}from"./title-time.ab77a541.js";import{r as k}from"./index.dce86948.js";const S=["onClick"],w=[(e=>(p("data-v-0b21fd28"),e=e(),f(),e))((()=>n("i",{class:"iconfont icon-timeMore"},null,-1)))];var H=l({emits:["returnTimeSuccess"],setup(a,{expose:l,emit:p}){const f=s([{text:"全部",defaultToggle:!0,values:""},{text:"8小时",defaultToggle:!0,values:"8"},{text:"24小时",defaultToggle:!0,values:"24"},{text:"7天",defaultToggle:!0,values:"168"}]),Y=s(""),g=s(!1),T=a=>{const[l,s]=a;g.value=!1;const t=f.value.filter((e=>e.defaultToggle));f.value=[...t,{text:`${e(l).format("YYYY/MM/DD")} - ${e(s).format("YYYY/MM/DD")}`,values:`${e(l).format("YYYY/MM/DD")}-${e(s).format("YYYY/MM/DD")}`}],Y.value=`${e(l).format("YYYY/MM/DD")}-${e(s).format("YYYY/MM/DD")}`,p("returnTimeSuccess",Y.value),d((()=>{var e,a;null==(a=h.value)||a.scrollTo(null==(e=M.value)?void 0:e.clientWidth,0)}))},D=()=>{g.value=!0};l({active:Y});const h=s(),M=s();return(e,a)=>{const l=t("van-calendar");return o(),u(i,null,[n("div",{ref_key:"refHomeTime",ref:h,class:"homeTime-Time-Tabs pb10"},[n("div",{ref_key:"refHomeTimePage",ref:M,class:"homeTime-TimePage"},[(o(!0),u(i,null,r(f.value,((e,a)=>(o(),u("div",{key:a,class:m(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,p("returnTimeSuccess",Y.value)})(e)},c(e.text),11,S)))),128)),n("div",{class:"more",onClick:D},w)],512)],512),v(l,{show:g.value,"onUpdate:show":a[0]||(a[0]=e=>g.value=e),type:"range",onConfirm:T},null,8,["show"])],64)}}});H.__scopeId="data-v-0b21fd28";const _={class:"homeTime-page"};var $=l({setup(l){const n=s("1"),c=Y((()=>a.state.home.refreshChangeTime)),d=s("");g(c,(e=>{e&&(n.value="1",clearTimeout(d.value),d.value=setTimeout((async()=>{await U(),await C()}),100))}));const p=s(!1),f=T({page:1,pageSize:5,gradeType:2,gameType:"FT"}),S=T([]),w=s(0),$=(e=!1,a="")=>{a?V.value=!e:p.value=e},C=async(e="")=>{$(!1,e);const a=await k(f);if($(!0,e),200===a.code){const l=(null==a?void 0:a.data)||{},{baseData:s,total:t}=l;w.value=t;const{pageSize:o,page:u}=f;e?j.value=!(o*u<t):S.length=0,S.push(...s)}},V=s(!1),j=s(!1),F=s(""),A=()=>{j.value||V.value||(V.value=!0,clearTimeout(F.value),F.value=setTimeout((()=>{f.page++,C(!0)}),100))},P=a=>{if(a)if((a||"").includes("/")){const[e,l]=a.split("-"),s=e.replaceAll("/","-"),t=l.replaceAll("/","-");f.startDate=s+" 00:00:00",f.endDate=t+" 23:59:59"}else f.startDate=e().format("YYYY-MM-DD HH:mm:ss"),f.endDate=e().add(a,"hour").format("YYYY-MM-DD HH:mm:ss");else f.startDate="",f.endDate="";j.value=!1,f.page=1,C()},R=e=>{p.value=!0,f.gameType=e,j.value=!1,f.page=1,C()},U=()=>{f.page=1,f.gameType="FT"};return D((()=>{C()})),(e,a)=>{const l=t("ArrowTitle"),s=t("SportsTabs"),c=t("HomeMatchHandicap"),d=t("HomeEmpty"),f=t("Loading"),Y=t("van-list"),g=t("FooterHeight"),T=t("van-collapse-item"),D=t("van-collapse");return o(),u("div",_,[v(D,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e),accordion:"",border:!1,class:"GlobalCollapse"},{default:h((()=>[v(T,{name:"1"},{title:h((()=>[v(l,{class:"mt10 mb10",src:M(b),text:e.$t("home.latestMatch")},null,8,["src","text"])])),default:h((()=>[v(s,{class:"pb10",onReturnSportsSuccess:R}),v(H,{onReturnTimeSuccess:P}),v(Y,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),finished:j.value,"finished-text":e.$t("live.noMore"),onLoad:A},{default:h((()=>[e.isShow?x("",!0):(o(),u(i,{key:0},[p.value?(o(),u(i,{key:0},[(o(!0),u(i,null,r(M(S),((e,a)=>(o(),y(c,{key:a,"send-params":e,class:m({mt20:0!==a})},null,8,["send-params","class"])))),128)),M(S).length?x("",!0):(o(),y(d,{key:0}))],64)):x("",!0),!p.value||V.value?(o(),y(f,{key:1,class:m({"new_loading mt10":V.value})},null,8,["class"])):x("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),v(g)])),_:1})])),_:1},8,["modelValue"])])}}});$.__scopeId="data-v-987410a4";export{$ as default};
