import{_ as s}from"./edit.1068d475.js";import{_ as a}from"./pitch.1d854cfc.js";import{s as e,b as t,d as l,j as i,r as c,o as r,R as u,q as o,O as n,P as d,S as v,B as p,V as m}from"./vue.979f7bee.js";import{u as f,P as g,d as y,s as k,R as $,S as h,I,O as b}from"./index.45b700f8.js";const x={class:"editUser"},_={class:"content"},P={class:"head"},w=["src"],C={class:"edit-name"},j={class:"explain"},S={class:"explain-box"},E={class:"explain privacy"},V={class:"account-1"},N={class:"top-1"},A={key:0,class:"img_1",src:a,alt:""},O={class:"top-2"},R={class:"account-1"},U={class:"top-1"},q={key:0,class:"img_1",src:a,alt:""},z={class:"top-2"};var B=e({setup(a){const e=t((()=>k.state.user.userInfo)),B=m(),T=l(""),D=l(0),F=l({}),{t:G}=f(),H=l(G("user.EditProfile")),J=s=>{B.push("/user"+s)},K=async s=>{if(D.value===s)return;D.value=s;const a={privacy:D.value},e=await h(a);if(200!==e.code)return y(e.msg);y(G("user.EditSuccessfully"))};i((()=>{L()}));const L=async()=>{const s={fPlayerId:e.value.playerId},a=await g(s);if(200!==a.code)return y(a.msg);T.value=a.data.profiles,D.value=a.data.privacy,F.value=a.data};return(a,e)=>{const t=c("van-nav-bar"),l=c("van-field");return r(),u("div",x,[o(t,{class:"bg-title",title:H.value,border:!1},{left:n((()=>[d("span",{onClick:e[0]||(e[0]=s=>{B.push("/user/userInfo")})},v(a.$t("user.cancellation")),1)])),right:n((()=>[d("span",{onClick:e[1]||(e[1]=s=>(async()=>{const s={nickName:"",headImg:"",profiles:T.value},a=await $(s);if(200!==a.code)return y(a.msg);y(G("user.EditSuccessfully")),k.dispatch("user/userInfo"),B.push("/user/userInfo")})())},v(a.$t("user.save")),1)])),_:1},8,["title"]),d("div",_,[d("div",P,[d("img",{class:"img_1",src:(i=F.value.headImg,i?`${I}${i}`:b),alt:""},null,8,w),d("div",{class:"edit",onClick:e[2]||(e[2]=s=>J("/editImg"))},v(a.$t("user.editText")),1)]),d("div",C,[d("span",null,v(a.$t("user.EditNickname")),1),d("img",{class:"img_1",src:s,alt:"",onClick:e[3]||(e[3]=s=>J("/editName"))})]),d("p",j,v(a.$t("user.Personal")),1),d("div",S,[o(l,{modelValue:T.value,"onUpdate:modelValue":e[4]||(e[4]=s=>T.value=s),rows:"10",autosize:"",type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue"])]),d("p",E,v(a.$t("user.PrivacySettings")),1),d("div",V,[d("div",N,[0===D.value?(r(),u("img",A)):(r(),u("div",{key:1,class:"round",onClick:e[5]||(e[5]=s=>K(0))})),p(" "+v(a.$t("user.PublicAccount")),1)]),d("div",O,v(a.$t("user.font2")),1)]),d("div",R,[d("div",U,[1===D.value?(r(),u("img",q)):(r(),u("div",{key:1,class:"round",onClick:e[6]||(e[6]=s=>K(1))})),p(" "+v(a.$t("user.PrivateAccount")),1)]),d("div",z,v(a.$t("user.font3")),1)])])]);var i}}});B.__scopeId="data-v-8a63fb68";export{B as default};
