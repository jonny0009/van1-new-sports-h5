import{u as e,D as a,s as t,k as l}from"./index.e9571d50.js";import{s,d as u,r as o,o as n,U as r,Q as i,F as m,_ as v,$ as d,W as c,q as p,n as f,Y as g,Z as T,b as h,w as y,e as Y,N as D,u as _,c as b,a1 as k,P as H}from"./vue.f2a0aeba.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang.0abec82f.js";import{c as x}from"./index.d40264de.js";const S=["onClick"],w=[(e=>(g("data-v-0b77095a"),e=e(),T(),e))((()=>i("i",{class:"iconfont icon-timeMore"},null,-1)))];var C=s({emits:["returnTimeSuccess"],setup(t,{expose:l,emit:s}){const{t:g}=e(),T=u([{text:g("sport.all"),defaultToggle:!0,values:""},{text:g("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:g("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:g("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),h=u(""),y=u(!1),Y=e=>{const[t,l]=e;y.value=!1;const u=T.value.filter((e=>e.defaultToggle)),o=`${a(t).format("YYYY/MM/DD")} - ${a(l).format("YYYY/MM/DD")}`;T.value=[...u,{text:o,values:o}],h.value=o,s("returnTimeSuccess",h.value),f((()=>{var e,a;null==(a=_.value)||a.scrollTo(null==(e=b.value)?void 0:e.clientWidth,0)}))},D=()=>{y.value=!0};l({active:h});const _=u(),b=u();return(e,a)=>{const t=o("van-calendar");return n(),r(m,null,[i("div",{ref_key:"refHomeTime",ref:_,class:"homeTime-Time-Tabs pb10"},[i("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(n(!0),r(m,null,v(T.value,((e,a)=>(n(),r("div",{key:a,class:d(["item",{active:e.values===h.value}]),onClick:a=>(e=>{h.value=e.values,s("returnTimeSuccess",h.value)})(e)},c(e.text),11,S)))),128)),i("div",{class:"more",onClick:D},w)],512)],512),p(t,{show:y.value,"onUpdate:show":a[0]||(a[0]=e=>y.value=e),type:"range",onConfirm:Y},null,8,["show"])],64)}}});C.__scopeId="data-v-0b77095a";const F={class:"homeTime-page"};var V=s({setup(e){const s=h((()=>{const e=t.state.app.globalBarHeaderHeight||48;return e>60?48:e})),c=u(null),f=h((()=>{var e,a,t;return(null==(t=null==(a=null==(e=l)?void 0:e.currentRoute)?void 0:a.value)?void 0:t.name)||""})),g=h((()=>t.state.home.refreshChangeTime)),T=u(""),S=u();y(g,(e=>{var a;e&&(null==(a=S.value)||a.resetParams(),clearTimeout(T.value),T.value=setTimeout((async()=>{await E(),await z()}),100))}));const w=u(!1),V=u(!1),R=Y({gameTypeSon:"",showtype:"FT",timeStage:0,gameSort:3,dateStage:0,isNovice:"Y",leagueIds:"",onlyFavorite:0,page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===f.value&&(R.startDate=a().format("YYYY-MM-DD")+" 00:00:00",R.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const j=Y([]),P=u(0),U=(e=!1,a="")=>{a?I.value=!e:w.value=e},$=()=>{V.value=!1,t.dispatch("home/setRefreshChangeTime",(new Date).getTime())},z=async(e="")=>{U(!1,e);const a=await x(R);if(U(!0,e),200===a.code){const t=(null==a?void 0:a.data)||{},{baseData:l,total:s}=null==t?void 0:t.matchList;P.value=s;const{pageSize:u,page:o}=R;e?L.value=!(u*o<s):j.length=0,j.push(...l)}},I=u(!1),L=u(!1),A=u(""),N=u(!1),W=()=>{N.value?L.value||I.value||(I.value=!0,clearTimeout(A.value),A.value=setTimeout((()=>{R.page++,z(!0)}),100)):N.value=!0},q=e=>{if(e)if((e||"").includes("/")){const[a,t]=e.split("-"),l=a.replaceAll("/","-"),s=t.replaceAll("/","-");R.startDate=l+" 00:00:00",R.endDate=s+" 23:59:59"}else R.startDate=a().format("YYYY-MM-DD HH:mm:ss"),R.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else R.startDate="",R.endDate="";L.value=!1,R.page=1,z()},B=e=>{w.value=!0,R.gameType=e,L.value=!1,R.page=1,z()},E=()=>{R.page=1,R.gameType="FT"};return D((()=>{z()})),(e,a)=>{const t=o("SportsTabs"),l=o("van-sticky"),u=o("HomeMatchHandicap"),g=o("HomeEmpty"),T=o("Loading"),h=o("van-list"),y=o("van-pull-refresh"),Y=o("FooterHeight");return n(),r("div",F,[p(t,{ref_key:"refSportsTabs",ref:S,class:"pb10",onReturnSportsSuccess:B},null,512),"HomeTime"===_(f)?(n(),b(C,{key:0,onReturnTimeSuccess:q})):k("",!0),p(y,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e),onRefresh:$},{default:H((()=>[p(h,{modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),finished:L.value,"finished-text":e.$t("live.noMore"),onLoad:W},{default:H((()=>[w.value?(n(),r(m,{key:0},[i("div",{ref_key:"newContainer",ref:c},[(n(!0),r(m,null,v(_(j),((e,a)=>(n(),r(m,{key:a},[0===a?(n(),b(l,{key:0,"offset-top":_(s),container:c.value,"z-index":"52222"},{default:H((()=>[p(M,{class:d({mt20:0!==a}),"send-params":e},null,8,["class","send-params"])])),_:2},1032,["offset-top","container"])):k("",!0),p(u,{"play-title-toggle":!1,"send-params":e,class:d({mt20:0!==a})},null,8,["send-params","class"])],64)))),128))],512),_(j).length?k("",!0):(n(),b(g,{key:0}))],64)):k("",!0),!w.value||I.value?(n(),b(T,{key:1,class:d({"new_loading mt10":I.value})},null,8,["class"])):k("",!0)])),_:1},8,["modelValue","finished","finished-text"])])),_:1},8,["modelValue"]),p(Y)])}}});V.__scopeId="data-v-de12a8ae";export{V as default};
