import{_ as e,a}from"./pitch.63ad02a2.js";import{u as s,B as l,b as t,s as c,C as n}from"./index.2bcee676.js";import{s as u,b as r,R as i,d as o,j as d,r as v,o as m,S as p,q as f,O as k,P as g,V as b,_ as h}from"./vue.c4df921c.js";const x={class:"editName"},y={class:"content"},$={class:"edit-name"},N={class:"userName"},P={class:"explain"},I={key:0,class:"noPitch",src:e},_={key:1,class:"noPitch",src:a},j={class:"explain"},O={key:0,class:"noPitch",src:e},V={key:1,class:"noPitch",src:a},z={class:"explain"},A={key:0,class:"noPitch",src:e},C={key:1,class:"noPitch",src:a};var S=u({setup(e){const a=r((()=>c.state.user.userInfo)),u=i(),S=o(""),Z=o(!1),q=o(!1),w=o(!1),{t:E}=s(),B=o(E("user.EditNickname")),R=e=>{if(!e)return Z.value=!1,q.value=!1,void(w.value=!1);-1!==e.indexOf(" ")?Z.value=!1:Z.value=!0;if(/^[a-zA-Z0-9]{4,16}$/.test(e)?w.value=!0:w.value=!1,e.indexOf("admin")>0||e.indexOf("test")>0)q.value=!1;else{/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{2,16}$/.test(e)?q.value=!0:q.value=!1}};d((()=>{U()}));const U=async()=>{const e={fPlayerId:a.value.playerId},s=await l(e);if(200!==s.code)return t(s.msg);S.value=s.data.nickName,R(s.data.nickName)};return(e,a)=>{const s=v("van-nav-bar"),l=v("van-field");return m(),p("div",x,[f(s,{class:"bg-title",title:B.value,border:!1},{left:k((()=>[g("span",{onClick:a[0]||(a[0]=e=>{u.back()})},b(e.$t("user.cancellation")),1)])),right:k((()=>[g("span",{onClick:a[1]||(a[1]=e=>(async()=>{if(!w.value||!w.value||!w.value)return t(E("user.text11"));const e={nickName:S.value,lang:localStorage.getItem("locale")},a=await n(e);if(200!==a.code)return t(a.msg);t(E("user.EditSuccessfully")),c.dispatch("user/userInfo"),u.push("/user/userInfo")})())},b(e.$t("user.save")),1)])),_:1},8,["title"]),g("div",y,[f(l,{modelValue:S.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>S.value=e),R],class:h([S.value?"bb":""]),name:"",label:"",placeholder:e.$t("user.nickname"),maxlength:"16",clearable:"",rules:[{required:!0,message:e.$t("user.nickname")}]},null,8,["modelValue","class","placeholder","rules"]),g("p",$,b(e.$t("user.fontNickName")),1),g("p",N,b(e.$t("user.text3"))+":",1),g("p",P,[w.value?(m(),p("img",_)):(m(),p("img",I)),g("span",null,b(e.$t("user.font5")),1)]),g("p",j,[q.value?(m(),p("img",V)):(m(),p("img",O)),g("span",null,b(e.$t("user.font6")),1)]),g("p",z,[Z.value?(m(),p("img",C)):(m(),p("img",A)),g("span",null,b(e.$t("user.text6")),1)])])])}}});S.__scopeId="data-v-7bb885c2";export{S as default};
