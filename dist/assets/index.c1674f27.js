import{u as e,D as a,s,H as t,j as l}from"./index.6528ade7.js";import{s as o,d as u,r as n,o as r,R as i,P as m,F as v,Z as c,_ as d,U as p,q as f,n as h,X as g,Y as T,b as y,u as Y,w as D,e as k,M as b,c as M,a1 as H,O as S}from"./vue.ffab6494.js";import{r as w}from"./index.5043c2af.js";const x=["onClick"],_=[(e=>(g("data-v-62aff50e"),e=e(),T(),e))((()=>m("i",{class:"iconfont icon-timeMore"},null,-1)))];var C=o({emits:["returnTimeSuccess"],setup(s,{expose:t,emit:l}){const{t:o}=e(),g=u([{text:o("sport.all"),defaultToggle:!0,values:""},{text:o("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:o("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:o("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),T=u(""),y=u(!1),Y=e=>{const[s,t]=e;y.value=!1;const o=g.value.filter((e=>e.defaultToggle)),u=`${a(s).format("YYYY/MM/DD")} - ${a(t).format("YYYY/MM/DD")}`;g.value=[...o,{text:u,values:u}],T.value=u,l("returnTimeSuccess",T.value),h((()=>{var e,a;null==(a=k.value)||a.scrollTo(null==(e=b.value)?void 0:e.clientWidth,0)}))},D=()=>{y.value=!0};t({active:T});const k=u(),b=u();return(e,a)=>{const s=n("van-calendar");return r(),i(v,null,[m("div",{ref_key:"refHomeTime",ref:k,class:"homeTime-Time-Tabs pb10"},[m("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(r(!0),i(v,null,c(g.value,((e,a)=>(r(),i("div",{key:a,class:d(["item",{active:e.values===T.value}]),onClick:a=>(e=>{T.value=e.values,l("returnTimeSuccess",T.value)})(e)},p(e.text),11,x)))),128)),m("div",{class:"more",onClick:D},_)],512)],512),f(s,{show:y.value,"onUpdate:show":a[0]||(a[0]=e=>y.value=e),type:"range",onConfirm:Y},null,8,["show"])],64)}}});C.__scopeId="data-v-62aff50e";const R={class:"home-tabs-play"},U={class:"play"},O=m("div",{class:"flex-1"},null,-1);var P=o({props:{sendParams:{type:Object,default:function(){return{}}}},setup(e){const a=y((()=>s.state.home.RrefShow)),l=()=>{s.dispatch("home/setKeyValue",{key:"RrefShow",value:!a.value})},o=y((()=>s.state.home.OUrefShow)),u=()=>{s.dispatch("home/setKeyValue",{key:"OUrefShow",value:!o.value})},n=y((()=>s.state.home.MrefShow)),v=()=>{s.dispatch("home/setKeyValue",{key:"MrefShow",value:!n.value})};return(s,c)=>(r(),i("div",R,[f(t,{"time-send-params":e.sendParams},null,8,["time-send-params"]),m("div",U,[O,m("span",{class:d(["btn R",[{active:Y(a)}]]),onClick:l},p(s.$t("home.R")),3),m("span",{class:d(["btn OU",[{active:Y(o)}]]),onClick:u},p(s.$t("home.OU")),3),m("span",{class:d(["btn M",[{active:Y(n)}]]),onClick:v},p(s.$t("home.M")),3)])]))}});const V={class:"homeTime-page"};var $=o({setup(e){const t=y((()=>{const e=s.state.app.globalBarHeaderHeight||48;return e>60?48:e})),o=u(null),p=y((()=>{var e,a,s;return(null==(s=null==(a=null==(e=l)?void 0:e.currentRoute)?void 0:a.value)?void 0:s.name)||""})),h=y((()=>s.state.home.refreshChangeTime)),g=u(""),T=u();D(h,(e=>{var a;e&&(null==(a=T.value)||a.resetParams(),clearTimeout(g.value),g.value=setTimeout((async()=>{await q(),await $()}),100))}));const x=u(!1),_=k({page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===p.value&&(_.startDate=a().format("YYYY-MM-DD")+" 00:00:00",_.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const R=k([]),U=u(0),O=(e=!1,a="")=>{a?j.value=!e:x.value=e},$=async(e="")=>{O(!1,e);const a=await w(_);if(O(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:l}=s;U.value=l;const{pageSize:o,page:u}=_;e?F.value=!(o*u<l):R.length=0,R.push(...t)}},j=u(!1),F=u(!1),z=u(""),K=u(!1),A=()=>{K.value?F.value||j.value||(j.value=!0,clearTimeout(z.value),z.value=setTimeout((()=>{_.page++,$(!0)}),100)):K.value=!0},I=e=>{if(e)if((e||"").includes("/")){const[a,s]=e.split("-"),t=a.replaceAll("/","-"),l=s.replaceAll("/","-");_.startDate=t+" 00:00:00",_.endDate=l+" 23:59:59"}else _.startDate=a().format("YYYY-MM-DD HH:mm:ss"),_.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else _.startDate="",_.endDate="";F.value=!1,_.page=1,$()},L=e=>{x.value=!0,_.gameType=e,F.value=!1,_.page=1,$()},q=()=>{_.page=1,_.gameType="FT"};return b((()=>{$()})),(e,a)=>{const s=n("SportsTabs"),l=n("van-sticky"),u=n("HomeMatchHandicap"),h=n("HomeEmpty"),g=n("Loading"),y=n("van-list"),D=n("FooterHeight");return r(),i("div",V,[f(s,{ref_key:"refSportsTabs",ref:T,class:"pb10",onReturnSportsSuccess:L},null,512),"HomeTime"===Y(p)?(r(),M(C,{key:0,onReturnTimeSuccess:I})):H("",!0),f(y,{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),finished:F.value,"finished-text":e.$t("live.noMore"),onLoad:A},{default:S((()=>[x.value?(r(),i(v,{key:0},[m("div",{ref_key:"newContainer",ref:o},[(r(!0),i(v,null,c(Y(R),((e,a)=>(r(),i(v,{key:a},[0===a?(r(),M(l,{key:0,"offset-top":Y(t),container:o.value,"z-index":"52222"},{default:S((()=>[f(P,{class:d({mt20:0!==a}),"send-params":e},null,8,["class","send-params"])])),_:2},1032,["offset-top","container"])):H("",!0),f(u,{"play-title-toggle":!1,"send-params":e,class:d({mt20:0!==a})},null,8,["send-params","class"])],64)))),128))],512),Y(R).length?H("",!0):(r(),M(h,{key:0}))],64)):H("",!0),!x.value||j.value?(r(),M(g,{key:1,class:d({"new_loading mt10":j.value})},null,8,["class"])):H("",!0)])),_:1},8,["modelValue","finished","finished-text"]),f(D)])}}});$.__scopeId="data-v-1d184612";export{$ as default};
