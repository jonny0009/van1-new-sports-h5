import{D as e,s as a}from"./index.f1c3ba61.js";import{s,d as t,r as l,o,R as u,P as n,F as i,Z as r,Y as c,S as v,q as m,n as d,W as f,X as p,b as g,w as Y,e as T,M as D,u as h,O as M,c as y,a2 as x}from"./vue.e791136f.js";import{t as k}from"./title-time.7628940e.js";import{r as b}from"./index.fd554bef.js";const S=["onClick"],H=[(e=>(f("data-v-7ee49594"),e=e(),p(),e))((()=>n("i",{class:"iconfont icon-timeMore"},null,-1)))];var w=s({emits:["returnTimeSuccess"],setup(a,{expose:s,emit:f}){const p=t([{text:"全部",defaultToggle:!0,values:""},{text:"8小时",defaultToggle:!0,values:"8"},{text:"24小时",defaultToggle:!0,values:"24"},{text:"7天",defaultToggle:!0,values:"168"}]),g=t(""),Y=t(!1),T=a=>{const[s,t]=a;Y.value=!1;const l=p.value.filter((e=>e.defaultToggle));p.value=[...l,{text:`${e(s).format("YYYY/MM/DD")} - ${e(t).format("YYYY/MM/DD")}`,values:`${e(s).format("YYYY/MM/DD")}-${e(t).format("YYYY/MM/DD")}`}],g.value=`${e(s).format("YYYY/MM/DD")}-${e(t).format("YYYY/MM/DD")}`,f("returnTimeSuccess",g.value),d((()=>{var e,a;null==(a=h.value)||a.scrollTo(null==(e=M.value)?void 0:e.clientWidth,0)}))},D=()=>{Y.value=!0};s({active:g});const h=t(),M=t();return(e,a)=>{const s=l("van-calendar");return o(),u(i,null,[n("div",{ref_key:"refHomeTime",ref:h,class:"homeTime-Time-Tabs pb10"},[n("div",{ref_key:"refHomeTimePage",ref:M,class:"homeTime-TimePage"},[(o(!0),u(i,null,r(p.value,((e,a)=>(o(),u("div",{key:a,class:c(["item",{active:e.values===g.value}]),onClick:a=>(e=>{g.value=e.values,f("returnTimeSuccess",g.value)})(e)},v(e.text),11,S)))),128)),n("div",{class:"more",onClick:D},H)],512)],512),m(s,{show:Y.value,"onUpdate:show":a[0]||(a[0]=e=>Y.value=e),type:"range",onConfirm:T},null,8,["show"])],64)}}});w.__scopeId="data-v-7ee49594";const $={class:"homeTime-page"},_=(e=>(f("data-v-16bf350a"),e=e(),p(),e))((()=>n("div",{class:"footerHeight"},null,-1)));var C=s({setup(s){const n=g((()=>a.state.home.refreshChangeTime)),v=t("");Y(n,(e=>{e&&(clearTimeout(v.value),v.value=setTimeout((async()=>{await L(),await C()}),100))}));const d=t(!1),f=T({page:1,pageSize:5,gradeType:2,gameType:"FT"}),p=T([]),S=t(0),H=(e=!1,a="")=>{a?j.value=!e:d.value=e},C=async(e="")=>{H(!1,e);const a=await b(f);if(H(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:l}=s;S.value=l;const{pageSize:o,page:u}=f;e?R.value=!(o*u<l):p.length=0,p.push(...t)}},j=t(!1),R=t(!1),A=t(""),F=()=>{R.value||j.value||(j.value=!0,clearTimeout(A.value),A.value=setTimeout((()=>{f.page++,C(!0)}),100))},P=a=>{if(a)if((a||"").includes("/")){const[e,s]=a.split("-"),t=e.replaceAll("/","-"),l=s.replaceAll("/","-");f.startDate=t+" 00:00:00",f.endDate=l+" 23:59:59"}else f.startDate=e().format("YYYY-MM-DD HH:mm:ss"),f.endDate=e().add(a,"hour").format("YYYY-MM-DD HH:mm:ss");else f.startDate="",f.endDate="";R.value=!1,f.page=1,console.log(f),C()},V=e=>{d.value=!0,f.gameType=e,R.value=!1,f.page=1,C()},z=t(!1),I=e=>{z.value=e},L=()=>{f.page=1,f.gameType="FT"};return D((()=>{C()})),(e,a)=>{const s=l("ArrowTitle"),t=l("SportsTabs"),n=l("HomeMatchHandicap"),v=l("HomeEmpty"),f=l("Loading"),g=l("van-list");return o(),u("div",$,[m(s,{class:"mt10 mb10",src:h(k),text:e.$t("home.latestMatch"),onReturnSuccess:I},null,8,["src","text"]),z.value?x("",!0):(o(),u(i,{key:0},[m(t,{class:"pb10",onReturnSportsSuccess:V}),m(w,{onReturnTimeSuccess:P}),m(g,{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),finished:R.value,"finished-text":e.$t("live.noMore"),onLoad:F},{default:M((()=>[z.value?x("",!0):(o(),u(i,{key:0},[d.value?(o(),u(i,{key:0},[(o(!0),u(i,null,r(h(p),((e,a)=>(o(),y(n,{key:a,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])))),128)),h(p).length?x("",!0):(o(),y(v,{key:0}))],64)):x("",!0),!d.value||j.value?(o(),y(f,{key:1,class:c({"new_loading mt10":j.value})},null,8,["class"])):x("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),_],64))])}}});C.__scopeId="data-v-16bf350a";export{C as default};
