import{D as e,s as a}from"./index.1d7db88f.js";import{s,d as t,r as l,o as u,R as o,P as n,F as r,Z as i,Y as m,S as c,q as v,n as d,W as f,X as p,b as Y,w as g,e as T,M as D,u as h,O as M,c as y,a2 as x}from"./vue.979f7bee.js";import{t as b}from"./title-time.ab77a541.js";import{r as k}from"./index.4b827986.js";const S=["onClick"],H=[(e=>(f("data-v-40aa2be0"),e=e(),p(),e))((()=>n("i",{class:"iconfont icon-timeMore"},null,-1)))];var w=s({emits:["returnTimeSuccess"],setup(a,{expose:s,emit:f}){const p=t([{text:"全部",defaultToggle:!0,values:""},{text:"8小时",defaultToggle:!0,values:"8"},{text:"24小时",defaultToggle:!0,values:"24"},{text:"7天",defaultToggle:!0,values:"168"}]),Y=t(""),g=t(!1),T=a=>{const[s,t]=a;g.value=!1;const l=p.value.filter((e=>e.defaultToggle));p.value=[...l,{text:`${e(s).format("YYYY/MM/DD")} - ${e(t).format("YYYY/MM/DD")}`,values:`${e(s).format("YYYY/MM/DD")}-${e(t).format("YYYY/MM/DD")}`}],Y.value=`${e(s).format("YYYY/MM/DD")}-${e(t).format("YYYY/MM/DD")}`,f("returnTimeSuccess",Y.value),d((()=>{var e,a;null==(a=h.value)||a.scrollTo(null==(e=M.value)?void 0:e.clientWidth,0)}))},D=()=>{g.value=!0};s({active:Y});const h=t(),M=t();return(e,a)=>{const s=l("van-calendar");return u(),o(r,null,[n("div",{ref_key:"refHomeTime",ref:h,class:"homeTime-Time-Tabs pb10"},[n("div",{ref_key:"refHomeTimePage",ref:M,class:"homeTime-TimePage"},[(u(!0),o(r,null,i(p.value,((e,a)=>(u(),o("div",{key:a,class:m(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,f("returnTimeSuccess",Y.value)})(e)},c(e.text),11,S)))),128)),n("div",{class:"more",onClick:D},H)],512)],512),v(s,{show:g.value,"onUpdate:show":a[0]||(a[0]=e=>g.value=e),type:"range",onConfirm:T},null,8,["show"])],64)}}});w.__scopeId="data-v-40aa2be0";const $={class:"homeTime-page"};var _=s({setup(s){const n=Y((()=>a.state.home.refreshChangeTime)),c=t("");g(n,(e=>{e&&(clearTimeout(c.value),c.value=setTimeout((async()=>{await I(),await _()}),100))}));const d=t(!1),f=T({page:1,pageSize:5,gradeType:2,gameType:"FT"}),p=T([]),S=t(0),H=(e=!1,a="")=>{a?C.value=!e:d.value=e},_=async(e="")=>{H(!1,e);const a=await k(f);if(H(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:l}=s;S.value=l;const{pageSize:u,page:o}=f;e?j.value=!(u*o<l):p.length=0,p.push(...t)}},C=t(!1),j=t(!1),F=t(""),R=()=>{j.value||C.value||(C.value=!0,clearTimeout(F.value),F.value=setTimeout((()=>{f.page++,_(!0)}),100))},A=a=>{if(a)if((a||"").includes("/")){const[e,s]=a.split("-"),t=e.replaceAll("/","-"),l=s.replaceAll("/","-");f.startDate=t+" 00:00:00",f.endDate=l+" 23:59:59"}else f.startDate=e().format("YYYY-MM-DD HH:mm:ss"),f.endDate=e().add(a,"hour").format("YYYY-MM-DD HH:mm:ss");else f.startDate="",f.endDate="";j.value=!1,f.page=1,_()},P=e=>{d.value=!0,f.gameType=e,j.value=!1,f.page=1,_()},V=t(!1),z=e=>{V.value=e},I=()=>{f.page=1,f.gameType="FT"};return D((()=>{_()})),(e,a)=>{const s=l("ArrowTitle"),t=l("SportsTabs"),n=l("HomeMatchHandicap"),c=l("HomeEmpty"),f=l("Loading"),Y=l("van-list"),g=l("FooterHeight");return u(),o("div",$,[v(s,{class:"mt10 mb10",src:h(b),text:e.$t("home.latestMatch"),onReturnSuccess:z},null,8,["src","text"]),V.value?x("",!0):(u(),o(r,{key:0},[v(t,{class:"pb10",onReturnSportsSuccess:P}),v(w,{onReturnTimeSuccess:A}),v(Y,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),finished:j.value,"finished-text":e.$t("live.noMore"),onLoad:R},{default:M((()=>[V.value?x("",!0):(u(),o(r,{key:0},[d.value?(u(),o(r,{key:0},[(u(!0),o(r,null,i(h(p),((e,a)=>(u(),y(n,{key:a,"send-params":e,class:m({mt20:0!==a})},null,8,["send-params","class"])))),128)),h(p).length?x("",!0):(u(),y(c,{key:0}))],64)):x("",!0),!d.value||C.value?(u(),y(f,{key:1,class:m({"new_loading mt10":C.value})},null,8,["class"])):x("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),v(g)],64))])}}});_.__scopeId="data-v-31a687f2";export{_ as default};
