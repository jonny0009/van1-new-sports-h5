import{u as e,P as a,s as t,r as s,h as l}from"./index.cb503d4e.js";import{s as u,d as o,r,o as n,S as m,P as i,F as v,_ as c,Z as d,V as p,q as f,n as g,X as T,Y,b as h,w as y,e as D,M as _,O as b,u as M,c as S,$ as k}from"./vue.7833d4f2.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang.b4feeac0.js";import{d as x}from"./index.8c8eef35.js";const w=["onClick"],V=[(e=>(T("data-v-62aff50e"),e=e(),Y(),e))((()=>i("i",{class:"iconfont icon-timeMore"},null,-1)))];var C=u({emits:["returnTimeSuccess"],setup(t,{expose:s,emit:l}){const{t:u}=e(),T=o([{text:u("sport.all"),defaultToggle:!0,values:""},{text:u("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:u("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:u("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),Y=o(""),h=o(!1),y=e=>{const[t,s]=e;h.value=!1;const u=T.value.filter((e=>e.defaultToggle)),o=`${a(t).format("YYYY/MM/DD")} - ${a(s).format("YYYY/MM/DD")}`;T.value=[...u,{text:o,values:o}],Y.value=o,l("returnTimeSuccess",Y.value),g((()=>{_.value?.scrollTo(b.value?.clientWidth,0)}))},D=()=>{h.value=!0};s({active:Y});const _=o(),b=o();return(e,a)=>{const t=r("van-calendar");return n(),m(v,null,[i("div",{ref_key:"refHomeTime",ref:_,class:"homeTime-Time-Tabs pb10"},[i("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(n(!0),m(v,null,c(T.value,((e,a)=>(n(),m("div",{key:a,class:d(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,l("returnTimeSuccess",Y.value)})(e)},p(e.text),11,w)))),128)),i("div",{class:"more",onClick:D},V)],512)],512),f(t,{show:h.value,"onUpdate:show":a[0]||(a[0]=e=>h.value=e),type:"range",onConfirm:y},null,8,["show"])],64)}}});C.__scopeId="data-v-62aff50e";const F={class:"mt10"};var j=u({setup(e){const u=h((()=>t.state.user.scrollNumY)),p=h((()=>{const e=t.state.app.globalBarHeaderHeight||48;return e>60?48:e})),g=o(null),T=h((()=>s?.currentRoute?.value?.name||"")),Y=h((()=>t.state.home.refreshChangeTime)),w=o(""),V=o();y(Y,(e=>{e&&(V.value?.resetParams(),clearTimeout(w.value),w.value=setTimeout((async()=>{await X(),await I()}),100))})),y((()=>u.value),(e=>{e>88&&(V.value.ifAnimated=!1)}));const j=o(!1),P=o(!1),N=D({gameTypeSon:"",showtype:"FT",timeStage:0,gameSort:3,dateStage:0,isNovice:"Y",leagueIds:"",onlyFavorite:0,page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===T.value&&(N.startDate=a().format("YYYY-MM-DD")+" 00:00:00",N.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const O=o([]),R=o([]),$=o(0),z=(e=!1,a="")=>{a?L.value=!e:j.value=e},A=()=>{P.value=!1,j.value=!0,U.value=!1,N.page=1,I()},I=async(e="")=>{z(!1,e);const a=await x(N);if(z(!0,e),200===a.code){const t=a?.data||{},{baseData:s,total:u}=t?.matchList;$.value=u;const{pageSize:o,page:r}=N;e?U.value=!(o*r<u):(O.value=[],R.value=[]),R.value.push(...s);const n={},m=[];R.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=l(e.gameDate).format("YYYY/MM/DD");n[a]?n[a].list.push(e):n[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(n).map((e=>{m.push(JSON.parse(JSON.stringify(n[e])))})),O.value=m}},L=o(!1),U=o(!1),J=o(""),q=o(!1),B=()=>{q.value?U.value||L.value||(L.value=!0,clearTimeout(J.value),J.value=setTimeout((()=>{N.page++,I(!0)}),100)):q.value=!0},E=e=>{if(e)if((e||"").includes("/")){const[a,t]=e.split("-"),s=a.replaceAll("/","-"),l=t.replaceAll("/","-");N.startDate=s+" 00:00:00",N.endDate=l+" 23:59:59"}else N.startDate=a().format("YYYY-MM-DD HH:mm:ss"),N.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else N.startDate="",N.endDate="";U.value=!1,N.page=1,I()},W=e=>{j.value=!0,N.gameType=e,U.value=!1,N.page=1,I()},X=()=>{N.page=1,N.gameType="FT"};return _((()=>{I()})),(e,a)=>{const t=r("van-sticky"),s=r("HomeMatchHandicap"),l=r("HomeEmpty"),u=r("Loading"),o=r("van-list"),Y=r("van-pull-refresh"),h=r("FooterHeight"),y=r("SportsTabs");return n(),m("div",{class:"homeTime-page",ref_key:"newContainer",ref:g},[f(y,{ref_key:"refSportsTabs",ref:V,class:"pb10",onReturnSportsSuccess:W},{body:b((()=>[i("div",F,["HomeTime"===M(T)?(n(),S(C,{key:0,onReturnTimeSuccess:E})):k("",!0),f(Y,{modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e),onRefresh:A},{default:b((()=>[f(o,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),finished:U.value,"finished-text":e.$t("live.noMore"),onLoad:B},{default:b((()=>[j.value?(n(),m(v,{key:0},[(n(!0),m(v,null,c(O.value,((e,a)=>(n(),m(v,{key:a},[f(t,{"offset-top":M(p),container:g.value,"z-index":"500",class:d({mt10:0!==a})},{default:b((()=>[f(H,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(n(!0),m(v,null,c(e.list,((e,a)=>(n(),S(s,{"play-title-toggle":!1,"send-params":e,class:d({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128)),O.value.length?k("",!0):(n(),S(l,{key:0}))],64)):k("",!0),!j.value||L.value?(n(),S(u,{key:1,class:d({"new_loading mt10":L.value})},null,8,["class"])):k("",!0)])),_:1},8,["modelValue","finished","finished-text"])])),_:1},8,["modelValue"]),f(h)])])),_:1},512)],512)}}});j.__scopeId="data-v-49655ddc";export{j as default};
