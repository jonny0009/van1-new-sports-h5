import{s as e,r as a,D as s,h as t,j as l,x as o}from"./index.e2584dee.js";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang.5496f0e5.js";import{s as n,a6 as r,b as m,d as i,w as d,e as v,M as p,r as c,o as f,R as D,q as Y,O as g,P as h,u as y,c as T,$ as M,F as H,S as _,_ as w}from"./vue.c62eea93.js";const k={class:"mt10"};var S=n({setup(n){const S=r((()=>o((()=>import("./index.148381aa.js")),["/assets/index.148381aa.js","/assets/index.a3470bce.css","/assets/index.e2584dee.js","/assets/index.ff8f29a8.css","/assets/vue.c62eea93.js"]))),b=m((()=>e.state.user.scrollNumY)),x=m((()=>{const a=e.state.app.globalBarHeaderHeight||48;return a>60?48:a})),R=i(null),V=i(!1),j=m((()=>{var e,s,t;return(null==(t=null==(s=null==(e=a)?void 0:e.currentRoute)?void 0:s.value)?void 0:t.name)||""})),C=m((()=>e.state.home.refreshChangeTime)),E=i(""),F=i(),O=i(null),A={beginDate:s().format("YYYY-MM-DD HH:mm:ss"),endDate:s().add(8,"hour").format("YYYY-MM-DD HH:mm:ss"),dayBeginDate:s().format("YYYY-MM-DD HH:mm:ss"),dayEndDate:s().add(24,"hour").format("YYYY-MM-DD HH:mm:ss"),weekBeginDate:s().format("YYYY-MM-DD HH:mm:ss"),weekEndDate:s().add(168,"hour").format("YYYY-MM-DD HH:mm:ss"),gameType:"FT"};d((()=>b.value),(e=>{e>88&&(F.value.ifAnimated=!1)})),d(C,(e=>{var a;e&&(null==(a=F.value)||a.resetParams(),clearTimeout(E.value),E.value=setTimeout((async()=>{await se(),await $()}),100))}));const I=i(!1),N=i(!1),z=v({page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===j.value&&(z.startDate=s().format("YYYY-MM-DD")+" 00:00:00",z.endDate=s().format("YYYY-MM-DD")+" 23:59:59");const B=i([]),L=i([]),P=i(0),U=(e=!1,a="")=>{a?q.value=!e:I.value=e},J=()=>{N.value=!1,e.dispatch("home/setRefreshChangeTime",(new Date).getTime())},$=async(e="")=>{U(!1,e);const a=await t(z);if(U(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:o}=s;P.value=o;const{pageSize:u,page:n}=z;e?G.value=!(u*n<o):(B.value=[],L.value=[]),L.value.push(...t);const r={},m=[];L.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=l(e.gameDate).format("YYYY/MM/DD");r[a]?r[a].list.push(e):r[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(r).map((e=>{m.push(JSON.parse(JSON.stringify(r[e])))})),B.value=m}},q=i(!1),G=i(!1),K=i(""),Q=i(!1),W=()=>{Q.value?G.value||q.value||(q.value=!0,clearTimeout(K.value),K.value=setTimeout((()=>{z.page++,$(!0)}),100)):Q.value=!0},X=e=>{V.value=e},Z=e=>{V.value=!1,O.value.onConfirm(e)},ee=e=>{if(e)if((e||"").includes("/")){const[a,s]=e.split("-"),t=a.replaceAll("/","-"),l=s.replaceAll("/","-");z.startDate=t+" 00:00:00",z.endDate=l+" 23:59:59"}else z.startDate=s().format("YYYY-MM-DD HH:mm:ss"),z.endDate=s().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else z.startDate="",z.endDate="";G.value=!1,z.page=1,$()},ae=a=>{I.value=!0,z.gameType=a,G.value=!1,z.page=1,A.gameType=a,e.dispatch("home/initTimeDataInfo",A),$()},se=()=>{z.page=1,z.gameType="FT"};return p((()=>{$(),e.dispatch("home/initTimeDataInfo",A)})),(e,a)=>{const s=c("van-sticky"),t=c("HomeMatchHandicap"),l=c("HomeEmpty"),o=c("Loading"),n=c("van-list"),r=c("SportsTabs"),m=c("van-pull-refresh"),i=c("FooterHeight"),d=c("van-calendar");return f(),D("div",{class:"homeTime-page",ref_key:"newContainer",ref:R},[Y(m,{modelValue:N.value,"onUpdate:modelValue":a[1]||(a[1]=e=>N.value=e),onRefresh:J},{default:g((()=>[Y(r,{ref_key:"refSportsTabs",ref:F,class:"pb10",onReturnSportsSuccess:ae,ifCountNum:!1},{body:g((()=>[h("div",k,["HomeTime"===y(j)?(f(),T(y(S),{key:0,ref_key:"refTimeTabs",ref:O,onReturnTimeSuccess:ee,onDateShow:X},null,512)):M("",!0),Y(n,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),finished:G.value,"finished-text":e.$t("live.noMore"),onLoad:W},{default:g((()=>[I.value?(f(),D(H,{key:0},[(f(!0),D(H,null,_(B.value,((e,a)=>(f(),D(H,{key:a},[Y(s,{"offset-top":y(x),container:R.value,"z-index":"8",class:w({mt10:0!==a})},{default:g((()=>[Y(u,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(f(!0),D(H,null,_(e.list,((e,a)=>(f(),T(t,{"play-title-toggle":!1,"send-params":e,class:w({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128)),B.value.length?M("",!0):(f(),T(l,{key:0}))],64)):M("",!0),!I.value||q.value?(f(),T(o,{key:1,class:w({"new_loading mt10":q.value})},null,8,["class"])):M("",!0)])),_:1},8,["modelValue","finished","finished-text"])])])),_:1},512)])),_:1},8,["modelValue"]),Y(i),Y(d,{show:V.value,"onUpdate:show":a[2]||(a[2]=e=>V.value=e),type:"range",onConfirm:Z},null,8,["show"])],512)}}});S.__scopeId="data-v-fae426c8";export{S as default};
