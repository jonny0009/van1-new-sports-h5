import{u as e,D as a,s,j as t}from"./index.6b0b88da.js";import{s as l,d as u,r as o,o as n,O as r,Q as i,F as v,_ as m,$ as c,W as d,q as p,n as f,Y as g,Z as T,b as Y,w as h,e as y,M as D,u as _,c as b,S as M,P as k}from"./vue.778d92ec.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang.461f925a.js";import{r as x}from"./index.e6ba166a.js";const S=["onClick"],w=[(e=>(g("data-v-62aff50e"),e=e(),T(),e))((()=>i("i",{class:"iconfont icon-timeMore"},null,-1)))];var C=l({emits:["returnTimeSuccess"],setup(s,{expose:t,emit:l}){const{t:g}=e(),T=u([{text:g("sport.all"),defaultToggle:!0,values:""},{text:g("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:g("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:g("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),Y=u(""),h=u(!1),y=e=>{const[s,t]=e;h.value=!1;const u=T.value.filter((e=>e.defaultToggle)),o=`${a(s).format("YYYY/MM/DD")} - ${a(t).format("YYYY/MM/DD")}`;T.value=[...u,{text:o,values:o}],Y.value=o,l("returnTimeSuccess",Y.value),f((()=>{var e,a;null==(a=_.value)||a.scrollTo(null==(e=b.value)?void 0:e.clientWidth,0)}))},D=()=>{h.value=!0};t({active:Y});const _=u(),b=u();return(e,a)=>{const s=o("van-calendar");return n(),r(v,null,[i("div",{ref_key:"refHomeTime",ref:_,class:"homeTime-Time-Tabs pb10"},[i("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(n(!0),r(v,null,m(T.value,((e,a)=>(n(),r("div",{key:a,class:c(["item",{active:e.values===Y.value}]),onClick:a=>(e=>{Y.value=e.values,l("returnTimeSuccess",Y.value)})(e)},d(e.text),11,S)))),128)),i("div",{class:"more",onClick:D},w)],512)],512),p(s,{show:h.value,"onUpdate:show":a[0]||(a[0]=e=>h.value=e),type:"range",onConfirm:y},null,8,["show"])],64)}}});C.__scopeId="data-v-62aff50e";const j={class:"homeTime-page"};var F=l({setup(e){const l=Y((()=>{const e=s.state.app.globalBarHeaderHeight||48;return e>60?48:e})),d=u(null),f=Y((()=>{var e,a,s;return(null==(s=null==(a=null==(e=t)?void 0:e.currentRoute)?void 0:a.value)?void 0:s.name)||""})),g=Y((()=>s.state.home.refreshChangeTime)),T=u(""),S=u();h(g,(e=>{var a;e&&(null==(a=S.value)||a.resetParams(),clearTimeout(T.value),T.value=setTimeout((async()=>{await B(),await R()}),100))}));const w=u(!1),F=y({page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===f.value&&(F.startDate=a().format("YYYY-MM-DD")+" 00:00:00",F.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const P=y([]),$=u(0),z=(e=!1,a="")=>{a?V.value=!e:w.value=e},R=async(e="")=>{z(!1,e);const a=await x(F);if(z(!0,e),200===a.code){const s=(null==a?void 0:a.data)||{},{baseData:t,total:l}=s;$.value=l;const{pageSize:u,page:o}=F;e?A.value=!(u*o<l):P.length=0,P.push(...t)}},V=u(!1),A=u(!1),I=u(""),L=u(!1),U=()=>{L.value?A.value||V.value||(V.value=!0,clearTimeout(I.value),I.value=setTimeout((()=>{F.page++,R(!0)}),100)):L.value=!0},W=e=>{if(e)if((e||"").includes("/")){const[a,s]=e.split("-"),t=a.replaceAll("/","-"),l=s.replaceAll("/","-");F.startDate=t+" 00:00:00",F.endDate=l+" 23:59:59"}else F.startDate=a().format("YYYY-MM-DD HH:mm:ss"),F.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else F.startDate="",F.endDate="";A.value=!1,F.page=1,R()},q=e=>{w.value=!0,F.gameType=e,A.value=!1,F.page=1,R()},B=()=>{F.page=1,F.gameType="FT"};return D((()=>{R()})),(e,a)=>{const s=o("SportsTabs"),t=o("van-sticky"),u=o("HomeMatchHandicap"),g=o("HomeEmpty"),T=o("Loading"),Y=o("van-list"),h=o("FooterHeight");return n(),r("div",j,[p(s,{ref_key:"refSportsTabs",ref:S,class:"pb10",onReturnSportsSuccess:q},null,512),"HomeTime"===_(f)?(n(),b(C,{key:0,onReturnTimeSuccess:W})):M("",!0),p(Y,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),finished:A.value,"finished-text":e.$t("live.noMore"),onLoad:U},{default:k((()=>[w.value?(n(),r(v,{key:0},[i("div",{ref_key:"newContainer",ref:d},[(n(!0),r(v,null,m(_(P),((e,a)=>(n(),r(v,{key:a},[0===a?(n(),b(t,{key:0,"offset-top":_(l),container:d.value,"z-index":"52222"},{default:k((()=>[p(H,{class:c({mt20:0!==a}),"send-params":e},null,8,["class","send-params"])])),_:2},1032,["offset-top","container"])):M("",!0),p(u,{"play-title-toggle":!1,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])],64)))),128))],512),_(P).length?M("",!0):(n(),b(g,{key:0}))],64)):M("",!0),!w.value||V.value?(n(),b(T,{key:1,class:c({"new_loading mt10":V.value})},null,8,["class"])):M("",!0)])),_:1},8,["modelValue","finished","finished-text"]),p(h)])}}});F.__scopeId="data-v-1d184612";export{F as default};
