import{u as e,D as a,s as l}from"./index.45799dee.js";import{s,d as t,r as o,o as u,R as n,P as r,F as i,_ as m,Z as c,U as v,q as d,n as p,X as f,Y as g,b as T,w as h,e as b,M as y,O as D,u as Y,c as x,a2 as M}from"./vue.bfc6c13a.js";import{t as H}from"./title-time.58d4efee.js";import{r as k}from"./index.606b93c1.js";const _=["onClick"],w=[(e=>(f("data-v-191b7d12"),e=e(),g(),e))((()=>r("i",{class:"iconfont icon-timeMore"},null,-1)))];var S=s({emits:["returnTimeSuccess"],setup(l,{expose:s,emit:f}){const{t:g}=e(),T=t([{text:g("sport.all"),defaultToggle:!0,values:""},{text:g("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:g("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:g("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),h=t(""),b=t(!1),y=e=>{const[l,s]=e;b.value=!1;const t=T.value.filter((e=>e.defaultToggle)),o=`${a(l).format("YYYY/MM/DD")} - ${a(s).format("YYYY/MM/DD")}`;T.value=[...t,{text:o,values:o}],h.value=o,f("returnTimeSuccess",h.value),p((()=>{var e,a;null==(a=Y.value)||a.scrollTo(null==(e=x.value)?void 0:e.clientWidth,0)}))},D=()=>{b.value=!0};s({active:h});const Y=t(),x=t();return(e,a)=>{const l=o("van-calendar");return u(),n(i,null,[r("div",{ref_key:"refHomeTime",ref:Y,class:"homeTime-Time-Tabs pb10"},[r("div",{ref_key:"refHomeTimePage",ref:x,class:"homeTime-TimePage"},[(u(!0),n(i,null,m(T.value,((e,a)=>(u(),n("div",{key:a,class:c(["item",{active:e.values===h.value}]),onClick:a=>(e=>{h.value=e.values,f("returnTimeSuccess",h.value)})(e)},v(e.text),11,_)))),128)),r("div",{class:"more",onClick:D},w)],512)],512),d(l,{show:b.value,"onUpdate:show":a[0]||(a[0]=e=>b.value=e),type:"range",onConfirm:y},null,8,["show"])],64)}}});S.__scopeId="data-v-191b7d12";const C={class:"homeTime-page"};var V=s({setup(e){const s=t("1"),r=T((()=>l.state.home.refreshChangeTime)),v=t("");h(r,(e=>{e&&(s.value="1",clearTimeout(v.value),v.value=setTimeout((async()=>{await R(),await V()}),100))}));const p=t(!1),f=b({page:1,pageSize:5,gradeType:2,gameType:"FT"}),g=b([]),_=t(0),w=(e=!1,a="")=>{a?j.value=!e:p.value=e},V=async(e="")=>{w(!1,e);const a=await k(f);if(w(!0,e),200===a.code){const l=(null==a?void 0:a.data)||{},{baseData:s,total:t}=l;_.value=t;const{pageSize:o,page:u}=f;e?F.value=!(o*u<t):g.length=0,g.push(...s)}},j=t(!1),F=t(!1),U=t(""),$=()=>{F.value||j.value||(j.value=!0,clearTimeout(U.value),U.value=setTimeout((()=>{f.page++,V(!0)}),100))},A=e=>{if(e)if((e||"").includes("/")){const[a,l]=e.split("-"),s=a.replaceAll("/","-"),t=l.replaceAll("/","-");f.startDate=s+" 00:00:00",f.endDate=t+" 23:59:59"}else f.startDate=a().format("YYYY-MM-DD HH:mm:ss"),f.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else f.startDate="",f.endDate="";F.value=!1,f.page=1,V()},P=e=>{p.value=!0,f.gameType=e,F.value=!1,f.page=1,V()},R=()=>{f.page=1,f.gameType="FT"};return y((()=>{V()})),(e,a)=>{const l=o("ArrowTitle"),t=o("SportsTabs"),r=o("HomeMatchHandicap"),v=o("HomeEmpty"),f=o("Loading"),T=o("van-list"),h=o("FooterHeight"),b=o("van-collapse-item"),y=o("van-collapse");return u(),n("div",C,[d(y,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value=e),accordion:"",border:!1,class:"GlobalCollapse"},{default:D((()=>[d(b,{name:"1"},{title:D((()=>[d(l,{class:"mt10 mb10",src:Y(H),text:e.$t("home.latestMatch")},null,8,["src","text"])])),default:D((()=>[d(t,{class:"pb10",onReturnSportsSuccess:P}),d(S,{onReturnTimeSuccess:A}),d(T,{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),finished:F.value,"finished-text":e.$t("live.noMore"),onLoad:$},{default:D((()=>[e.isShow?M("",!0):(u(),n(i,{key:0},[p.value?(u(),n(i,{key:0},[(u(!0),n(i,null,m(Y(g),((e,a)=>(u(),x(r,{key:a,"send-params":e,class:c({mt20:0!==a})},null,8,["send-params","class"])))),128)),Y(g).length?M("",!0):(u(),x(v,{key:0}))],64)):M("",!0),!p.value||j.value?(u(),x(f,{key:1,class:c({"new_loading mt10":j.value})},null,8,["class"])):M("",!0)],64))])),_:1},8,["modelValue","finished","finished-text"]),d(h)])),_:1})])),_:1},8,["modelValue"])])}}});V.__scopeId="data-v-682ae54b";export{V as default};
