import{s as e,I as a,U as t,u as l,a1 as s}from"./index.cb503d4e.js";import{s as i,b as o,d as n,w as c,j as m,a2 as r,R as v,a as u,o as d,S as p,P as g,V as h,$ as y,X as f,Y as _,n as E,r as w,E as T,q as I,u as b,x as k,W as S,a7 as N,e as D,M as H,y as j,c as M,Z as R,F as x,_ as B,O as L,a0 as P}from"./vue.7833d4f2.js";import{m as C,e as O}from"./index.0aa3d0a3.js";/* empty css                     */import{v as F}from"./video.es.7afabe4f.js";import{u as U}from"./useMatch.0aed8cab.js";import"./getScore.7cf056ba.js";const K={class:"match-video"},V=["src"],$={key:2,class:"mask-loading"},W=(e=>(f("data-v-3fdcb988"),e=e(),_(),e))((()=>g("div",{class:"icon"},null,-1))),A={class:"text"};var G=i({props:{url:String},emits:["on-error"],setup(a,{emit:t}){const l=a,s=o((()=>e.state.match.turnSound)),i=n(""),f=n();c((()=>l.url),(e=>{console.log(e," ---"),S.value=!0,e?w(e):t("on-error","没有播放链接")})),m((()=>{window.addEventListener("message",_)}));const _=e=>{console.log(e,"监听frame消息====")},w=e=>{if(i.value="",e.indexOf(".html")>-1)return i.value=e,void H();b?(b?.src(e),b?.load(),b?.play(),H()):D(e)},T=r(),I=v();let b=null;const k=n(""),S=n(!0),N=n(!1),D=a=>{const l={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:a,type:"application/x-mpegURL"}]};s.value?l.muted=!1:l.muted=!0,E((()=>{b=F(k.value,l,(()=>{b.log("onPlayerReady");document.pictureInPictureElement&&b.exitPictureInPicture().then((()=>{b.log("画中画模式已关闭")}))})),b.on("waiting",(()=>{console.log("waiting",(new Date).getTime())})),b.on("volumechange",(a=>{console.log("监听音量",a),s.value?e.commit("match/SET_TURN_SOUND",!0):e.commit("match/SET_TURN_SOUND",!1)})),b.on("playing",(()=>{console.log("playing",(new Date).getTime()),S.value=!1})),b.on("error",(e=>{S.value=!1,t("on-error",e)})),b.on("enterpictureinpicture",(()=>{N.value=!0,e.commit("match/SET_PIP_GIDM",T.params.id)})),b.on("leavepictureinpicture",(()=>{if(N.value=!1,"MatchDetail"!==T.name){const a=e.state.app.pictureinpictureGidm;I.push(`/match/${a}/bets`)}}))}))},H=()=>{E((()=>{S.value=!1}))},j=()=>{const e=f.value;console.log(e,"iframe 事件加载==="),e.contentWindow.addEventListener("volumechange",M)},M=()=>{console.log("音量发生变化")};return u((()=>{N.value||(b&&b.dispose(),b=null),window.removeEventListener("message",_)})),(e,a)=>(d(),p("div",K,[i.value&&!S.value?(d(),p("iframe",{key:0,ref_key:"videoFrame",ref:f,src:i.value,style:{width:"100%",height:"100%"},frameborder:"0",onLoad:j},null,40,V)):(d(),p("video",{key:1,ref_key:"videoRef",ref:k,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512)),S.value?(d(),p("div",$,[W,g("div",A,h(e.$t("live.effLoading"))+"...",1)])):y("",!0)]))}});G.__scopeId="data-v-3fdcb988";const q={class:"team"},X={class:"team-header"},Y={class:"league"},Z={class:"date"},z={class:"team-container"},J={class:"team-player host"},Q={class:"img-num"},ee={type:4,alt:""},ae={class:"team-score"},te=["innerHTML"],le={class:"team-player away"},se={class:"img-num"},ie={type:5,alt:""};var oe=i({setup(l){const s=U(),i=o((()=>e.state.match.matchInfo)),n=o((()=>"BK"==i.value.gameType?a+"FE/common/live/img_video_bg_BK.jpg":a+"FE/common/live/img_video_bg_FT.jpg"));return(e,a)=>{const l=w("SvgIcon"),o=T("img");return d(),p("div",{class:"match-game",style:S({backgroundImage:"url("+b(n)+")"})},[g("div",q,[g("div",X,[g("div",Y,[I(l,{name:"live-football"}),g("span",null,h(b(i).leagueName),1)]),g("div",Z,h(b(t)(b(i).gameDate,"MM-DD HH:mm")),1)]),g("div",z,[g("div",J,[g("div",Q,[k(g("img",ee,null,512),[[o,b(i).homeLogo]]),g("span",null,h(b(s).getScore(b(i),"H")),1)]),g("strong",null,h(b(i).homeTeam),1)]),g("div",ae,[g("span",{class:"default",innerHTML:b(s).showRBTime(b(i))},null,8,te)]),g("div",le,[g("div",se,[g("span",null,h(b(s).getScore(b(i),"C")),1),k(g("img",ie,null,512),[[o,b(i).awayLogo]])]),g("strong",null,h(b(i).awayTeam),1)])])])],4)}}});oe.__scopeId="data-v-22864e70";const ne={class:"main"},ce={class:"main-menu"},me=["onClick"],re={class:"label"},ve={class:"main-view"},ue={class:"main-chat"};var de=i({setup(a){const t=N((()=>s((()=>import("./ChatRoom.f8de46f4.js")),["/assets/ChatRoom.f8de46f4.js","/assets/ChatRoom.650d6c6a.css","/assets/websocket.05764ded.js","/assets/index.cb503d4e.js","/assets/index.5316321d.css","/assets/vue.7833d4f2.js","/assets/index.0aa3d0a3.js"]))),i=(e,a)=>(e.type.name||(e.type.name=a.name),e),{t:m}=l(),f=r(),_=v(),E=o((()=>e.state.app.showFixedBet)),T=o((()=>f.params.id)),S=D([{title:m("live.bet"),iconName:"live-bet",path:"bets"},{title:m("live.stackBet"),iconName:"live-stack",path:"mixs"},{title:m("live.dataBase"),iconName:"live-data",path:"data"},{title:m("live.more"),iconName:"live-grid",path:"other"}]),F=n({}),U=async()=>{const a=T.value,t=(await C({gidm:a})).data||{};if(F.value={...t},t.detail&&t.detail.length>0){const{game:e}=t.detail[0],a=e.gameInfo||{};F.value.gameInfo=a}e.commit("match/SET_MATCH_INFO",F.value)},K=n(""),V=n(!1),$=async()=>{const a=T.value,t=await O({gidm:a});if(200===t.code){const{streamNa:a}=t.data||{},{liveali:l,live:s}=a||{};if(K.value=(l||s||{}).m3u8,!K.value)return K.value="",V.value=!0,void e.dispatch("app/setKeyValue",{key:"liveBarHeaderHeight",value:"50.333vw"});V.value=!1,e.dispatch("app/setKeyValue",{key:"liveBarHeaderHeight",value:"69vw"})}else K.value="",V.value=!0,e.dispatch("app/setKeyValue",{key:"liveBarHeaderHeight",value:"50.333vw"})},W=()=>{V.value=!0,e.dispatch("app/setKeyValue",{key:"liveBarHeaderHeight",value:"50.333vw"})},A=n(!1);let q=null;const X=()=>{q&&(clearInterval(q),q=null,e.commit("match/SET_NEED_TIMER",!1))};return H((()=>{U(),$(),X(),q=setInterval((()=>{U(),e.commit("match/SET_NEED_TIMER",!0)}),1e4)})),u((()=>{X(),e.commit("match/SET_NEED_TIMER",!1)})),c((()=>T.value),(()=>{U(),$()})),(a,l)=>{const s=w("SvgIcon"),o=w("router-view");return d(),p("div",{class:R(["detail",{"has-bet":b(E)}])},[g("div",{class:R(["match",{"no-video":V.value}])},[k(I(G,{url:K.value,onOnError:W},null,8,["url"]),[[j,!V.value]]),V.value?(d(),M(oe,{key:0})):y("",!0)],2),g("div",ne,[g("div",ce,[(d(!0),p(x,null,B(b(S),((a,t)=>(d(),p("div",{key:t,class:R(["nav",{selected:b(f).path.endsWith(a.path)}]),onClick:t=>{return l=a.path,_.replace(`/match/${T.value}/${l}`),U(),void e.commit("match/SET_NEED_TIMER",!0);var l}},[I(s,{name:a.iconName},null,8,["name"]),g("span",re,h(a.title),1)],10,me)))),128))]),g("div",ve,[I(o,null,{default:L((({Component:e,route:a})=>[(d(),M(P(i(e,a)),{key:"matchId"}))])),_:1})]),g("div",ue,[g("div",{class:"holder",onClick:l[0]||(l[0]=e=>A.value=!0)},h(a.$t("live.clickOpenChat")),1)])]),I(b(t),{show:A.value,"onUpdate:show":l[1]||(l[1]=e=>A.value=e)},null,8,["show"])],2)}}});de.__scopeId="data-v-c98bb9dc";export{de as default};
