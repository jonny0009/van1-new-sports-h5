import{u as e,m as s,E as c}from"./index.e718e516.js";import{e as r,a7 as t}from"./vue.c62eea93.js";const n=s=>{const{t:c}=e(),r=s.se_now?+s.se_now.replace(/[^0-9]/gi,""):0;let t,n;s.sc_adv?"40"===s.sc_game_A&&"40"===s.sc_game_H?"0"===s.sc_adv?(t="A",n=+s.sc_game_H):"1"===s.sc_adv?(n="A",t=s.sc_game_A):(t=s.sc_game_A,n=s.sc_game_H):(t=s.sc_game_A,n=s.sc_game_H):"Adv"===s.sc_game_A||"A"===s.sc_game_A?(t="A",n=s.sc_game_H):"Adv"===s.sc_game_H||"A"===s.sc_game_H?(n="A",t=s.sc_game_A):(t=s.sc_game_A,n=s.sc_game_H);const i=s&&s.sc_iwd&&s.sc_iwd.trim()?JSON.parse(s.sc_iwd):"",_={sc1stA:s?+s.sc_1st_A:0,sc1stH:s?+s.sc_1st_H:0,sc2stA:s?+s.sc_2nd_A:0,sc2stH:s?+s.sc_2nd_H:0,sc3stA:s?+s.sc_3th_A:0,sc3stH:s?+s.sc_3th_H:0,sc4stA:s?+s.sc_4th_A:0,sc4stH:s?+s.sc_4th_H:0,sc5stA:s?+s.sc_5th_A:0,sc5stH:s?+s.sc_5th_H:0};let a={};const m=[];let u=1,l={scoreA:0,scoreH:0},H={};for(let e=1;e<5;e++){const s=o(e,_,l);if(m.push(s.scoreObj),!s.hasNext){u=e,l=s.scorePan,H=s.scoreJu;break}5===e&&(u=e,l=s.scorePan,H=s.scoreJu)}let f="",p="",A="",h="",g="",T="";const $=(""+(n||t?n+":"+t:"")).split(":"),v=$[0],w=$[1];return r?(f=c("home.bout",{number:r})+`${_[`sc${r}stH`]}:${_[`sc${r}stA`]}(${n||t?(n||0)+":"+(t||0):""})`,p=c("home.bout",{number:r}),A=`${_[`sc${r}stH`]||0}:${_[`sc${r}stA`]||0}`,h=`(${n||t?(n||0)+":"+(t||0):""})`,g=_[`sc${r}stH`]||0,T=_[`sc${r}stA`]||0):u&&(f=c("home.bout",{number:u})+`${_[`sc${u}stH`]||0}:${_[`sc${u}stA`]||0}(${n||t?(n||0)+":"+(t||0):""})`,p=c("home.bout",{number:u}),A=`${_[`sc${u}stH`]||0}:${_[`sc${u}stA`]||0}`,g=_[`sc${u}stH`]||0,T=_[`sc${u}stA`]||0,h=`(${n||t?(n||0)+":"+(t||0):""})`),a={scoreArr:m,currPanNum:u,sciwd:i,senow:r>0?r:u,showText:f,scorePan:l,scoreJu:H,score1:A,score2:h,score1Home:g,score1Away:T,score2Home:v,score2Away:w,panNum:p},a},o=(e,s,c)=>{const r={hasNext:!1},t=`sc${e}stA`,n=`sc${e}stH`,o=s[t],i=s[n];return o>=7||i>=7?r.hasNext=!0:6!==o&&6!==i||Math.abs(o-i)>=2&&(r.hasNext=!0),r.hasNext&&(o>i?c.scoreA+=1:c.scoreH+=1),r.scoreObj={[t]:o,[n]:i},r.scoreJu={scoreA:o,scoreH:i},r.scorePan=c,r},i=(s,c=5)=>{const{t:r}=e();if(!s)return"";const t={sc1stA:1*s.sc_1st_A||0,sc1stH:1*s.sc_1st_H||0,sc2stA:1*s.sc_2nd_A||0,sc2stH:1*s.sc_2nd_H||0,sc3stA:1*s.sc_3th_A||0,sc3stH:1*s.sc_3th_H||0,sc4stA:1*s.sc_4th_A||0,sc4stH:1*s.sc_4th_H||0,sc5stA:1*s.sc_5th_A||0,sc5stH:1*s.sc_5th_H||0,sc6stA:1*s.sc_6th_A||0,sc6stH:1*s.sc_6th_H||0,sc7stA:1*s.sc_7th_A||0,sc7stH:1*s.sc_7th_H||0,sc8stA:1*s.sc_8th_A||0,sc8stH:1*s.sc_8th_H||0,sc9stA:1*s.sc_9th_A||0,sc9stH:1*s.sc_9th_H||0,sc10stA:1*s.sc_10th_A||0,sc10stH:1*s.sc_10th_H||0};let n={};const o=[];let i=1;const a={scoreA:0,scoreH:0};let m={};for(let e=1;e<c+1;e++){const s=_(e,t,a);o.push(s.scoreObj),i=e,a.scoreA+=s.scoreJu.scoreA,a.scoreH+=s.scoreJu.scoreH,a.num=s.scorePan.num,(s.scoreJu.scoreA||s.scoreJu.scoreH)&&(m=s.scoreJu)}return a.num=s.se_now?.replace(/[^0-9]/gi,"")||null,s.inningNum&&"0"!==s.inningNum&&(a.num=s.inningNum),n={scoreArr:o,currPanNum:i,showText:r("home.set",{number:a.num})+` (${a.scoreH} : ${a.scoreA})`,scorePan:a,scoreJu:m},n},_=(e,s,c)=>{const r={},t=`sc${e}stA`,n=`sc${e}stH`,o=1*s[t],i=1*s[n];return r.scoreJu={},o>0||i>0?(r.hasNext=!0,c.num=e,r.scoreJu={scoreA:o,scoreH:i}):(c.num||(c.num=1),r.scoreJu.scoreA||(r.scoreJu={scoreA:o,scoreH:i})),r.scoreObj={[t]:o,[n]:i},r.scorePan=c,r},a=s=>{const{t:c}=e(),r={};return r.se_now=s.se_now&&"0"!==s.se_now?s.se_now.replace(/[^0-9]/gi,""):"",r.sc_half=s.sc_half?+s.sc_half?c("home.down"):c("home.up"):"",r.score=i(s,9).scorePan,r.sc_ot=s.sc_ot?+s.sc_ot:"",r.sc_fb=s.sc_fb?JSON.parse(s.sc_fb):"",r.sc_sb=s.sc_sb?JSON.parse(s.sc_sb):"",r.sc_tb=s.sc_tb?JSON.parse(s.sc_tb):"",r},m=(e,s="H")=>{if(e?.gameInfo&&("RB"===e?.showtype||"RB"===e?.showType)){let c,r;if("TN"===e?.gameType){const c=n(e?.gameInfo);return"H"===s?c.scorePan.scoreH||"0":c.scorePan.scoreA||"0"}if("BS"===e.gameType&&e.gidm.indexOf("ib")>-1){const c=a(e.gameInfo);return"H"===s?c.score.scoreH||"0":c.score.scoreA||"0"}return"FT"===e.gameType&&e.gidm.indexOf("ib")>-1&&e.homeTeamSuffix&&e.gameScene&&e.gameScene.scene&&e.gameScene.scene.score&&e.gameScene.scene.score.fullScore?"H"===s?e.gameScene.scene.score.fullScore.team1||"0":e.gameScene.scene.score.fullScore.team2||"0":"H"===s?((e.gameInfo.sc_FT_H||e.gameInfo.sc_game_H)&&(c=e.gameInfo.sc_FT_H||0),c||"0"):((e.gameInfo.sc_FT_H||e.gameInfo.sc_game_H)&&(r=e.gameInfo.sc_FT_A||e.gameInfo.sc_FT_C||0),r||"0")}},{t:u}=s.global,l={0:"",Q1:u("live.Q1"),Q2:u("live.Q2"),Q3:u("live.Q3"),Q4:u("live.Q4"),"1h":u("live.Q1"),"2h":u("live.Q2"),"3h":u("live.Q3"),"4h":u("live.Q4"),OT:u("live.OT"),HT:u("live.HT"),H1:u("live.H1"),H2:u("live.H2"),q1:u("live.Q1"),q2:u("live.Q2"),q3:u("live.Q3"),q4:u("live.Q4"),ot:u("live.OT"),ht:u("live.HT"),h1:u("live.H1"),h2:u("live.H2")};function H(){const e=r({FT:{currTime:0,seNow:"",timer:null},BK:{currTime:0,seNow:"",timer:null}});_();const s=e=>l[e];function o(e){if(!e)return;return`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}`}function _(s){if(s)clearInterval(e[s].timer),e[s].timer=null;else for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){const{timer:s}=e[c];clearInterval(s),e[c].timer=null}}return{BKSection:s,showRBTime:function(r={}){const{showtype:m,gameType:l,gameInfo:H,showType:f,homeTeamSuffix:p,gidm:A}=r,h=i(H,5),g=H&&H.se_now;if("RB"===m||"RB"===f){switch(t((()=>{!function(s={}){const{gameType:c,gameInfo:r}=s,t=["BK","FT"];if(!r||!c||!t.includes(c))return void _();if(!+r.t_count)return e[c].currTime=0,void _(c);e[c].seNow!==r.se_now&&(e[c].seNow=r.se_now,e[c].currTime=+r.t_count);e[c].currTime>=+r.t_count&&e[c].currTime>0&&(e[c].currTime=+r.t_count,_(c),e[c].timer=setInterval((()=>{e[c].currTime=e[c].currTime-1,e[c].currTime<=0&&(e[c].currTime=0,_(c))}),1e3))}(r)})),l){case"FT":if(!H)return u("live.inprogress");if((p?.includes("点球")||p?.includes("點球"))&&(H.raceType="dianqiu",H.teamSuffix="点球大战"),(p?.includes("加时赛")||p?.includes("加時賽"))&&(H.raceType="jiashi",H.teamSuffix="加时"),H.raceType){if("jiashi"===H?.raceType&&("HT^^"===H?.re_time||"HT"===H?.re_time))return u("live.HT");if("jiashi"===H?.raceType&&H?.re_time&&new RegExp("LIVE").test(H?.re_time))return u("live.pause");if("jiashi"===H?.raceType&&H?.re_time.indexOf("^")>-1){const[e,s]=H.re_time.split("^"),c="1H"===e?`上${s}`:`下${s}`;return`${H.teamSuffix}<span class='time-h-number'>${c}</span>`}}if("HT^^"===H?.re_time||"HT"===H?.re_time)return u("live.HT");if(H?.re_time&&new RegExp("LIVE").test(H?.re_time))return u("live.pause");if(H?.re_time&&H?.re_time.indexOf("^")>-1){const[s,c]=H.re_time.split("^");let r="";return r=c.indexOf("'")>-1?`${o(e.FT.currTime)}<span class="time-h-dot">'</span>`:`${o(e.FT.currTime)}`,"1H"===s?`${u("live.H1")}&nbsp;<span class='time-h-Up'>${r}</span>`:`${u("live.H2")}&nbsp;<span class='time-h-d'>${r}</span>`}return H?.re_time?H.re_time:"-:-";case"TN":if(H){const e=n(H);if(e?.sciwd)return u("live.pause");const{panNum:s,score1:c,score2:r}=e;return`${s}<span>${c}${r}</span>`}return u("live.inprogress");case"BS":if(H){if(A&&A.indexOf("ic")>-1)return u("live.inprogress");const e=H?a(H):"";return`<span class="">第${H.inningNum?H?.inningNum:e.se_now>0?e.se_now:e.score.num}局</span>`}return u("live.inprogress");case"BK":return"HT"===H?.se_now||"ht"===H?.se_now?u("live.HT"):H?.se_now.indexOf("OT")>-1||H?.se_now.indexOf("ot")>-1?`加时<span>${c(1e3*e.BK.currTime,"mm:ss")}</span>`:g&&e.BK.currTime?`${s(H?.se_now)}&nbsp;<span>${c(1e3*e.BK.currTime,"mm:ss")}</span>`:!e.BK.currTime&&g?`${s(H.se_now)}&nbsp;<span>00:00</span>`:"";case"BK_AFT":if(H){if("HT"===H?.se_now||"ht"===H?.se_now)return u("live.inprogress");if(H?.se_now.indexOf("OT")>-1||H?.se_now.indexOf("ot")>-1)return`加时 <span>${c(1e3*H.t_count,"mm:ss")}</span>`;const e=H&&H.se_now,r=H&&+H.t_count;return e&&r?`${s(H.se_now)}&nbsp;<span>${c(1e3*H.t_count,"mm:ss")}</span>`:""}return u("live.notstarted");case"OP_TN":if(H){return H?.se_now.replace(/[^0-9]/gi,"")||""}return u("live.inprogress");case"OP_VB":return h?`第${h.scorePan.num}局`:"";case"OP_DJ":case"OP_IH":return u("live.inprogress")}return u("live.inprogress")}return _(),u("live.notstarted")},getScore:m}}export{m as g,H as u};
