import{_ as a,a as e}from"./pitch.63ad02a2.js";import{s,u as l,ab as t,d as n,v as u,ac as c}from"./index.6f65f46b.js";import{s as r,b as i,U as o,d,j as v,r as m,o as f,R as p,q as k,O as g,P as h,W as x,_ as b}from"./vue.1f547d27.js";const y={class:"editName"},$={class:"content"},N={class:"edit-name"},P={class:"userName"},I={class:"explain"},_={key:0,class:"noPitch",src:a},j={key:1,class:"noPitch",src:e},O={class:"explain"},z={key:0,class:"noPitch",src:a},A={key:1,class:"noPitch",src:e},V={class:"explain"},Z={key:0,class:"noPitch",src:a},q={key:1,class:"noPitch",src:e};var w=r({setup(a){const e=i((()=>s.state.user.userInfo)),r=o(),w=d(""),C=d(!1),E=d(!1),S=d(!1),{t:U}=l(),R=d(U("user.EditNickname")),W=a=>{if(!a)return C.value=!1,E.value=!1,void(S.value=!1);-1!==a.indexOf(" ")?C.value=!1:C.value=!0;if(/^[a-zA-Z0-9]{4,16}$/.test(a)?S.value=!0:S.value=!1,a.indexOf("admin")>0||a.indexOf("test")>0)E.value=!1;else{/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{2,16}$/.test(a)?E.value=!0:E.value=!1}};v((()=>{B()}));const B=async()=>{const a={fPlayerId:e.value.playerId},s=await t(a);if(200!==s.code)return n(s.msg);w.value=s.data.nickName,W(s.data.nickName)};return(a,e)=>{const l=m("van-nav-bar"),t=m("van-field");return f(),p("div",y,[k(l,{class:"bg-title",title:R.value,border:!1},{left:g((()=>[h("span",{onClick:e[0]||(e[0]=a=>{r.back()})},x(a.$t("user.cancellation")),1)])),right:g((()=>[h("span",{onClick:e[1]||(e[1]=a=>(async()=>{if(!S.value||!E.value||!C.value)return n(U("user.text11"));const a={nickName:w.value,lang:localStorage.getItem("locale")||u()},e=await c(a);if(200!==e.code)return n(e.msg);n(U("user.EditSuccessfully")),s.dispatch("user/userInfo"),r.push("/user/userInfo")})())},x(a.$t("user.save")),1)])),_:1},8,["title"]),h("div",$,[k(t,{modelValue:w.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>w.value=a),W],class:b([w.value?"bb":""]),name:"",label:"",placeholder:a.$t("user.nickname"),maxlength:"16",clearable:"",rules:[{required:!0,message:a.$t("user.nickname")}]},null,8,["modelValue","class","placeholder","rules"]),h("p",N,x(a.$t("user.fontNickName")),1),h("p",P,x(a.$t("user.text3"))+":",1),h("p",I,[S.value?(f(),p("img",j)):(f(),p("img",_)),h("span",null,x(a.$t("user.font5")),1)]),h("p",O,[E.value?(f(),p("img",A)):(f(),p("img",z)),h("span",null,x(a.$t("user.font6")),1)]),h("p",V,[C.value?(f(),p("img",q)):(f(),p("img",Z)),h("span",null,x(a.$t("user.text6")),1)])])])}}});w.__scopeId="data-v-217266fa";export{w as default};
