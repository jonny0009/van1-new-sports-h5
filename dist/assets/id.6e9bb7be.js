import{d as e,g as a,w as l,a as t,f as s,r as n,K as i,o,R as c,P as m,m as v,I as d,W as u,F as r,S as p,C as g,O as h,u as y,Y as f,Z as b,v as I,c as _,_ as k,$ as T,X as w,a2 as S,U as N,n as j,b as x,D as L,a0 as B}from"./vue.2cb7924b.js";/* empty css                     */import{v as F}from"./video.es.26854ee2.js";import{i as $,l as M,b as E,c as H,r as R,m as D,e as O}from"./index.70a825e5.js";import{w as P}from"./websocket.84b8b5aa.js";import{u as C,s as K,G as W,M as A,I as U,H as V}from"./index.3356d4b9.js";import{u as G,_ as z}from"./index.1bcbebca.js";import{_ as J,a as X,b as Y}from"./live_white_r.4c6985c7.js";import{u as Z}from"./useMatch.3d4bf471.js";import{s as q,a as Q}from"./s_hot2.bba3cb3a.js";const ee=e=>(f("data-v-0dfb52b0"),e=e(),b(),e),ae={class:"chat"},le={class:"item"},te={class:"item-avatar"},se={class:"item-name"},ne=ee((()=>m("em",null,":",-1))),ie={class:"item-cont"},oe={class:"item-avatar"},ce={type:3},me={class:"item-name"},ve=ee((()=>m("em",null,":",-1))),de={class:"item-cont"},ue={class:"chat-bottom"},re=ee((()=>m("button",{"native-type":"submit",hidden:""},null,-1))),pe={class:"action"};var ge=e({props:{matchInfo:{type:Object,default:()=>{}}},setup(e){const f=e,{t:b}=C(),_=a((()=>K.state.user.userInfo)),k=a((()=>{const{isSend:e}=N.value;return 0==e||!H.value})),T=a((()=>{const{isSend:e}=N.value;return!W()||0==e})),w=a((()=>{const{isSend:e,bettingTotal:a}=N.value;return W()?0==e?b("live.needBet",{num:a}):b("live.chatTip")+"...":b("live.needLogin")})),S=a((()=>f.matchInfo));l((()=>S.value),(()=>{j()})),t((()=>{}));const N=s({}),j=async()=>{const e={gidm:S.value.gidm,systemId:S.value.systemId,anchorId:void 0,version:"3.9.0"},a=await $(e);200==a.code&&(N.value=a.data||{},x(),L())},x=async()=>{const{roomNo:e,channelType:a}=N.value,l={roomNo:e,page:1,pageSize:20,channelType:a},t=await M(l),s=(t.extra||{}).messageList||[];if(200==t.code){const e=[];s.forEach((a=>{if(a.msgType&&2==+a.msgType&&a.content){(JSON.parse(a.content||"").bettingData||[]).forEach((a=>{e.push(a.gidm)}))}})),E(s)}},L=async()=>{const{roomNo:e}=N.value,a=`/topic/1/${e}`;P.subscribe(a,(e=>{const a=JSON.parse(e.body);if(a&&1e3===a.action){const[e]=a.data;E(e)}}))},B=s(null),F=s([]),E=e=>{e instanceof Array?F.value=e.reverse().concat(F.value):F.value.push(e),(()=>{const e=B.value||{};I((()=>{e.scrollTop=e&&e.scrollHeight}))})()},H=s(),R=()=>{const e=H.value,{roomNo:a}=N.value,{playerId:l,teamId:t}=_.value,s={token:"1",msgType:"1",roomNo:a,content:e,playerId:l,teamId:t};P.send("/chat/sendMsg",JSON.stringify(s)),H.value=""},D=s(),O=()=>{D.value.$el.scrollIntoView()};return(e,a)=>{const l=n("SvgIcon"),t=n("van-field"),s=n("van-form"),f=n("van-button"),b=i("img");return o(),c("div",ae,[m("div",{class:"chat-section",ref_key:"chatRef",ref:B},[m("div",le,[m("div",te,[v(l,{name:"bot"})]),m("div",se,[d(u(e.$t("live.aiBot")),1),ne]),m("div",ie,u(e.$t("live.chatSys")),1)]),(o(!0),c(r,null,p(F.value,(e=>(o(),c("div",{class:"item",key:e.msgId},[m("div",oe,[g(m("img",ce,null,512),[[b,e.headImg]])]),m("div",me,[d(u(e.nickName),1),ve]),m("div",de,u(e.content),1)])))),128))],512),m("div",ue,[v(s,{onSubmit:R,"submit-on-enter":""},{default:h((()=>[v(t,{ref_key:"msgInputRef",ref:D,modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),autocomplete:"off",placeholder:y(w),disabled:y(T),maxlength:50,onFocus:O},null,8,["modelValue","placeholder","disabled"]),re])),_:1}),m("div",pe,[v(f,{onClick:R,disabled:y(k)},{default:h((()=>[d(u(e.$t("live.send")),1)])),_:1},8,["disabled"])])])])}}});ge.__scopeId="data-v-0dfb52b0";const he={class:"panel-bet"};var ye=e({props:{matchInfo:{type:Object,default:()=>{}},nav:[String,Number]},setup(e){const a=e,{getPlayGroupType:i}=G(),m=s([]),v=async()=>{m.value=await i(a.matchInfo)};return l((()=>a.matchInfo),(()=>{v()})),t((()=>{v()})),(e,l)=>{const t=n("EmptyData");return o(),c("div",he,[0===m.value.length?(o(),_(t,{key:0})):(o(),_(z,{key:1,"data-list":m.value,"match-info":a.matchInfo},null,8,["data-list","match-info"]))])}}});ye.__scopeId="data-v-803e85ae";const fe=e=>(f("data-v-665fd292"),e=e(),b(),e),be={class:"panel-with"},Ie={class:"top-nav"},_e={class:"header"},ke={class:"avatar",type:3,alt:""},Te={class:"title"},we={class:"right"},Se={key:0,class:"state"},Ne={class:"wrapper"},je={class:"summary"},xe={class:"label"},Le={class:"label-flex"},Be={class:"label-flex"},Fe=fe((()=>m("i",{class:"iconfont icon-dianshi"},null,-1))),$e=["innerHTML"],Me={class:"team"},Ee={class:"team-cell"},He={class:"palyer"},Re={src:J,type:4,alt:""},De={class:"score"},Oe={class:"team-cell"},Pe={class:"palyer"},Ce={src:J,type:5,alt:""},Ke={class:"score"},We={class:"ticket"},Ae={class:"ticket-txt"},Ue=fe((()=>m("div",{class:"icon"},[m("img",{src:X,alt:""})],-1))),Ve={class:"info"},Ge={class:"ticket-bet"},ze={class:"betting"},Je={class:"betting-cell bt1"},Xe={class:"betting-cell bt2"},Ye={class:"footer"},Ze={class:"button"},qe=fe((()=>m("img",{src:Y,alt:""},null,-1)));var Qe=e({props:{matchInfo:{type:Object,default:()=>{}}},setup(e){const a=e,f=Z(),b=s(1),I=e=>{b.value=e,w.value=[],S.value=!0,N()},w=s([]),S=s(!1),N=async()=>{const e=1==b.value?E:H,l={page:1,pageSize:50,gidm:a.matchInfo?.gidm},t=await e(l);if(200==t.code){const e=t.data.map((e=>{const a={...e},l={gameType:a.gameType,playType:a.playType,session:a.session},t=new A(a);return{...a,playInfo:l,marketInfo:t}}));w.value=e}S.value=!1};return l((()=>a.matchInfo),(()=>{a.matchInfo?.gidm&&N()})),t((()=>{N()})),(e,l)=>{const t=n("Loading"),s=n("EmptyData"),N=n("SvgIcon"),j=n("BettingOption"),x=i("img"),L=i("play");return o(),c("div",be,[m("div",Ie,[m("span",{class:k({active:1==b.value}),onClick:l[0]||(l[0]=e=>I(1))},u(e.$t("live.curMatch")),3),m("span",{class:k({active:2==b.value}),onClick:l[1]||(l[1]=e=>I(2))},u(e.$t("live.allBetWith")),3)]),S.value?(o(),_(t,{key:0})):0===w.value.length?(o(),_(s,{key:1})):(o(!0),c(r,{key:2},p(w.value,((l,t)=>(o(),c("div",{key:t,class:"item"},[m("div",_e,[g(m("img",ke,null,512),[[x,l.headImg]]),m("div",Te,[m("strong",null,u(l.nikeName),1),m("span",null,"@"+u(l.nikeName),1)]),m("div",we,["RB"==a.matchInfo.showtype?(o(),c("span",Se,u(e.$t("live.inprogress")),1)):T("",!0)])]),m("div",Ne,[m("div",je,u(l.leagueName),1),m("div",xe,[m("div",Le,["FT"==l.gameType?(o(),_(N,{key:0,name:"live-football"})):T("",!0),"BK"==l.gameType?(o(),_(N,{key:1,name:"live-basketball"})):T("",!0),m("span",null,u(l.leagueShortName),1)]),m("div",Be,[Fe,m("span",{innerHTML:y(f).showRBTime(a.matchInfo)},null,8,$e)])]),m("div",Me,[m("div",Ee,[m("div",He,[g(m("img",Re,null,512),[[x,l.homeLogo]]),m("span",null,u(l.homeTeam),1)]),m("div",De,[m("span",null,u(y(f).getScore(a.matchInfo,"H")||"-"),1)])]),m("div",Oe,[m("div",Pe,[g(m("img",Ce,null,512),[[x,l.awayLogo]]),m("span",null,u(l.awayTeam),1)]),m("div",Ke,[m("span",null,u(y(f).getScore(a.matchInfo,"C")||"-"),1)])])]),m("div",We,[m("div",Ae,[Ue,m("div",Ve,[m("strong",null,u(l.betItem),1),g(m("span",null,null,512),[[L,l.playInfo]])])]),m("div",Ge,[m("span",null,"@"+u(l.ior),1)])]),m("div",ze,[m("div",Je,[m("strong",null,u(e.$t("live.betAmout"))+"：",1),m("span",null,[v(N,{name:"usdt"}),d(" "+u(l.golds),1)])]),m("div",Xe,[m("strong",null,u(e.$t("live.betProfit"))+"：",1),m("span",null,[v(N,{name:"usdt"}),d(" "+u((l.golds*l.ior).toFixed(2)),1)])])]),m("div",Ye,[v(j,{"market-info":l.marketInfo},{default:h((()=>[m("div",Ze,[m("span",null,u(e.$t("live.betWith")),1),qe])])),_:2},1032,["market-info"])])])])))),128))])}}});Qe.__scopeId="data-v-665fd292";const ea={class:"item"},aa={class:"photo"},la=["src"],ta={key:0,class:"state"},sa={class:"main"},na={class:"main-title"},ia={class:"main-team"},oa={class:"cell"},ca={class:"head"},ma={type:4,alt:""},va={class:"score"},da={class:"cell"},ua={class:"head"},ra={type:5,alt:""},pa={class:"score"},ga={class:"main-desc"},ha={class:"name"},ya={class:"hots"},fa=["src"];var ba=e({props:{item:{type:Object,default:()=>{}}},setup(e){const l=e,{t:t}=C(),d=a((()=>K.state.app.theme)),r=a((()=>"blue"==d.value?q:Q)),p=s(U),f=a((()=>l.item?.gameInfo)),b=a((()=>{const e=l.item;return e.anchorId?U+e.cover:"BK"==e.gameType?U+"FE/common/live/img_video_bg_BK.jpg":U+"FE/common/live/img_video_bg_FT.jpg"}));a((()=>{const e=l.item.watchTotal.toLocaleString();return"RB"==l.item.showType?t("live.xLooks",{num:e}):t("live.xReserve",{num:e})}));const I=a((()=>({FT:"live-football",BK:"live-basketball",TN:"live-tennisball",OP_BM:"live-badminton"}[l.item.gameType])));return(a,t)=>{const s=n("van-image"),d=n("SvgIcon"),k=i("img");return o(),c("div",ea,[m("div",aa,[v(s,{src:y(b),fit:"cover"},{error:h((()=>[m("img",{src:p.value+"FE/common/live/img_video_bg_FT.jpg",alt:""},null,8,la)])),_:1},8,["src"]),"RB"==e.item.showType?(o(),c("span",ta,u(a.$t("live.hotNow")),1)):T("",!0)]),m("div",sa,[m("div",na,[y(I)?(o(),_(d,{key:0,name:y(I)},null,8,["name"])):T("",!0),m("strong",null,u(e.item.leagueName),1)]),m("div",ia,[m("div",oa,[m("div",ca,[g(m("img",ma,null,512),[[k,e.item.homeLogo]]),m("span",null,u(e.item.homeTeam),1)]),m("div",va,[m("span",null,u(y(f).sc_game_H||y(f).sc_FT_H),1)])]),m("div",da,[m("div",ua,[g(m("img",ra,null,512),[[k,e.item.awayLogo]]),m("span",null,u(e.item.awayTeam),1)]),m("div",pa,[m("span",null,u(y(f).sc_game_A||y(f).sc_FT_C||y(f).sc_FT_A),1)])])]),m("div",ga,[m("div",ha,u(e.item.leagueShortName),1),m("div",ya,[m("img",{src:y(r),alt:""},null,8,fa),m("span",null,u(l.item.watchTotal.toLocaleString()),1)])])])])}}});ba.__scopeId="data-v-d2d43fc2";const Ia={class:"panel-more"};var _a=e({emits:["more-video"],setup(e,{emit:a}){let l=0;const i=s([]),m=s(!1),d=s(!1),u=async()=>{l++;const e={page:l,pageSize:20,videoType:""},a=await R(e),t=a.data||{};200==a.code?(t.list.forEach((e=>{i.value.push(e)})),m.value=!1,d.value=i.value.length==t.total):d.value=!0};return t((()=>{u()})),(e,l)=>{const t=n("EmptyData"),s=n("van-list");return o(),c("div",Ia,[d.value&&0===i.value.length?(o(),_(t,{key:0})):T("",!0),v(s,{loading:m.value,"onUpdate:loading":l[0]||(l[0]=e=>m.value=e),finished:d.value,"immediate-check":!1,"finished-text":0==i.value.length?"":e.$t("live.noMore"),onLoad:u},{default:h((()=>[(o(!0),c(r,null,p(i.value,(e=>(o(),c("div",{class:"more-item",key:e.gidm},[v(ba,{item:e,onClick:l=>(e=>{a("more-video",e)})(e)},null,8,["item","onClick"])])))),128))])),_:1},8,["loading","finished","finished-text"])])}}});_a.__scopeId="data-v-eb407252";const ka={class:"team"},Ta={class:"team-header"},wa={class:"league"},Sa={class:"date"},Na={class:"team-container"},ja={class:"team-player host"},xa={class:"img-num"},La={type:4,alt:""},Ba={class:"team-score"},Fa=["innerHTML"],$a={class:"team-player away"},Ma={class:"img-num"},Ea={type:5,alt:""};var Ha=e({props:{matchInfo:{type:Object,default:()=>{}}},setup(e){const l=e,t=Z(),s=a((()=>l.matchInfo)),d=a((()=>"BK"==s.value.gameType?U+"FE/common/live/img_video_bg_BK.jpg":U+"FE/common/live/img_video_bg_FT.jpg"));return(e,a)=>{const l=n("SvgIcon"),r=i("img");return o(),c("div",{class:"match-game",style:w({backgroundImage:"url("+y(d)+")"})},[m("div",ka,[m("div",Ta,[m("div",wa,[v(l,{name:"live-football"}),m("span",null,u(y(s).leagueName),1)]),m("div",Sa,u(y(V)(y(s).gameDate,"MM-DD HH:mm")),1)]),m("div",Na,[m("div",ja,[m("div",xa,[g(m("img",La,null,512),[[r,y(s).homeLogo]]),m("span",null,u(y(t).getScore(y(s),"H")),1)]),m("strong",null,u(y(s).homeTeam),1)]),m("div",Ba,[m("span",{class:"default",innerHTML:y(t).showRBTime(y(s))},null,8,Fa)]),m("div",$a,[m("div",Ma,[m("span",null,u(y(t).getScore(y(s),"C")),1),g(m("img",Ea,null,512),[[r,y(s).awayLogo]])]),m("strong",null,u(y(s).awayTeam),1)])])])],4)}}});Ha.__scopeId="data-v-3a570eb6";const Ra={key:0,class:"match"},Da=["src"],Oa={class:"match-video"},Pa={key:0,class:"mask-loading"},Ca=(e=>(f("data-v-49b0d515"),e=e(),b(),e))((()=>m("div",{class:"icon"},null,-1))),Ka={class:"text"},Wa={class:"tab-title"};var Aa=e({setup(e){const{t:l}=C(),i=S(),d=N(),f=j([{title:l("live.chatroom"),iconName:"live-chat"},{title:l("live.bet"),iconName:"live-bet"},{title:l("live.betWith"),iconName:"live-bet_add"},{title:l("live.more"),iconName:"live-grid"}]),b=s(0),w=[ge,ye,Qe,_a],$=a((()=>K.state.app.showFixedBet)),M=s({}),E=async(e=i.params.id)=>{const a=(await D({gidm:e})).data||{};if(M.value={...a},a.detail&&a.detail.length>0){const{game:e}=a.detail[0],l=e.gameInfo||{};M.value.gameInfo=l}},H=s({});let R=null;const P=s(""),W=s(null),A=s(!1),U=s(!1),V=s(!1),G=()=>{const{streamNa:e}=H.value,{liveali:a}=e||{};W.value=(a||{}).m3u8;const l={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:W.value,type:"application/x-mpegURL"}]};I((()=>{R=F(P.value,l,(()=>{R.log("onPlayerReady");document.pictureInPictureElement&&R.exitPictureInPicture().then((()=>{R.log("画中画模式已关闭")}))})),R.on("waiting",(()=>{U.value=!0})),R.on("playing",(()=>{U.value=!1})),R.on("error",(()=>{A.value=!0,U.value=!1})),R.on("enterpictureinpicture",(()=>{V.value=!0,K.commit("app/SET_PIP_GIDM",i.params.id)})),R.on("leavepictureinpicture",(()=>{if(V.value=!1,"MatchDetail"!==i.name){const e=K.state.app.pictureinpictureGidm;d.push(`/match/${e}`)}}))}))},z=e=>{X(),A.value=!1,b.value=0,R?.src(e.m3u8),R?.load(),R?.play(),d.replace(`/match/${e.gidm}`),E(e.gidm)};let J=null;const X=()=>{J&&(clearInterval(J),J=null)},Y=e=>{0==e?X():(X(),J=setInterval((()=>{E()}),5e3)),E()};return t((()=>{document.body.style.overflow="hidden",E(),(async()=>{const e=i.params.id,a=await O({gidm:e});200==a.code?(H.value=a.data,G()):(H.value=null,A.value=!0)})()})),x((()=>{document.body.removeAttribute("style"),X(),V.value||(R&&R.dispose(),R=null)})),(e,a)=>{const l=n("SvgIcon"),t=n("van-tab"),s=n("van-tabs");return o(),c("div",{class:k(["live-page",{"has-bet":y($)}])},[W.value?.endsWith("html")?(o(),c("div",Ra,[m("iframe",{src:W.value,width:"100%",height:"100%",frameborder:"0"},null,8,Da)])):T("",!0),g(m("div",{class:k(["match",{"no-vid":A.value}])},[g(m("div",Oa,[m("video",{ref_key:"videoRef",ref:P,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512),U.value?(o(),c("div",Pa,[Ca,m("div",Ka,u(e.$t("live.effLoading"))+"...",1)])):T("",!0)],512),[[L,!A.value]]),A.value?(o(),_(Ha,{key:0,matchInfo:M.value},null,8,["matchInfo"])):T("",!0)],2),[[L,!W.value?.endsWith("html")]]),v(s,{active:b.value,"onUpdate:active":a[0]||(a[0]=e=>b.value=e),swipeable:"",shrink:"","line-height":"0",onChange:Y},{default:h((()=>[(o(!0),c(r,null,p(y(f),((e,a)=>(o(),_(t,null,{title:h((()=>[m("div",Wa,[v(l,{name:e.iconName},null,8,["name"]),m("span",null,u(e.title),1)])])),default:h((()=>[b.value==a?(o(),_(B(w[b.value]),{key:0,matchInfo:M.value,onMoreVideo:z},null,8,["matchInfo"])):T("",!0)])),_:2},1024)))),256))])),_:1},8,["active"])],2)}}});Aa.__scopeId="data-v-49b0d515";export{Aa as default};
