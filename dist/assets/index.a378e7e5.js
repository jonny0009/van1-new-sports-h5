import{u as e,D as a,s as l,r as s,h as t,j as u}from"./index.35f91289.js";import{s as o,d as n,o as r,R as i,P as m,F as v,S as c,_ as d,W as p,n as f,Y as g,Z as T,b as h,w as D,e as Y,M as y,r as _,q as M,O as b,u as k,c as S,$ as H}from"./vue.5fe62a63.js";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang.62e6d400.js";const x=["onClick"],C=[(e=>(g("data-v-540777cd"),e=e(),T(),e))((()=>m("i",{class:"iconfont icon-timeMore"},null,-1)))];var R=o({emits:["returnTimeSuccess","DateShow"],setup(l,{expose:s,emit:t}){const{t:u}=e(),o=n([{text:u("sport.all"),defaultToggle:!0,values:""},{text:u("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:u("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:u("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),g=n(""),T=()=>{t("DateShow",!0)};s({active:g,onConfirm:e=>{const[l,s]=e,u=o.value.filter((e=>e.defaultToggle)),n=`${a(l).format("YYYY/MM/DD")} - ${a(s).format("YYYY/MM/DD")}`;o.value=[...u,{text:n,values:n}],g.value=n,t("returnTimeSuccess",g.value),f((()=>{var e,a;null==(a=h.value)||a.scrollTo(null==(e=D.value)?void 0:e.clientWidth,0)}))}});const h=n(),D=n();return(e,a)=>(r(),i("div",{ref_key:"refHomeTime",ref:h,class:"homeTime-Time-Tabs pb10"},[m("div",{ref_key:"refHomeTimePage",ref:D,class:"homeTime-TimePage"},[(r(!0),i(v,null,c(o.value,((e,a)=>(r(),i("div",{key:a,class:d(["item",{active:e.values===g.value}]),onClick:a=>(e=>{g.value=e.values,t("returnTimeSuccess",g.value)})(e)},p(e.text),11,x)))),128)),m("div",{class:"more",onClick:T},C)],512)],512))}});R.__scopeId="data-v-540777cd";const V={class:"mt10"};var j=o({setup(e){const o=h((()=>l.state.user.scrollNumY)),p=h((()=>{const e=l.state.app.globalBarHeaderHeight||48;return e>60?48:e})),f=n(null),g=n(!1),T=h((()=>{var e,a,l;return(null==(l=null==(a=null==(e=s)?void 0:e.currentRoute)?void 0:a.value)?void 0:l.name)||""})),x=h((()=>l.state.home.refreshChangeTime)),C=n(""),j=n(),F=n();D((()=>o.value),(e=>{e>88&&(j.value.ifAnimated=!1)})),D(x,(e=>{var a;e&&(null==(a=j.value)||a.resetParams(),clearTimeout(C.value),C.value=setTimeout((async()=>{await X(),await J()}),100))}));const O=n(!1),P=n(!1),$=Y({page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===T.value&&($.startDate=a().format("YYYY-MM-DD")+" 00:00:00",$.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const z=n([]),A=n([]),N=n(0),U=(e=!1,a="")=>{a?L.value=!e:O.value=e},I=()=>{P.value=!1,l.dispatch("home/setRefreshChangeTime",(new Date).getTime())},J=async(e="")=>{U(!1,e);const a=await t($);if(U(!0,e),200===a.code){const l=(null==a?void 0:a.data)||{},{baseData:s,total:t}=l;N.value=t;const{pageSize:o,page:n}=$;e?W.value=!(o*n<t):(z.value=[],A.value=[]),A.value.push(...s);const r={},i=[];A.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=u(e.gameDate).format("YYYY/MM/DD");r[a]?r[a].list.push(e):r[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(r).map((e=>{i.push(JSON.parse(JSON.stringify(r[e])))})),z.value=i}},L=n(!1),W=n(!1),q=n(""),B=n(!1),E=()=>{B.value?W.value||L.value||(L.value=!0,clearTimeout(q.value),q.value=setTimeout((()=>{$.page++,J(!0)}),100)):B.value=!0},Z=e=>{g.value=e},G=e=>{g.value=!1,F.value.onConfirm(e)},K=e=>{if(e)if((e||"").includes("/")){const[a,l]=e.split("-"),s=a.replaceAll("/","-"),t=l.replaceAll("/","-");$.startDate=s+" 00:00:00",$.endDate=t+" 23:59:59"}else $.startDate=a().format("YYYY-MM-DD HH:mm:ss"),$.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else $.startDate="",$.endDate="";W.value=!1,$.page=1,J()},Q=e=>{O.value=!0,$.gameType=e,W.value=!1,$.page=1,J()},X=()=>{$.page=1,$.gameType="FT"};return y((()=>{J()})),(e,a)=>{const l=_("van-sticky"),s=_("HomeMatchHandicap"),t=_("HomeEmpty"),u=_("Loading"),o=_("van-list"),n=_("SportsTabs"),h=_("van-pull-refresh"),D=_("FooterHeight"),Y=_("van-calendar");return r(),i("div",{class:"homeTime-page",ref_key:"newContainer",ref:f},[M(h,{modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e),onRefresh:I},{default:b((()=>[M(n,{ref_key:"refSportsTabs",ref:j,class:"pb10",onReturnSportsSuccess:Q},{body:b((()=>[m("div",V,["HomeTime"===k(T)?(r(),S(R,{key:0,ref_key:"refTimeTabs",ref:F,onReturnTimeSuccess:K,onDateShow:Z},null,512)):H("",!0),M(o,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),finished:W.value,"finished-text":e.$t("live.noMore"),onLoad:E},{default:b((()=>[O.value?(r(),i(v,{key:0},[(r(!0),i(v,null,c(z.value,((e,a)=>(r(),i(v,{key:a},[M(l,{"offset-top":k(p),container:f.value,"z-index":"8",class:d({mt10:0!==a})},{default:b((()=>[M(w,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(r(!0),i(v,null,c(e.list,((e,a)=>(r(),S(s,{"play-title-toggle":!1,"send-params":e,class:d({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128)),z.value.length?H("",!0):(r(),S(t,{key:0}))],64)):H("",!0),!O.value||L.value?(r(),S(u,{key:1,class:d({"new_loading mt10":L.value})},null,8,["class"])):H("",!0)])),_:1},8,["modelValue","finished","finished-text"])])])),_:1},512)])),_:1},8,["modelValue"]),M(D),M(Y,{show:g.value,"onUpdate:show":a[2]||(a[2]=e=>g.value=e),type:"range",onConfirm:G},null,8,["show"])],512)}}});j.__scopeId="data-v-a0e474ea";export{j as default};
