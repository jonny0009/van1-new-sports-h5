import{u as e,D as a,s as t,r as s,z as l,A as u,j as o}from"./index.957b49aa.js";import{s as n,d as r,r as m,o as i,R as v,P as c,F as d,S as p,_ as f,W as g,q as T,n as y,Y,Z as h,b as D,w as b,e as _,M,O as S,u as k,c as H,$ as x}from"./vue.1f547d27.js";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang.0bb63f80.js";const C=["onClick"],F=[(e=>(Y("data-v-62aff50e"),e=e(),h(),e))((()=>c("i",{class:"iconfont icon-timeMore"},null,-1)))];var R=n({emits:["returnTimeSuccess"],setup(t,{expose:s,emit:l}){const{t:u}=e(),o=r([{text:u("sport.all"),defaultToggle:!0,values:""},{text:u("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:u("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:u("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),n=r(""),Y=r(!1),h=e=>{const[t,s]=e;Y.value=!1;const u=o.value.filter((e=>e.defaultToggle)),r=`${a(t).format("YYYY/MM/DD")} - ${a(s).format("YYYY/MM/DD")}`;o.value=[...u,{text:r,values:r}],n.value=r,l("returnTimeSuccess",n.value),y((()=>{b.value?.scrollTo(_.value?.clientWidth,0)}))},D=()=>{Y.value=!0};s({active:n});const b=r(),_=r();return(e,a)=>{const t=m("van-calendar");return i(),v(d,null,[c("div",{ref_key:"refHomeTime",ref:b,class:"homeTime-Time-Tabs pb10"},[c("div",{ref_key:"refHomeTimePage",ref:_,class:"homeTime-TimePage"},[(i(!0),v(d,null,p(o.value,((e,a)=>(i(),v("div",{key:a,class:f(["item",{active:e.values===n.value}]),onClick:a=>(e=>{n.value=e.values,l("returnTimeSuccess",n.value)})(e)},g(e.text),11,C)))),128)),c("div",{class:"more",onClick:D},F)],512)],512),T(t,{show:Y.value,"onUpdate:show":a[0]||(a[0]=e=>Y.value=e),type:"range",onConfirm:h},null,8,["show"])],64)}}});R.__scopeId="data-v-62aff50e";const V={class:"mt10"};var j=n({setup(e){const n=D((()=>t.state.user.scrollNumY)),g=D((()=>{const e=t.state.app.globalBarHeaderHeight||48;return e>60?48:e})),y=r(null),Y=D((()=>s?.currentRoute?.value?.name||"")),h=D((()=>t.state.home.refreshChangeTime)),C=r(""),F=r();b(h,(e=>{e&&(F.value?.resetParams(),clearTimeout(C.value),C.value=setTimeout((async()=>{await K(),await U()}),100))})),b((()=>n.value),(e=>{e>88&&(F.value.ifAnimated=!1)}));const j=r(!1),z=r(!1),A=r([]);(async()=>{const e=await l({showType:"FT"});if(200===e?.code&&e?.data){const a=e.data?.stResult||[];A.value=a.map((e=>({gameType:e.gameType,gameCount:1*e.num})))}})();const N=_({gameTypeSon:"",showtype:"FT",timeStage:0,gameSort:3,dateStage:0,isNovice:"Y",leagueIds:"",onlyFavorite:0,page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===Y.value&&(N.startDate=a().format("YYYY-MM-DD")+" 00:00:00",N.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const O=r([]),P=r([]),$=r(0),I=(e=!1,a="")=>{a?J.value=!e:j.value=e},L=()=>{z.value=!1,j.value=!0,W.value=!1,N.page=1,U()},U=async(e="")=>{I(!1,e);const a=await u(N);if(I(!0,e),200===a.code){const t=a?.data||{},{baseData:s,total:l}=t?.matchList;$.value=l;const{pageSize:u,page:n}=N;e?W.value=!(u*n<l):(O.value=[],P.value=[]),P.value.push(...s);const r={},m=[];P.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=o(e.gameDate).format("YYYY/MM/DD");r[a]?r[a].list.push(e):r[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(r).map((e=>{m.push(JSON.parse(JSON.stringify(r[e])))})),O.value=m}},J=r(!1),W=r(!1),q=r(""),B=r(!1),E=()=>{B.value?W.value||J.value||(J.value=!0,clearTimeout(q.value),q.value=setTimeout((()=>{N.page++,U(!0)}),100)):B.value=!0},Z=e=>{if(e)if((e||"").includes("/")){const[a,t]=e.split("-"),s=a.replaceAll("/","-"),l=t.replaceAll("/","-");N.startDate=s+" 00:00:00",N.endDate=l+" 23:59:59"}else N.startDate=a().format("YYYY-MM-DD HH:mm:ss"),N.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else N.startDate="",N.endDate="";W.value=!1,N.page=1,U()},G=e=>{j.value=!0,N.gameType=e,"all"===e&&(N.gameType=""),W.value=!1,N.page=1,U()},K=()=>{N.page=1,N.gameType="FT"};return M((()=>{U()})),(e,a)=>{const t=m("van-sticky"),s=m("HomeMatchHandicap"),l=m("HomeEmpty"),u=m("Loading"),o=m("van-list"),n=m("van-pull-refresh"),r=m("FooterHeight"),h=m("SportsTabs");return i(),v("div",{class:"homeTime-page",ref_key:"newContainer",ref:y},[T(h,{ref_key:"refSportsTabs",ref:F,class:"pb10",isCustom:!0,tabs:A.value,onReturnSportsSuccess:G,ifSportToday:!0},{body:S((()=>[c("div",V,["HomeTime"===k(Y)?(i(),H(R,{key:0,onReturnTimeSuccess:Z})):x("",!0),T(n,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e),onRefresh:L},{default:S((()=>[T(o,{modelValue:J.value,"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),finished:W.value,"finished-text":e.$t("live.noMore"),onLoad:E},{default:S((()=>[j.value?(i(),v(d,{key:0},[(i(!0),v(d,null,p(O.value,((e,a)=>(i(),v(d,{key:a},[T(t,{"offset-top":k(g),container:y.value,"z-index":"5",class:f({mt10:0!==a})},{default:S((()=>[T(w,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(i(!0),v(d,null,p(e.list,((e,a)=>(i(),H(s,{"play-title-toggle":!1,"send-params":e,class:f({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128)),O.value.length?x("",!0):(i(),H(l,{key:0}))],64)):x("",!0),!j.value||J.value?(i(),H(u,{key:1,class:f({"new_loading mt10":J.value})},null,8,["class"])):x("",!0)])),_:1},8,["modelValue","finished","finished-text"])])),_:1},8,["modelValue"]),T(r)])])),_:1},8,["tabs"])],512)}}});j.__scopeId="data-v-1a142583";export{j as default};
