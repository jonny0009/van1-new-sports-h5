import{u as e,U as a,s as l,w as t,h as s}from"./index.74460f18.js";import{s as u,d as o,r as n,o as r,S as i,P as m,F as v,_ as c,Z as d,V as p,q as f,n as g,X as T,Y as h,b as D,w as Y,e as y,M,u as S,c as b,$ as k,O as H}from"./vue.7833d4f2.js";import{_,c as x}from"./index.02d761cd.js";const w=["onClick"],C=[(e=>(T("data-v-62aff50e"),e=e(),h(),e))((()=>m("i",{class:"iconfont icon-timeMore"},null,-1)))];var V=u({emits:["returnTimeSuccess"],setup(l,{expose:t,emit:s}){const{t:u}=e(),T=o([{text:u("sport.all"),defaultToggle:!0,values:""},{text:u("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:u("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:u("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),h=o(""),D=o(!1),Y=e=>{const[l,t]=e;D.value=!1;const u=T.value.filter((e=>e.defaultToggle)),o=`${a(l).format("YYYY/MM/DD")} - ${a(t).format("YYYY/MM/DD")}`;T.value=[...u,{text:o,values:o}],h.value=o,s("returnTimeSuccess",h.value),g((()=>{var e,a;null==(a=M.value)||a.scrollTo(null==(e=S.value)?void 0:e.clientWidth,0)}))},y=()=>{D.value=!0};t({active:h});const M=o(),S=o();return(e,a)=>{const l=n("van-calendar");return r(),i(v,null,[m("div",{ref_key:"refHomeTime",ref:M,class:"homeTime-Time-Tabs pb10"},[m("div",{ref_key:"refHomeTimePage",ref:S,class:"homeTime-TimePage"},[(r(!0),i(v,null,c(T.value,((e,a)=>(r(),i("div",{key:a,class:d(["item",{active:e.values===h.value}]),onClick:a=>(e=>{h.value=e.values,s("returnTimeSuccess",h.value)})(e)},p(e.text),11,w)))),128)),m("div",{class:"more",onClick:y},C)],512)],512),f(l,{show:D.value,"onUpdate:show":a[0]||(a[0]=e=>D.value=e),type:"range",onConfirm:Y},null,8,["show"])],64)}}});V.__scopeId="data-v-62aff50e";const F={class:"homeTime-page"};var R=u({setup(e){const u=D((()=>{const e=l.state.app.globalBarHeaderHeight||48;return e>60?48:e})),p=o(null),g=D((()=>{var e,a,l;return(null==(l=null==(a=null==(e=t)?void 0:e.currentRoute)?void 0:a.value)?void 0:l.name)||""})),T=D((()=>l.state.home.refreshChangeTime)),h=o(""),w=o();Y(T,(e=>{var a;e&&(null==(a=w.value)||a.resetParams(),clearTimeout(h.value),h.value=setTimeout((async()=>{await W(),await I()}),100))}));const C=o(!1),R=o(!1),j=y({gameTypeSon:"",showtype:"FT",timeStage:0,gameSort:3,dateStage:0,isNovice:"Y",leagueIds:"",onlyFavorite:0,page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===g.value&&(j.startDate=a().format("YYYY-MM-DD")+" 00:00:00",j.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const O=o([]),P=o([]),U=o(0),$=(e=!1,a="")=>{a?L.value=!e:C.value=e},z=()=>{R.value=!1,l.dispatch("home/setRefreshChangeTime",(new Date).getTime())},I=async(e="")=>{$(!1,e);const a=await x(j);if($(!0,e),200===a.code){const l=(null==a?void 0:a.data)||{},{baseData:t,total:u}=null==l?void 0:l.matchList;U.value=u;const{pageSize:o,page:n}=j;e?N.value=!(o*n<u):(O.value=[],P.value=[]),P.value.push(...t);const r={},i=[];P.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=s(e.gameDate).format("YYYY/MM/DD");r[a]?r[a].list.push(e):r[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(r).map((e=>{i.push(JSON.parse(JSON.stringify(r[e])))})),O.value=i}},L=o(!1),N=o(!1),A=o(""),J=o(!1),q=()=>{J.value?N.value||L.value||(L.value=!0,clearTimeout(A.value),A.value=setTimeout((()=>{j.page++,I(!0)}),100)):J.value=!0},B=e=>{if(e)if((e||"").includes("/")){const[a,l]=e.split("-"),t=a.replaceAll("/","-"),s=l.replaceAll("/","-");j.startDate=t+" 00:00:00",j.endDate=s+" 23:59:59"}else j.startDate=a().format("YYYY-MM-DD HH:mm:ss"),j.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else j.startDate="",j.endDate="";N.value=!1,j.page=1,I()},E=e=>{C.value=!0,j.gameType=e,N.value=!1,j.page=1,I()},W=()=>{j.page=1,j.gameType="FT"};return M((()=>{I()})),(e,a)=>{const l=n("SportsTabs"),t=n("van-sticky"),s=n("HomeMatchHandicap"),o=n("HomeEmpty"),T=n("Loading"),h=n("van-list"),D=n("van-pull-refresh"),Y=n("FooterHeight");return r(),i("div",F,[f(l,{ref_key:"refSportsTabs",ref:w,class:"pb10",onReturnSportsSuccess:E},null,512),"HomeTime"===S(g)?(r(),b(V,{key:0,onReturnTimeSuccess:B})):k("",!0),f(D,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),onRefresh:z},{default:H((()=>[f(h,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),finished:N.value,"finished-text":e.$t("live.noMore"),onLoad:q},{default:H((()=>[C.value?(r(),i(v,{key:0},[m("div",{ref_key:"newContainer",ref:p},[(r(!0),i(v,null,c(O.value,((e,a)=>(r(),i(v,{key:a},[f(t,{"offset-top":S(u),container:p.value,"z-index":"5",class:d({mt10:0!==a})},{default:H((()=>[f(_,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(r(!0),i(v,null,c(e.list,((e,a)=>(r(),b(s,{"play-title-toggle":!1,"send-params":e,class:d({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128))],512),O.value.length?k("",!0):(r(),b(o,{key:0}))],64)):k("",!0),!C.value||L.value?(r(),b(T,{key:1,class:d({"new_loading mt10":L.value})},null,8,["class"])):k("",!0)])),_:1},8,["modelValue","finished","finished-text"])])),_:1},8,["modelValue"]),f(Y)])}}});R.__scopeId="data-v-52dc5da6";export{R as default};
