import{u as e,s as a,I as l,C as t,M as s,r as i}from"./index.12619fe5.js";import{u as o}from"./useMatch.25f53009.js";import{s as n,a as v}from"./s_hot2.bba3cb3a.js";import{s as u,b as c,d,r,E as m,o as p,R as g,P as f,q as y,O as h,u as k,W as T,$ as b,c as I,x as _,w,j as x,a as R,n as S,V as B,B as O,F as N,S as j,Y as C,Z as D,M as L,e as M,_ as V}from"./vue.1f547d27.js";/* empty css                     */import{v as E}from"./video.es.ffa9d32d.js";import{d as F,a as H,g as $,n as U}from"./index.583c9d17.js";import{l as z}from"./live-bg-error.28d01b38.js";import"./getScore.b1ff1c74.js";const A={class:"item"},K={class:"item-photo"},P=["src"],q={key:0,class:"state"},W={class:"footer"},Y=["innerHTML"],Z={key:1},G={key:1,class:"mask-reseve"},J={class:"item-title"},Q={class:"item-team"},X={class:"cell"},ee={class:"head"},ae={type:4,alt:""},le={class:"score"},te={class:"cell"},se={class:"head"},ie={type:5,alt:""},oe={class:"score"},ne={class:"item-desc"},ve={class:"name"},ue={class:"hots"},ce=["src"];var de=u({props:{item:{type:Object,default:()=>{}}},setup(s){const i=s,{t:u}=e(),w=c((()=>a.state.app.theme)),x=c((()=>"blue"==w.value?n:v)),R=d(l),S=o(),B=c((()=>i.item?.gameInfo)),O=c((()=>{const e=i.item;return e.anchorId?l+e.cover:"BK"==e.gameType?l+"FE/common/live/img_video_bg_BK.jpg":l+"FE/common/live/img_video_bg_FT.jpg"})),N=c((()=>{const e=i.item.watchTotal.toLocaleString();return"RB"==i.item.showType?u("live.xLooks",{num:e}):u("live.xReserve",{num:e})})),j=c((()=>({FT:"live-football",BK:"live-basketball",TN:"live-tennisball",OP_BM:"live-badminton"}[i.item.gameType])));return(e,a)=>{const l=r("van-image"),o=r("SvgIcon"),n=m("img");return p(),g("div",A,[f("div",K,[y(l,{src:k(O),fit:"cover"},{error:h((()=>[f("img",{src:R.value+"FE/common/live/img_video_bg_FT.jpg",alt:""},null,8,P)])),_:1},8,["src"]),"RB"==s.item.showType?(p(),g("div",q,T(e.$t("live.hotNow")),1)):b("",!0),f("div",W,["RB"==s.item.showType?(p(),g("span",{key:0,innerHTML:k(S).showRBTime(s.item)},null,8,Y)):(p(),g("span",Z,T(k(t)(s.item.gameDate,"MM-DD HH:mm")),1))]),"RB"!=s.item.showType?(p(),g("div",G,[f("span",null,T(e.$t("live.xHas",{num:k(N)})),1),f("span",null,T(e.$t("live.playNow")),1)])):b("",!0)]),f("div",J,[k(j)?(p(),I(o,{key:0,name:k(j)},null,8,["name"])):b("",!0),f("strong",null,T(s.item.leagueName),1)]),f("div",Q,[f("div",X,[f("div",ee,[_(f("img",ae,null,512),[[n,s.item.homeLogo]]),f("span",null,T(s.item.homeTeam),1)]),f("div",le,[f("span",null,T(k(B).sc_game_H||k(B).sc_FT_H),1)])]),f("div",te,[f("div",se,[_(f("img",ie,null,512),[[n,s.item.awayLogo]]),f("span",null,T(s.item.awayTeam),1)]),f("div",oe,[f("span",null,T(k(B).sc_game_A||k(B).sc_FT_C||k(B).sc_FT_A),1)])])]),f("div",ne,[f("div",ve,T(s.item.nickname||s.item.leagueShortName),1),f("div",ue,[f("img",{src:k(x),alt:""},null,8,ce),f("span",null,T(i.item.watchTotal.toLocaleString()),1)])])])}}});de.__scopeId="data-v-075ee586";const re=e=>(C("data-v-5f00125e"),e=e(),D(),e),me={class:"video-header-info"},pe={class:"title text-overflow"},ge={class:"info"},fe={type:"1",alt:""},ye={class:"name text-overflow"},he={key:1,class:"mask-loading"},ke=re((()=>f("div",{class:"icon"},null,-1))),Te={class:"text"},be={key:2,class:"video-error"},Ie=["src"],_e=re((()=>f("div",{class:"error-title"},"播放异常",-1))),we={class:"match-info"},xe={class:"match-lengua text-overflow"},Re={class:"team-info text-overflow"},Se={class:"team-icon",alt:"",type:4,style:{"object-fit":"contain"}},Be={class:"team-info text-overflow"},Oe={class:"team-icon",alt:"",type:5,style:{"object-fit":"contain"}},Ne={class:"play-info-box"},je={key:0,class:"play-item"},Ce={class:"play-name"},De={class:"ratio-name text-overflow"},Le={class:"ratio-ior"},Me={key:1,class:"play-item"},Ve={class:"play-name"},Ee={class:"ratio-name text-overflow"},Fe={class:"ratio-ior"};var He=u({props:{videoInfo:{type:Object,default:()=>{}},active:{type:Boolean,default:!1}},setup(e,{expose:a}){const l=e,t=d();w((()=>l.active),(async()=>{l.active?H?H&&H.play():(u(),$()):H&&H.pause()}));const i=c((()=>{const{R:e}=v.value;if(e){const{game:a,ratioData:l}=e,t=l.map((e=>{const l={...e,...a,...v.value,playType:"R",systemId:n.value.systemId};return{marketInfo:new s(l)}}));return{...a,...v.value,playType:"R",list:t}}return null})),o=c((()=>{const{OU:e}=v.value;if(e){const{game:a,ratioData:l}=e,t=l.map((e=>{const l={...e,...a,...v.value,playType:"OU",systemId:n.value.systemId};return{marketInfo:new s(l)}}));return{...a,...v.value,playType:"OU",list:t}}return null})),n=c((()=>!!l.videoInfo?.gameList?.length&&l.videoInfo.gameList[0])),v=d({}),u=async()=>{if(!n?.value)return!1;const e=n?.value.gidm,a=await F({gidm:e});200===a?.code&&a?.data&&(v.value=a?.data)};x((()=>{l.active&&($(),u())})),R((()=>{U()}));const C=d(""),D=d(null),L=d(!1),M=d(!0),V=d(!1);let H=null;const $=()=>{D.value=l.videoInfo.videoUrl,L.value=!1,M.value=!0,V.value=!1;const e={preload:"auto",width:"100%",height:"100%",loop:!0,autoplay:!0,muted:!0,controls:!1,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:D.value,type:"video/mp4"}]};S((()=>{H||(H=E(C.value,e)),H.muted(!1),H?.play(),H.on("waiting",(()=>{V.value=!0,L.value=!1,M.value=!1})),H.on("playing",(()=>{V.value=!1,L.value=!1,M.value=!1})),H.on("error",(()=>{L.value=!0,V.value=!1})),H.on("pause",(()=>{M.value=!0})),H.on("click",(()=>{A()}))}))},U=()=>{H&&H.dispose(),H=null},A=()=>{if(L.value)return!1;H.paused()?H.play():H.pause()};return a({videoTarget:t,play:()=>{H?H&&H.play():(u(),$())},pause:()=>{H&&H.pause()}}),(a,l)=>{const s=r("SvgIcon"),n=r("SportsIcon"),u=r("BettingOption"),c=m("img"),d=m("play");return p(),g("div",{class:"room-wrap",ref_key:"videoTarget",ref:t},[f("div",me,[f("div",pe,T(e.videoInfo.videoTitle),1),f("div",ge,[_(f("img",fe,null,512),[[c,e.videoInfo.leagueIcon]]),f("div",ye,T(e.videoInfo.leagueName||e.videoInfo.leagueNameCn),1)])]),f("video",{ref_key:"videoRef",ref:C,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512),V.value||L.value||!M.value?b("",!0):(p(),g("div",{key:0,class:"video-pause",onClick:A},[y(s,{class:"first-icon",name:"live-pause"})])),V.value?(p(),g("div",he,[ke,f("div",Te,T(a.$t("live.effLoading"))+"...",1)])):L.value?(p(),g("div",be,[f("img",{src:k(z),class:"bg"},null,8,Ie),_e])):b("",!0),k(i)||k(o)?(p(),g("div",{key:3,class:"match-wrap",onClick:l[0]||(l[0]=B((()=>{}),["stop"]))},[f("div",we,[f("div",xe,[y(n,{class:"sports-icon","icon-src":v.value.gameType},null,8,["icon-src"]),O(" "+T(v.value.leagueShortName||v.value.leagueName),1)]),f("div",Re,[_(f("img",Se,null,512),[[c,v.value.homeLogo]]),O(" "+T(v.value.awayTeamAbbr||v.value.awayTeam),1)]),f("div",Be,[_(f("img",Oe,null,512),[[c,v.value.awayLogo]]),O(" "+T(v.value.homeTeamAbbr||v.value.homeTeam),1)])]),f("div",Ne,[k(i)?(p(),g("div",je,[_(f("div",Ce,null,512),[[d,k(i)]]),(p(!0),g(N,null,j(k(i).list,((e,a)=>(p(),I(u,{key:a,"market-info":e.marketInfo,class:"betting-option"},{default:h((()=>[f("span",De,T(e.marketInfo.ratioName),1),f("span",Le,T(e.marketInfo.vior),1)])),_:2},1032,["market-info"])))),128))])):b("",!0),k(o)?(p(),g("div",Me,[_(f("div",Ve,null,512),[[d,k(o)]]),(p(!0),g(N,null,j(k(o).list,((e,a)=>(p(),I(u,{key:a,"market-info":e.marketInfo,class:"betting-option"},{default:h((()=>[f("span",Ee,T(e.marketInfo.ratioName),1),f("span",Fe,T(e.marketInfo.vior),1)])),_:2},1032,["market-info"])))),128))])):b("",!0)])])):b("",!0)],512)}}});He.__scopeId="data-v-5f00125e";const $e={class:"short-video-container"},Ue={class:"list"};var ze=u({props:{videos:{type:Array,default:()=>[]}},setup(e){x((()=>{l()}));const a=d();w((()=>a.value),(()=>{console.log(123)}));const l=()=>{window.onscroll=()=>{a.value?.forEach((e=>{const a=e.videoTarget.getBoundingClientRect();a.y>100&&a.y<300?e.play():e.pause()}))}};return(l,t)=>(p(),g("div",$e,[f("div",Ue,[(p(!0),g(N,null,j(e.videos,((e,l)=>(p(),I(He,{ref_for:!0,ref_key:"videoRefs",ref:a,key:l,videoInfo:e},null,8,["videoInfo"])))),128))])]))}});ze.__scopeId="data-v-58eb33ee";const Ae={class:"tab-title"},Ke={key:0,class:"title-group"},Pe={class:"title"},qe={key:0,class:"next"},We=(e=>(C("data-v-64f1e7ad"),e=e(),D(),e))((()=>f("div",{class:"img"},[f("img",{src:"/assets/no_an_ma.134981fa.png",alt:""})],-1))),Ye=["innerHTML"],Ze={class:"grid-wrapper"},Ge={class:"title-group"},Je={class:"title"},Qe={class:"grid-wrapper"},Xe={class:"title-group"},ea={class:"title"},aa=["onClick"],la=["errorImg"],ta={class:"video-user-info"},sa={type:"1",alt:""},ia={class:"name text-overflow"},oa={class:"video-content text-overflow-2"};var na=u({setup(l){L((()=>{D()}));const t=d(["HOT","ComingSoon","VIDEO"]),s=c((()=>a.state.app.showFixedBet)),{t:o}=e(),n=M([{type:"RB",title:o("live.hot"),iconName:"live-hot"},{type:"FT",title:o("live.football"),iconName:"live-football"},{type:"BK",title:o("live.basketball"),iconName:"live-basketball"},{type:"TN",title:o("live.tennisball"),iconName:"live-tennisball"},{type:"OP_BM",title:o("live.badminton"),iconName:"live-badminton"},{type:"SORTVIDEO",title:o("home.shortVideoTitle"),iconName:"live-badminton"}]),v=d("RB"),u=d(-1),w=d("");let x=M({});const R=d([]),S=d(!0),B=d(!1),O=d(!1),C=()=>{D()},D=()=>{["SORTVIDEO"].includes(v.value)?(R.value=[],J()):(async()=>{R.value.length=0,O.value&&(O.value=!1),S.value=!0;const e={page:1,pageSize:100};"RB"===v.value?(e.rbType=1,e.gameType=void 0):(e.rbType=void 0,e.gameType=v.value);const a=await H(e).finally((()=>{S.value=!1})),l=a.data;if(200===a.code){if("RB"===v.value&&0===l.list.length){B.value=!0;const e=await U();return 200===e.code&&e.data&&e.data>e.systemTime?(u.value=e.data-e.systemTime,void(x=setInterval((()=>{u.value-=1e3,0===u.value&&clearInterval(x),F()}),1e3))):void 0}l.list.forEach((e=>{R.value.push(e)})),B.value=R.value.length===l.total}else B.value=!0})(),["RB"].includes(v.value)?(Y.value.page=0,Z(),K()):(A.value=[],P.value=[])},E=e=>{i.push(`/match/${e.gidm}`),a.dispatch("app/setMatchLiveIndex",1)},F=()=>{if(u.value<0)return clearInterval(x),void D();function e(e){return e<10?"0"+e:e}const a=Math.round(u.value/1e3);let l=parseInt(""+a/3600%24),t=parseInt(""+a/60%60),s=a%60;l=e(l),t=e(t),s=e(s),w.value=l+":"+t+":"+s},A=d([]),K=async()=>{const e=await H({page:1,pageSize:100,rbType:2}),a=e?.data?.list||[];200===e.code&&a.length&&(A.value=a)},P=d([]),q=d(!0),W=d(0),Y=d({page:0,pageSize:10}),Z=async()=>{if(q.value=!0,W.value>0&&Y.value.page*Y.value.pageSize>=W.value)return!1;Y.value.page++,1===Y.value.page&&(P.value.length=0);const e=await $({...Y.value}).finally((()=>{q.value=!1})),a=e?.data?.videoData||[];W.value=e?.data?.total||0,200===e.code&&a.length&&P.value.push(...a)},G=d([]),J=async()=>{const e=await $({page:1,pageSize:10}),a=e?.data?.videoData||[];200===e.code&&a.length&&(G.value=a)};return(e,a)=>{const l=r("SvgIcon"),o=r("EmptyData"),c=r("van-list"),d=r("van-collapse-item"),x=r("van-collapse"),B=r("van-tab"),L=r("van-tabs"),M=r("van-pull-refresh"),F=m("img");return p(),g("div",{class:V(["live-page",{"has-bet":k(s)}])},[y(M,{modelValue:O.value,"onUpdate:modelValue":a[4]||(a[4]=e=>O.value=e),onRefresh:D},{default:h((()=>[y(L,{active:v.value,"onUpdate:active":a[3]||(a[3]=e=>v.value=e),swipeable:"",sticky:"",shrink:"",border:!1,"offset-top":"12.8vw","line-height":"0",onChange:C},{default:h((()=>[(p(!0),g(N,null,j(k(n),((s,n)=>(p(),I(B,{key:n,name:s.type},{title:h((()=>[f("div",Ae,[f("span",null,T(s.title),1)])])),default:h((()=>[y(x,{modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value=e)},{default:h((()=>[["SORTVIDEO"].includes(v.value)?b("",!0):(p(),I(d,{key:0,"is-link":!1,class:"collapse-item",name:"HOT"},{title:h((()=>["RB"===s.type?(p(),g("div",Ke,[y(l,{class:"first-icon",name:"home-hot-match"}),f("span",Pe,T(e.$t("home.hotMatchTitle")),1),y(l,{class:V(["title-icon",{open:t.value.includes("HOT")}]),name:"home-triangle"},null,8,["class"])])):b("",!0)])),default:h((()=>[0===R.value.length&&u.value>0&&"RB"===v.value?(p(),g("div",qe,[We,f("p",{innerHTML:e.$t("live.nextAM",{num:w.value})},null,8,Ye)])):b("",!0),!S.value&&0===R.value.length||0===R.value.length&&u.value<0&&!S.value?(p(),I(o,{key:1})):b("",!0),y(c,{loading:S.value,"onUpdate:loading":a[0]||(a[0]=e=>S.value=e),finished:!S.value},{default:h((()=>[f("div",Ze,[(p(!0),g(N,null,j(R.value,(e=>(p(),g("div",{key:e.gidm,class:"flex-item"},[y(de,{item:e,onClick:a=>E(e)},null,8,["item","onClick"])])))),128))])])),_:1},8,["loading","finished"])])),_:2},1024)),A.value.length?(p(),I(d,{key:1,"is-link":!1,class:"collapse-item",name:"ComingSoon"},{title:h((()=>[f("div",Ge,[y(l,{class:"first-icon",name:"home-coming"}),f("span",Je,T(e.$t("home.comingSoonTitle")),1),y(l,{class:V(["title-icon",{open:t.value.includes("ComingSoon")}]),name:"home-triangle"},null,8,["class"])])])),default:h((()=>[f("div",Qe,[(p(!0),g(N,null,j(A.value,(e=>(p(),g("div",{key:e.gidm,class:"flex-item"},[y(de,{item:e,onClick:a=>E(e)},null,8,["item","onClick"])])))),128))])])),_:1})):b("",!0),["RB"].includes(v.value)?(p(),I(d,{key:2,"is-link":!1,class:"collapse-item",name:"VIDEO"},{title:h((()=>[f("div",Xe,[y(l,{class:"first-icon",name:"home-short-video"}),f("span",ea,T(e.$t("home.shortVideoTitle")),1),y(l,{class:V(["title-icon",{open:t.value.includes("VIDEO")}]),name:"home-triangle"},null,8,["class"])])])),default:h((()=>[q.value||P.value.length?(p(),I(c,{key:0,loading:q.value,"onUpdate:loading":a[1]||(a[1]=e=>q.value=e),finished:Y.value.page*Y.value.pageSize>=W.value&&!q.value,"finished-text":0==P.value.length?"":e.$t("live.noMore"),onLoad:Z,class:"list-group"},{default:h((()=>[(p(!0),g(N,null,j(P.value,((e,a)=>(p(),g("div",{class:"group-item-box",key:a,onClick:a=>(e=>{i.push({name:"Svideo",query:{videoId:e.videoId}})})(e)},[_(f("img",{class:"bg",errorImg:k(z),type:"1",alt:""},null,8,la),[[F,e.videoImg]]),f("div",ta,[_(f("img",sa,null,512),[[F,e.leagueIcon]]),f("span",ia,T(e.leagueName||e.leagueNameCn),1)]),f("div",oa,T(e.videoTitle),1)],8,aa)))),128))])),_:2},1032,["loading","finished","finished-text"])):q.value?b("",!0):(p(),I(o,{key:1}))])),_:2},1024)):b("",!0),["SORTVIDEO"].includes(v.value)?(p(),I(ze,{key:3,videos:G.value},null,8,["videos"])):b("",!0)])),_:2},1032,["modelValue"])])),_:2},1032,["name"])))),128))])),_:1},8,["active"])])),_:1},8,["modelValue"])],2)}}});na.__scopeId="data-v-64f1e7ad";export{na as default};
