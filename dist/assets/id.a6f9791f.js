var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&i(e,t,a[t]);return e};import{s as c,b as m,w as u,j as d,d as r,r as v,E as p,o as g,R as h,P as f,q as y,B as b,U as A,F as I,_ as k,x as T,O as w,u as C,X as N,Y as P,n as S,c as x,Z as F,a2 as B,V as j,$ as E,W as _,e as D,a as H,y as K,a0 as Q}from"./vue.bfc6c13a.js";import{v as L}from"./video.es.4f61e7b8.js";import{i as M,l as R,u as O,b as J,c as G,r as z,m as X,e as Y}from"./index.ab85b374.js";import{M as U,S as V,N as Z,O as W,u as q,s as $,P as ee,Q as ae,I as te,R as le}from"./index.e02fa475.js";import{u as se,_ as ne}from"./index.72f53dfd.js";import{s as ie,a as oe}from"./s_hot2.bba3cb3a.js";var ce=new class{constructor(e){this.url=e,this.stompClient=null,this.headers={},this.subscribeMap={}}async connect(){const e=new V(this.url);return this.stompClient=Z.over(e),this.stompClient.debug=null,new Promise(((e,a)=>{this.stompClient.connect(this.headers,(()=>{console.info("%csocket重连成功!","color:#00e800;"),e(this.stompClient)}),(async e=>{this.stompClient.disconnect(),this.stompClient=null,console.error(`socket断开连接=>${e}`),console.info("socket开始尝试重新连接...."),await W(3e3),await this.connect(),a(e)}))}))}async subscribe(e,a){return this.stompClient||await this.connect(),this.subscribeMap[e]={connected:this.stompClient.connected,callback:a,client:null,onconnect:null},this.stompClient.connected&&(this.subscribeMap[e].client=this.stompClient.subscribe(e,(e=>{a(e)}))),this.subscribeMap[e]}send(e,a,t={}){this.stompClient&&this.stompClient.send(e,t,a)}disconnect(){null!==this.stompClient&&this.stompClient.disconnect()}}(`${U}/chat/websocket`);const me=e=>(N("data-v-0dfb52b0"),e=e(),P(),e),ue={class:"chat"},de={class:"item"},re={class:"item-avatar"},ve={class:"item-name"},pe=me((()=>f("em",null,":",-1))),ge={class:"item-cont"},he={class:"item-avatar"},fe={type:3},ye={class:"item-name"},be=me((()=>f("em",null,":",-1))),Ae={class:"item-cont"},Ie={class:"chat-bottom"},ke=me((()=>f("button",{"native-type":"submit",hidden:""},null,-1))),Te={class:"action"};var we=c({props:{matchInfo:{type:Object,default:()=>{}}},setup(e){const a=e,{t:t}=q(),l=m((()=>$.state.user.userInfo)),s=m((()=>{const{isSend:e}=c.value;return 0==e||!E.value})),n=m((()=>{const{isSend:e}=c.value;return!ee()||0==e})),i=m((()=>{const{isSend:e,bettingTotal:a}=c.value;return ee()?0==e?t("live.needBet",{num:a}):t("live.chatTip")+"...":t("live.needLogin")})),o=m((()=>a.matchInfo));u((()=>o.value),(()=>{N()})),d((()=>{}));const c=r({}),N=async()=>{const e={gidm:o.value.gidm,systemId:o.value.systemId,anchorId:void 0,version:"3.9.0"},a=await M(e);200==a.code&&(c.value=a.data||{},P(),x())},P=async()=>{const{roomNo:e,channelType:a}=c.value,t={roomNo:e,page:1,pageSize:20,channelType:a},l=await R(t),s=(l.extra||{}).messageList||[];if(200==l.code){const e=[];s.forEach((a=>{if(a.msgType&&2==+a.msgType&&a.content){(JSON.parse(a.content||"").bettingData||[]).forEach((a=>{e.push(a.gidm)}))}})),j(s)}},x=async()=>{const{roomNo:e}=c.value,a=`/topic/1/${e}`;ce.subscribe(a,(e=>{const a=JSON.parse(e.body);if(a&&1e3===a.action){const[e]=a.data;j(e)}}))},F=r(null),B=r([]),j=e=>{e instanceof Array?B.value=e.reverse().concat(B.value):B.value.push(e),(()=>{const e=F.value||{};S((()=>{e.scrollTop=e&&e.scrollHeight}))})()},E=r(),_=()=>{const e=E.value,{roomNo:a}=c.value,{playerId:t,teamId:s}=l.value,n={token:"1",msgType:"1",roomNo:a,content:e,playerId:t,teamId:s};ce.send("/chat/sendMsg",JSON.stringify(n)),E.value=""},D=r(),H=()=>{D.value.$el.scrollIntoView()};return(e,a)=>{const t=v("SvgIcon"),l=v("van-field"),o=v("van-form"),c=v("van-button"),m=p("img");return g(),h("div",ue,[f("div",{class:"chat-section",ref_key:"chatRef",ref:F},[f("div",de,[f("div",re,[y(t,{name:"bot"})]),f("div",ve,[b(A(e.$t("live.aiBot")),1),pe]),f("div",ge,A(e.$t("live.chatSys")),1)]),(g(!0),h(I,null,k(B.value,(e=>(g(),h("div",{class:"item",key:e.msgId},[f("div",he,[T(f("img",fe,null,512),[[m,e.headImg]])]),f("div",ye,[b(A(e.nickName),1),be]),f("div",Ae,A(e.content),1)])))),128))],512),f("div",Ie,[y(o,{onSubmit:_,"submit-on-enter":""},{default:w((()=>[y(l,{ref_key:"msgInputRef",ref:D,modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),autocomplete:"off",placeholder:C(i),disabled:C(n),maxlength:50,onFocus:H},null,8,["modelValue","placeholder","disabled"]),ke])),_:1}),f("div",Te,[y(c,{onClick:_,disabled:C(s)},{default:w((()=>[b(A(e.$t("live.send")),1)])),_:1},8,["disabled"])])])])}}});we.__scopeId="data-v-0dfb52b0";const Ce={class:"panel-bet"};var Ne=c({props:{matchInfo:{type:Object,default:()=>{}},nav:[String,Number]},setup(e){const a=e,{getPlayGroupType:t}=se(),l=r([]),s=async()=>{l.value=await t(a.matchInfo)};return u((()=>a.matchInfo),(()=>{s()})),d((()=>{s()})),(e,t)=>{const s=v("EmptyData");return g(),h("div",Ce,[0===l.value.length?(g(),x(s,{key:0})):(g(),x(ne,{key:1,"data-list":l.value,"match-info":a.matchInfo},null,8,["data-list","match-info"]))])}}});Ne.__scopeId="data-v-803e85ae";const Pe=e=>(N("data-v-665fd292"),e=e(),P(),e),Se={class:"panel-with"},xe={class:"top-nav"},Fe={class:"header"},Be={class:"avatar",type:3,alt:""},je={class:"title"},Ee={class:"right"},_e={key:0,class:"state"},De={class:"wrapper"},He={class:"summary"},Ke={class:"label"},Qe={class:"label-flex"},Le={class:"label-flex"},Me=Pe((()=>f("i",{class:"iconfont icon-dianshi"},null,-1))),Re=["innerHTML"],Oe={class:"team"},Je={class:"team-cell"},Ge={class:"palyer"},ze={src:"/assets/team.e2fd9660.png",type:4,alt:""},Xe={class:"score"},Ye={class:"team-cell"},Ue={class:"palyer"},Ve={src:"/assets/team.e2fd9660.png",type:5,alt:""},Ze={class:"score"},We={class:"ticket"},qe={class:"ticket-txt"},$e=Pe((()=>f("div",{class:"icon"},[f("img",{src:"/assets/plate.f781fc94.png",alt:""})],-1))),ea={class:"info"},aa={class:"ticket-bet"},ta={class:"betting"},la={class:"betting-cell bt1"},sa={class:"betting-cell bt2"},na={class:"footer"},ia={class:"button"},oa=Pe((()=>f("img",{src:"data:image/png;base64,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",alt:""},null,-1)));var ca=c({props:{matchInfo:{type:Object,default:()=>{}}},setup(e){const l=e,s=O(),n=r(1),i=e=>{n.value=e,c.value=[],m.value=!0,N()},c=r([]),m=r(!1),N=async()=>{var e;const s=1==n.value?J:G,i={page:1,pageSize:50,gidm:null==(e=l.matchInfo)?void 0:e.gidm},u=await s(i);if(200==u.code){const e=u.data.map((e=>{const l=o({},e),s={gameType:l.gameType,playType:l.playType,session:l.session},n=new ae(l);return i=o({},l),a(i,t({playInfo:s,marketInfo:n}));var i}));c.value=e}m.value=!1};return u((()=>l.matchInfo),(()=>{var e;(null==(e=l.matchInfo)?void 0:e.gidm)&&N()})),d((()=>{N()})),(e,a)=>{const t=v("Loading"),o=v("EmptyData"),u=v("SvgIcon"),d=v("BettingOption"),r=p("img"),N=p("play");return g(),h("div",Se,[f("div",xe,[f("span",{class:F({active:1==n.value}),onClick:a[0]||(a[0]=e=>i(1))},A(e.$t("live.curMatch")),3),f("span",{class:F({active:2==n.value}),onClick:a[1]||(a[1]=e=>i(2))},A(e.$t("live.allBetWith")),3)]),m.value?(g(),x(t,{key:0})):0===c.value.length?(g(),x(o,{key:1})):(g(!0),h(I,{key:2},k(c.value,((a,t)=>(g(),h("div",{key:t,class:"item"},[f("div",Fe,[T(f("img",Be,null,512),[[r,a.headImg]]),f("div",je,[f("strong",null,A(a.nikeName),1),f("span",null,"@"+A(a.nikeName),1)]),f("div",Ee,["RB"==l.matchInfo.showtype?(g(),h("span",_e,A(e.$t("live.inprogress")),1)):B("",!0)])]),f("div",De,[f("div",He,A(a.leagueName),1),f("div",Ke,[f("div",Qe,["FT"==a.gameType?(g(),x(u,{key:0,name:"live-football"})):B("",!0),"BK"==a.gameType?(g(),x(u,{key:1,name:"live-basketball"})):B("",!0),f("span",null,A(a.leagueShortName),1)]),f("div",Le,[Me,f("span",{innerHTML:C(s).showRBTime(l.matchInfo)},null,8,Re)])]),f("div",Oe,[f("div",Je,[f("div",Ge,[T(f("img",ze,null,512),[[r,a.homeLogo]]),f("span",null,A(a.homeTeam),1)]),f("div",Xe,[f("span",null,A(C(s).getScore(l.matchInfo,"H")||"-"),1)])]),f("div",Ye,[f("div",Ue,[T(f("img",Ve,null,512),[[r,a.awayLogo]]),f("span",null,A(a.awayTeam),1)]),f("div",Ze,[f("span",null,A(C(s).getScore(l.matchInfo,"C")||"-"),1)])])]),f("div",We,[f("div",qe,[$e,f("div",ea,[f("strong",null,A(a.betItem),1),T(f("span",null,null,512),[[N,a.playInfo]])])]),f("div",aa,[f("span",null,"@"+A(a.ior),1)])]),f("div",ta,[f("div",la,[f("strong",null,A(e.$t("live.betAmout"))+"：",1),f("span",null,[y(u,{name:"usdt"}),b(" "+A(a.golds),1)])]),f("div",sa,[f("strong",null,A(e.$t("live.betProfit"))+"：",1),f("span",null,[y(u,{name:"usdt"}),b(" "+A((a.golds*a.ior).toFixed(2)),1)])])]),f("div",na,[y(d,{"market-info":a.marketInfo},{default:w((()=>[f("div",ia,[f("span",null,A(e.$t("live.betWith")),1),oa])])),_:2},1032,["market-info"])])])])))),128))])}}});ca.__scopeId="data-v-665fd292";const ma={class:"item"},ua={class:"photo"},da=["src"],ra={key:0,class:"state"},va={class:"main"},pa={class:"main-title"},ga={class:"main-team"},ha={class:"cell"},fa={class:"head"},ya={type:4,alt:""},ba={class:"score"},Aa={class:"cell"},Ia={class:"head"},ka={type:5,alt:""},Ta={class:"score"},wa={class:"main-desc"},Ca={class:"name"},Na={class:"hots"},Pa=["src"];var Sa=c({props:{item:{type:Object,default:()=>{}}},setup(e){const a=e,{t:t}=q(),l=m((()=>$.state.app.theme)),s=m((()=>"blue"==l.value?ie:oe)),n=r(te),i=m((()=>{var e;return null==(e=a.item)?void 0:e.gameInfo})),o=m((()=>{const e=a.item;return e.anchorId?te+e.cover:"BK"==e.gameType?te+"FE/common/live/img_video_bg_BK.jpg":te+"FE/common/live/img_video_bg_FT.jpg"})),c=m((()=>{const e=a.item.watchTotal.toLocaleString();return"RB"==a.item.showType?t("live.xLooks",{num:e}):t("live.xReserve",{num:e})})),u=m((()=>({FT:"live-football",BK:"live-basketball",TN:"live-tennisball",OP_BM:"live-badminton"}[a.item.gameType])));return(a,t)=>{const l=v("van-image"),m=v("SvgIcon"),d=p("img");return g(),h("div",ma,[f("div",ua,[y(l,{src:C(o),fit:"cover"},{error:w((()=>[f("img",{src:n.value+"FE/common/live/img_video_bg_FT.jpg",alt:""},null,8,da)])),_:1},8,["src"]),"RB"==e.item.showType?(g(),h("span",ra,A(a.$t("live.hotNow")),1)):B("",!0)]),f("div",va,[f("div",pa,[C(u)?(g(),x(m,{key:0,name:C(u)},null,8,["name"])):B("",!0),f("strong",null,A(e.item.leagueName),1)]),f("div",ga,[f("div",ha,[f("div",fa,[T(f("img",ya,null,512),[[d,e.item.homeLogo]]),f("span",null,A(e.item.homeTeam),1)]),f("div",ba,[f("span",null,A(C(i).sc_game_H||C(i).sc_FT_H),1)])]),f("div",Aa,[f("div",Ia,[T(f("img",ka,null,512),[[d,e.item.awayLogo]]),f("span",null,A(e.item.awayTeam),1)]),f("div",Ta,[f("span",null,A(C(i).sc_game_A||C(i).sc_FT_C||C(i).sc_FT_A),1)])])]),f("div",wa,[f("div",Ca,A(e.item.leagueShortName),1),f("div",Na,[f("img",{src:C(s),alt:""},null,8,Pa),f("span",null,A(C(c)),1)])])])])}}});Sa.__scopeId="data-v-dc4149cc";const xa={class:"panel-more"};var Fa=c({emits:["more-video"],setup(e,{emit:a}){let t=0;const l=r([]),s=r(!1),n=r(!1),i=async()=>{t++;const e={page:t,pageSize:20,videoType:2},a=await z(e),i=a.data||{};200==a.code?(i.list.forEach((e=>{l.value.push(e)})),s.value=!1,n.value=l.value.length==i.total):n.value=!0};return d((()=>{i()})),(e,t)=>{const o=v("EmptyData"),c=v("van-list");return g(),h("div",xa,[n.value&&0===l.value.length?(g(),x(o,{key:0})):B("",!0),y(c,{loading:s.value,"onUpdate:loading":t[0]||(t[0]=e=>s.value=e),finished:n.value,"immediate-check":!1,"finished-text":0==l.value.length?"":e.$t("live.noMore"),onLoad:i},{default:w((()=>[(g(!0),h(I,null,k(l.value,(e=>(g(),h("div",{class:"more-item",key:e.gidm},[y(Sa,{item:e,onClick:t=>(e=>{a("more-video",e)})(e)},null,8,["item","onClick"])])))),128))])),_:1},8,["loading","finished","finished-text"])])}}});Fa.__scopeId="data-v-683afc9a";const Ba={class:"team"},ja={class:"team-header"},Ea={class:"league"},_a={class:"date"},Da={class:"team-container"},Ha={class:"team-player host"},Ka={class:"img-num"},Qa={type:4,alt:""},La={class:"team-score"},Ma=["innerHTML"],Ra={class:"team-player away"},Oa={class:"img-num"},Ja={type:5,alt:""};var Ga=c({props:{matchInfo:{type:Object,default:()=>{}}},setup(e){const a=e,t=O(),l=m((()=>a.matchInfo)),s=m((()=>"BK"==l.value.gameType?te+"FE/common/live/img_video_bg_BK.jpg":te+"FE/common/live/img_video_bg_FT.jpg"));return(e,a)=>{const n=v("SvgIcon"),i=p("img");return g(),h("div",{class:"match-game",style:j({backgroundImage:"url("+C(s)+")"})},[f("div",Ba,[f("div",ja,[f("div",Ea,[y(n,{name:"live-football"}),f("span",null,A(C(l).leagueName),1)]),f("div",_a,A(C(le)(C(l).gameDate,"MM-DD HH:mm")),1)]),f("div",Da,[f("div",Ha,[f("div",Ka,[T(f("img",Qa,null,512),[[i,C(l).homeLogo]]),f("span",null,A(C(t).getScore(C(l),"H")),1)]),f("strong",null,A(C(l).homeTeam),1)]),f("div",La,[f("span",{class:"default",innerHTML:C(t).showRBTime(C(l))},null,8,Ma)]),f("div",Ra,[f("div",Oa,[f("span",null,A(C(t).getScore(C(l),"C")),1),T(f("img",Ja,null,512),[[i,C(l).awayLogo]])]),f("strong",null,A(C(l).awayTeam),1)])])])],4)}}});Ga.__scopeId="data-v-3a570eb6";const za={class:"match-video"},Xa={key:0,class:"mask-loading"},Ya=(e=>(N("data-v-42f827e6"),e=e(),P(),e))((()=>f("div",{class:"icon"},null,-1))),Ua={class:"text"},Va={class:"tab-title"};var Za=c({setup(e){const{t:a}=q(),t=E(),l=_(),s=D([{title:a("live.chatroom"),iconName:"live-chat"},{title:a("live.bet"),iconName:"live-bet"},{title:a("live.betWith"),iconName:"live-bet_add"},{title:a("live.more"),iconName:"live-grid"}]),n=r(0),i=[we,Ne,ca,Fa],c=m((()=>$.state.app.showFixedBet)),u=r({}),p=async(e=t.params.id)=>{const a=(await X({gidm:e})).data||{};if(u.value=o({},a),a.detail&&a.detail.length>0){const{game:e}=a.detail[0],t=e.gameInfo||{};u.value.gameInfo=t}},b=r({});let N=null;const P=r(""),j=r(null),M=r(!1),R=r(!1),O=r(!1),J=()=>{const{streamNa:e}=b.value,{liveali:a}=e||{};j.value=(a||{}).m3u8;const s={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,sources:[{src:j.value,type:"application/x-mpegURL"}]};S((()=>{N=L(P.value,s,(()=>{N.log("onPlayerReady");document.pictureInPictureElement&&N.exitPictureInPicture().then((()=>{N.log("画中画模式已关闭")}))})),N.on("waiting",(()=>{R.value=!0})),N.on("playing",(()=>{R.value=!1})),N.on("error",(()=>{M.value=!0,R.value=!1})),N.on("enterpictureinpicture",(()=>{O.value=!0,$.commit("app/SET_PIP_GIDM",t.params.id)})),N.on("leavepictureinpicture",(()=>{if(O.value=!1,"BroadcastDetail"!==t.name){const e=$.state.app.pictureinpictureGidm;l.push(`/broadcast/${e}`)}}))}))},G=e=>{U(),M.value=!1,n.value=0,null==N||N.src(e.m3u8),null==N||N.load(),null==N||N.play(),l.replace(`/broadcast/${e.gidm}`),p(e.gidm)};let z=null;const U=()=>{z&&(clearInterval(z),z=null)},V=e=>{0==e?U():(U(),z=setInterval((()=>{p()}),5e3)),p()};return d((()=>{document.body.style.overflow="hidden",p(),(async()=>{const e=t.params.id,a=await Y({gidm:e});200==a.code?(b.value=a.data,J()):(b.value=null,M.value=!0)})()})),H((()=>{document.body.removeAttribute("style"),U(),O.value||(N&&N.dispose(),N=null)})),(e,a)=>{const t=v("SvgIcon"),l=v("van-tab"),o=v("van-tabs");return g(),h("div",{class:F(["live-page",{"has-bet":C(c)}])},[f("div",{class:F(["match",{"no-vid":M.value}])},[T(f("div",za,[f("video",{ref_key:"videoRef",ref:P,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512),R.value?(g(),h("div",Xa,[Ya,f("div",Ua,A(e.$t("live.effLoading"))+"...",1)])):B("",!0)],512),[[K,!M.value]]),M.value?(g(),x(Ga,{key:0,matchInfo:u.value},null,8,["matchInfo"])):B("",!0)],2),y(o,{active:n.value,"onUpdate:active":a[0]||(a[0]=e=>n.value=e),swipeable:"",shrink:"","line-height":"0",onChange:V},{default:w((()=>[(g(!0),h(I,null,k(C(s),((e,a)=>(g(),x(l,null,{title:w((()=>[f("div",Va,[y(t,{name:e.iconName},null,8,["name"]),f("span",null,A(e.title),1)])])),default:w((()=>[n.value==a?(g(),x(Q(i[n.value]),{key:0,matchInfo:u.value,onMoreVideo:G},null,8,["matchInfo"])):B("",!0)])),_:2},1024)))),256))])),_:1},8,["active"])],2)}}});Za.__scopeId="data-v-42f827e6";export{Za as default};
