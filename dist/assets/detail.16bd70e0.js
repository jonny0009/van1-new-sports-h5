var a=Object.defineProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(e,t,l)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;import{s as i,I as n,O as o,u as r,W as c}from"./index.2e2668f5.js";import{s as u,w as m,a4 as v,W as d,d as p,a as g,o as h,R as y,P as f,U as b,a1 as _,X as w,Y as I,n as j,b as k,r as O,E as P,q as T,u as x,x as E,V as M,a6 as N,e as S,M as C,y as D,c as L,_ as R,F as B,Z as F,O as H,$}from"./vue.ffab6494.js";import{m as W,e as U}from"./index.8f0d5b20.js";/* empty css                     */import{v as A}from"./video.es.8f722937.js";import{u as G}from"./useMatch.d1f968aa.js";const K={class:"match-video"},V={key:0,class:"mask-loading"},q=(a=>(w("data-v-4298aec0"),a=a(),I(),a))((()=>f("div",{class:"icon"},null,-1))),X={class:"text"};var Y=u({props:{url:String},emits:["on-error"],setup(a,{emit:e}){const t=a;m((()=>t.url),(a=>{l(a)}));const l=a=>{o?(null==o||o.src(a),null==o||o.load(),null==o||o.play()):w(a)},s=v(),n=d();let o=null;const r=p(""),c=p(!1),u=p(!1),w=a=>{const t={preload:"auto",width:"100%",height:"100%",autoplay:!0,muted:!1,controls:!0,fluid:!0,loadingSpinner:!1,errorDisplay:!1,sources:[{src:a,type:"application/x-mpegURL"}]};j((()=>{o=A(r.value,t,(()=>{o.log("onPlayerReady");document.pictureInPictureElement&&o.exitPictureInPicture().then((()=>{o.log("画中画模式已关闭")}))})),o.on("waiting",(()=>{c.value=!0})),o.on("playing",(()=>{c.value=!1})),o.on("error",(a=>{c.value=!1,e("on-error",a)})),o.on("enterpictureinpicture",(()=>{u.value=!0,i.commit("match/SET_PIP_GIDM",s.params.id)})),o.on("leavepictureinpicture",(()=>{if(u.value=!1,"MatchDetail"!==s.name){const a=i.state.app.pictureinpictureGidm;n.push(`/match/${a}/bets`)}}))}))};return g((()=>{u.value||(o&&o.dispose(),o=null)})),(a,e)=>(h(),y("div",K,[f("video",{ref_key:"videoRef",ref:r,class:"video-js",playsinline:"","webkit-playsinline":"","x5-video-player-type":""},null,512),c.value?(h(),y("div",V,[q,f("div",X,b(a.$t("live.effLoading"))+"...",1)])):_("",!0)]))}});Y.__scopeId="data-v-4298aec0";const Z={class:"team"},z={class:"team-header"},J={class:"league"},Q={class:"date"},aa={class:"team-container"},ea={class:"team-player host"},ta={class:"img-num"},la={type:4,alt:""},sa={class:"team-score"},ia=["innerHTML"],na={class:"team-player away"},oa={class:"img-num"},ra={type:5,alt:""};var ca=u({setup(a){const e=G(),t=k((()=>i.state.match.matchInfo)),l=k((()=>"BK"==t.value.gameType?n+"FE/common/live/img_video_bg_BK.jpg":n+"FE/common/live/img_video_bg_FT.jpg"));return(a,s)=>{const i=O("SvgIcon"),n=P("img");return h(),y("div",{class:"match-game",style:M({backgroundImage:"url("+x(l)+")"})},[f("div",Z,[f("div",z,[f("div",J,[T(i,{name:"live-football"}),f("span",null,b(x(t).leagueName),1)]),f("div",Q,b(x(o)(x(t).gameDate,"MM-DD HH:mm")),1)]),f("div",aa,[f("div",ea,[f("div",ta,[E(f("img",la,null,512),[[n,x(t).homeLogo]]),f("span",null,b(x(e).getScore(x(t),"H")),1)]),f("strong",null,b(x(t).homeTeam),1)]),f("div",sa,[f("span",{class:"default",innerHTML:x(e).showRBTime(x(t))},null,8,ia)]),f("div",na,[f("div",oa,[f("span",null,b(x(e).getScore(x(t),"C")),1),E(f("img",ra,null,512),[[n,x(t).awayLogo]])]),f("strong",null,b(x(t).awayTeam),1)])])])],4)}}});ca.__scopeId="data-v-22864e70";const ua={class:"main"},ma={class:"main-menu"},va=["onClick"],da={class:"label"},pa={class:"main-view"},ga={class:"main-chat"};var ha=u({setup(a){const n=N((()=>c((()=>import("./ChatRoom.e1057746.js")),["/assets/ChatRoom.e1057746.js","/assets/ChatRoom.d4a786ba.css","/assets/websocket.b9832980.js","/assets/index.2e2668f5.js","/assets/index.088b130d.css","/assets/vue.ffab6494.js","/assets/index.8f0d5b20.js"]))),o=(a,e)=>(a.type.name||(a.type.name=e.name),a),{t:u}=r(),g=v(),w=d(),I=k((()=>i.state.app.showFixedBet)),j=k((()=>g.params.id)),P=S([{title:u("live.bet"),iconName:"live-bet",path:"bets"},{title:u("live.betWith"),iconName:"live-combined",path:"with"},{title:u("live.stackBet"),iconName:"live-stack",path:"mixs"},{title:u("live.dataBase"),iconName:"live-data",path:"data"},{title:u("live.more"),iconName:"live-grid",path:"other"}]),M=p({}),A=async()=>{const a=j.value,n=(await W({gidm:a})).data||{};if(M.value=((a,i)=>{for(var n in i||(i={}))t.call(i,n)&&s(a,n,i[n]);if(e)for(var n of e(i))l.call(i,n)&&s(a,n,i[n]);return a})({},n),n.detail&&n.detail.length>0){const{game:a}=n.detail[0],e=a.gameInfo||{};M.value.gameInfo=e}i.commit("match/SET_MATCH_INFO",M.value)},G=p(""),K=p(!1),V=async()=>{const a=j.value,e=await U({gidm:a});if(200==e.code){const{streamNa:a}=e.data||{},{liveali:t}=a||{};G.value=(t||{}).m3u8,K.value=!1}else G.value="",K.value=!0},q=()=>{K.value=!0},X=p(!1);let Z=null;const z=()=>{Z&&(clearInterval(Z),Z=null)};return C((()=>{A(),V(),z(),Z=setInterval((()=>{A()}),5e3)})),m((()=>j.value),(()=>{A(),V()})),(a,e)=>{const t=O("SvgIcon"),l=O("router-view");return h(),y("div",{class:R(["detail",{"has-bet":x(I)}])},[f("div",{class:R(["match",{"no-video":K.value}])},[E(T(Y,{url:G.value,onOnError:q},null,8,["url"]),[[D,!K.value]]),K.value?(h(),L(ca,{key:0})):_("",!0)],2),f("div",ua,[f("div",ma,[(h(!0),y(B,null,F(x(P),((a,e)=>(h(),y("div",{class:R(["nav",{selected:x(g).path.endsWith(a.path)}]),key:e,onClick:e=>{return t=a.path,void w.replace(`/match/${j.value}/${t}`);var t}},[T(t,{name:a.iconName},null,8,["name"]),f("span",da,b(a.title),1)],10,va)))),128))]),f("div",pa,[T(l,null,{default:H((({Component:a,route:e})=>[(h(),L($(o(a,e)),{key:e.key}))])),_:1})]),f("div",ga,[f("div",{class:"holder",onClick:e[0]||(e[0]=a=>X.value=!0)},b(a.$t("live.clickOpenChat")),1)])]),T(x(n),{show:X.value,"onUpdate:show":e[1]||(e[1]=a=>X.value=a)},null,8,["show"])],2)}}});ha.__scopeId="data-v-4086948a";export{ha as default};
