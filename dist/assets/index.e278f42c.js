import{u as e,D as a,s as t,r as s,A as l,B as u,j as o}from"./index.18c6eb63.js";import{d as n,f as r,r as m,o as i,R as v,P as c,F as d,S as p,_ as f,W as g,m as T,v as y,Y as D,Z as Y,g as h,w as _,n as b,j as M,O as S,u as k,c as H,$ as x}from"./vue.23388646.js";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang.0f3368e3.js";const F=["onClick"],C=[(e=>(D("data-v-0b77095a"),e=e(),Y(),e))((()=>c("i",{class:"iconfont icon-timeMore"},null,-1)))];var j=n({emits:["returnTimeSuccess"],setup(t,{expose:s,emit:l}){const{t:u}=e(),o=r([{text:u("sport.all"),defaultToggle:!0,values:""},{text:u("home.numberHour",{number:"8"}),defaultToggle:!0,values:"8"},{text:u("home.numberHour",{number:"24"}),defaultToggle:!0,values:"24"},{text:u("home.numberDay",{number:"7"}),defaultToggle:!0,values:"168"}]),n=r(""),D=r(!1),Y=e=>{const[t,s]=e;D.value=!1;const u=o.value.filter((e=>e.defaultToggle)),r=`${a(t).format("YYYY/MM/DD")} - ${a(s).format("YYYY/MM/DD")}`;o.value=[...u,{text:r,values:r}],n.value=r,l("returnTimeSuccess",n.value),y((()=>{_.value?.scrollTo(b.value?.clientWidth,0)}))},h=()=>{D.value=!0};s({active:n});const _=r(),b=r();return(e,a)=>{const t=m("van-calendar");return i(),v(d,null,[c("div",{ref_key:"refHomeTime",ref:_,class:"homeTime-Time-Tabs pb10"},[c("div",{ref_key:"refHomeTimePage",ref:b,class:"homeTime-TimePage"},[(i(!0),v(d,null,p(o.value,((e,a)=>(i(),v("div",{key:a,class:f(["item",{active:e.values===n.value}]),onClick:a=>(e=>{n.value=e.values,l("returnTimeSuccess",n.value)})(e)},g(e.text),11,F)))),128)),c("div",{class:"more",onClick:h},C)],512)],512),T(t,{show:D.value,"onUpdate:show":a[0]||(a[0]=e=>D.value=e),type:"range",onConfirm:Y},null,8,["show"])],64)}}});j.__scopeId="data-v-0b77095a";const N={class:"mt10"};var R=n({setup(e){const n=h((()=>t.state.user.scrollNumY)),g=h((()=>{const e=t.state.app.globalBarHeaderHeight||48;return e>60?48:e})),y=r(null),D=h((()=>s?.currentRoute?.value?.name||"")),Y=h((()=>t.state.home.refreshChangeTime)),F=r(""),C=r();_(Y,(e=>{e&&(C.value?.resetParams(),clearTimeout(F.value),F.value=setTimeout((async()=>{await q(),await J()}),100))})),_((()=>n.value),(e=>{e>88&&(C.value.ifAnimated=!1)}));const R=r(!1),V=r(!1),O=r([]);(async()=>{const e=await l({showType:"FT"});if(200===e?.code&&e?.data){const a=(e.data?.stResult||[]).filter((e=>{if(!["OP_DJ","XNFT","XNBK"].includes(e.gameType))return e}));O.value=a.map((e=>({gameType:e.gameType,gameCount:1*e.num})))}})();const P=b({gameTypeSon:"",showtype:"FT",timeStage:0,gameSort:3,dateStage:0,isNovice:"Y",leagueIds:"",onlyFavorite:0,page:1,pageSize:5,gradeType:2,gameType:"FT"});"sportToday"===D.value&&(P.startDate=a().format("YYYY-MM-DD")+" 00:00:00",P.endDate=a().format("YYYY-MM-DD")+" 23:59:59");const A=r([]),$=r([]),z=r(0),B=(e=!1,a="")=>{a?L.value=!e:R.value=e},I=()=>{V.value=!1,R.value=!0,U.value=!1,P.page=1,J()},J=async(e="")=>{B(!1,e);const a=await u(P);if(B(!0,e),200===a.code){const t=a?.data||{},{baseData:s,total:l}=t?.matchList;z.value=l;const{pageSize:u,page:n}=P;e?U.value=!(u*n<l):(A.value=[],$.value=[]),$.value.push(...s);const r={},m=[];$.value.sort(((e,a)=>e.gameDate-a.gameDate)).map((e=>{const a=o(e.gameDate).format("YYYY/MM/DD");r[a]?r[a].list.push(e):r[a]={gameDate:e.gameDate,list:[e]}})),Object.keys(r).map((e=>{m.push(JSON.parse(JSON.stringify(r[e])))})),A.value=m}},L=r(!1),U=r(!1),W=r(""),X=r(!1),E=()=>{X.value?U.value||L.value||(L.value=!0,clearTimeout(W.value),W.value=setTimeout((()=>{P.page++,J(!0)}),100)):X.value=!0},K=e=>{if(e)if((e||"").includes("/")){const[a,t]=e.split("-"),s=a.replaceAll("/","-"),l=t.replaceAll("/","-");P.startDate=s+" 00:00:00",P.endDate=l+" 23:59:59"}else P.startDate=a().format("YYYY-MM-DD HH:mm:ss"),P.endDate=a().add(e,"hour").format("YYYY-MM-DD HH:mm:ss");else P.startDate="",P.endDate="";U.value=!1,P.page=1,J()},Z=e=>{R.value=!0,P.gameType=e,"all"===e&&(P.gameType=""),U.value=!1,P.page=1,J()},q=()=>{P.page=1,P.gameType="FT"};return M((()=>{J()})),(e,a)=>{const t=m("van-sticky"),s=m("HomeMatchHandicap"),l=m("HomeEmpty"),u=m("Loading"),o=m("van-list"),n=m("van-pull-refresh"),r=m("FooterHeight"),Y=m("SportsTabs");return i(),v("div",{ref_key:"newContainer",ref:y,class:"homeTime-page"},[T(Y,{ref_key:"refSportsTabs",ref:C,class:"pb10 mt2","is-custom":!0,tabs:O.value,"if-sport-today":!0,onReturnSportsSuccess:Z},{body:S((()=>[c("div",N,["HomeTime"===k(D)?(i(),H(j,{key:0,onReturnTimeSuccess:K})):x("",!0),T(n,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e),onRefresh:I},{default:S((()=>[T(o,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),finished:U.value,"finished-text":e.$t("live.noMore"),onLoad:E},{default:S((()=>[R.value?(i(),v(d,{key:0},[(i(!0),v(d,null,p(A.value,((e,a)=>(i(),v(d,{key:a},[T(t,{"offset-top":k(g),container:y.value,"z-index":"5",class:f({mt10:0!==a})},{default:S((()=>[T(w,{"send-params":e},null,8,["send-params"])])),_:2},1032,["offset-top","container","class"]),(i(!0),v(d,null,p(e.list,((e,a)=>(i(),H(s,{"play-title-toggle":!1,"send-params":e,class:f({mt10:0!==a})},null,8,["send-params","class"])))),256))],64)))),128)),A.value.length?x("",!0):(i(),H(l,{key:0}))],64)):x("",!0),!R.value||L.value?(i(),H(u,{key:1,class:f({"new_loading mt10":L.value})},null,8,["class"])):x("",!0)])),_:1},8,["modelValue","finished","finished-text"])])),_:1},8,["modelValue"]),T(r)])])),_:1},8,["tabs"])],512)}}});R.__scopeId="data-v-ace1953c";export{R as default};
